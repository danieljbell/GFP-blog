!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):window.atomic=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(n){"use strict";var o,r={method:"GET",username:null,password:null,data:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1},i=function(){for(var n={},e=0;e<arguments.length;e++){!function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?n[t]=i(n[t],e[t]):n[t]=e[t])}(arguments[e])}return n},a=function(r){var i=new XMLHttpRequest,e=new Promise(function(e,t){for(var n in i.onreadystatechange=function(){4===i.readyState&&(200<=i.status&&i.status<300?e(function(t){var n;if("text"!==o.responseType&&""!==o.responseType)return{data:t.response,xhr:t};try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return{data:n,xhr:t}}(i)):t({status:i.status,statusText:i.statusText}))},i.open(o.method,r,!0,o.username,o.password),i.responseType=o.responseType,o.headers)o.headers.hasOwnProperty(n)&&i.setRequestHeader(n,o.headers[n]);o.timeout&&(i.timeout=o.timeout,i.ontimeout=function(e){t({status:408,statusText:"Request timeout"})}),o.withCredentials&&(i.withCredentials=!0),i.send(function(e){if("string"==typeof e||"[object FormData]"===Object.prototype.toString.call(e))return e;if(/application\/json/i.test(o.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(e))return JSON.stringify(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(o.data))});return e.cancel=function(){i.abort()},e};return function(e,t){if(!("XMLHttpRequest"in n&&"JSON"in n&&"Promise"in n))throw"Atomic: This browser does not support the methods used in this plugin.";return o=i(r,t||{}),a(e)}}),window.innerWidth,document.querySelector("button#hamburger").addEventListener("click",function(e){toggleMenu();var t=document.querySelector(".site-header").offsetHeight;document.querySelector(".navigation--level-zero").style.top=t+"px"});for(var headerTopButtons=document.querySelectorAll(".navigation--button"),navLevelOne=document.querySelectorAll(".navigation--level-one"),i=0;i<navLevelOne.length;i++)navLevelOne[i].querySelector("li:first-child a").classList.add("active");for(i=0;i<headerTopButtons.length;i++)headerTopButtons[i].addEventListener("click",function(e){e.preventDefault();var t=e.target,n=t.nextElementSibling.querySelector(".navigation--level-one");n.classList.contains("active")?(n.classList.remove("active"),t.nextElementSibling.classList.remove("active")):(t.parentElement.classList.add("active"),t.nextElementSibling.classList.add("active"),t.nextElementSibling.querySelector(".navigation--level-one").classList.add("active"))});var allLevelOneLinks=document.querySelectorAll(".navigation--level-one > li > a");for(i=0;i<allLevelOneLinks.length;i++)allLevelOneLinks[i].addEventListener("click",function(e){e.preventDefault();for(var t=document.querySelectorAll(".navigation--level-one > li > a"),n=0;n<t.length;n++)t[n].classList.remove("active");e.target.classList.add("active")});function toggleMenu(){document.body.classList.toggle("menu-open"),document.querySelector("#hamburger").classList.toggle("is-active")}!function(){if(document.querySelector(".alert--cart-item"))var o=document.querySelector(".alert--cart-item").innerHTML;var a=[];document.querySelector(".alert--cart-list")&&(document.querySelector(".alert--cart-list").innerHTML="");var e=document.querySelector("#modelModifiers");document.querySelector("#main_content");e&&e.addEventListener("change",function(e){var t=e.target.value;window.location.href=window.location.origin+"/"+t});for(var t=document.querySelectorAll("table tr"),n=0;n<t.length;n++)t[n].addEventListener("mouseenter",function(e){if(!(window.innerWidth<1080||"false"===e.target.querySelector("td:first-child").dataset.productSold)){var t=e.target.querySelector("td:first-child .product-image-container");if(t)t.classList.remove("product-image--is-hidden");else{var n=e.target.querySelector("td:first-child").dataset.productImage,r=document.createElement("img");r.classList.add("product-image"),r.src=void 0===n?"https://cdn3.volusion.com/yxhfe.dfqew/v/vspfiles/templates/gfp-test/images/nophoto.gif":n;var i=document.createElement("div");i.classList.add("product-image-container"),i.appendChild(r);e.target.querySelector("td:first-child").appendChild(i)}}}),t[n].addEventListener("mouseleave",function(e){e.target.querySelector("td:first-child .product-image-container").classList.add("product-image--is-hidden")});function r(){for(var e="https://www.greenfarmparts.com/shoppingcart.asp?",t=[],n=document.querySelectorAll(".alert--cart-item"),r=0;r<n.length;r++){var i=n[r].dataset.productcode,o=n[r].querySelector('input[name="product_quantity"]').value;t.push({productCode:i,productQty:o})}for(r=0;r<t.length;r++)e=r<1?e+"productcode="+t[r].productCode+"&QTY."+t[r].productCode+"="+t[r].productQty:e+"&productcode="+t[r].productCode+"&QTY."+t[r].productCode+"="+t[r].productQty;return e}document.addEventListener("click",function(e){if(e.target.classList.contains("add-to-cart")){var t=document.querySelector(".alert--add-to-cart"),n=e.target.parentElement.parentElement.querySelector("td:first-child").innerText,r=e.target.parentElement.parentElement.querySelector("td:nth-child(2)").innerText;if(a.includes(r))return;a.push(r);var i=document.createElement("li");i.classList.add("alert--cart-item"),i.dataset.productcode=r,i.innerHTML=o,i.querySelector(".alert--cart-part-number").innerText=r,i.querySelector(".alert--cart-part-type").innerText=n,document.querySelector(".alert--cart-list").appendChild(i),t.classList.add("alert--is-active"),t.classList.contains("alert--is-minimized")&&t.classList.remove("alert--is-minimized")}}),document.querySelector("#closeAlert")&&document.querySelector("#closeAlert").addEventListener("click",function(e){var t=e.target.parentElement.parentElement,n=t.classList.toString();n.includes("alert--is-minimized")&&n.includes("alert--is-active")?t.classList.remove("alert--is-minimized"):(t.classList.add("alert--is-minimized"),t.classList.add("alert--is-active"))}),document.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("alert--remove-item")){var n=t.parentElement.parentElement.dataset.productcode,r=a.indexOf(n);a.splice(r,1),t.parentElement.parentElement.remove()}}),document.querySelector("#submitCheckout")&&document.querySelector("#submitCheckout").addEventListener("click",function(e){e.preventDefault(),window.location.href=r()}),document.querySelector("#saveForLater")&&document.querySelector("#saveForLater").addEventListener("click",function(e){e.preventDefault(),document.cookie="cartURL="+r(),document.querySelector(".alert--add-to-cart").classList.add("alert--is-minimized")});var i=document.querySelector(".maintenance-kit-container");i&&1080<window.innerWidth&&(window.onload=function(){var t=i.offsetTop,n=window.getComputedStyle(document.body,null).fontSize;n=parseInt(n.split("px")[0]),window.addEventListener("scroll",function(e){window.scrollY>t-3*n&&i.classList.add("maintenance-kit-container--is-fixed"),window.scrollY<t-3*n&&i.classList.remove("maintenance-kit-container--is-fixed")})})}(),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var i,o,a=0|t,c=Math.max(0<=a?a:r-Math.abs(a),0);for(;c<r;){if((i=n[c])===(o=e)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;c++}return!1}}),function(){var e=document.querySelector(".single-comments"),t=document.querySelector("#respond");document.querySelector("#commentform");if(t){var n=document.createElement("button");n.innerHTML="Add Comment",n.id="addComment",t.style.visibility="hidden",t.style.maxHeight="0px",t.style.padding="0px",t.style.marginTop="0px",e.appendChild(n),document.querySelector("#addComment").addEventListener("click",function(e){e.preventDefault(),e.target.style.opacity="0",t.style.visibility="visible",t.style.maxHeight="1000px",t.style.padding="1rem",t.style.marginTop="3rem"})}}();var loadPosts=document.querySelector("#loadMorePosts");if(loadPosts){var offset=1,postCount=10,postListing=document.querySelector(".post-listing--list");loadPosts.addEventListener("click",function(e){var t=window.location.origin+"/wp-json/wp/v2/posts?offset="+offset*postCount;atomic(t).then(function(e){for(var t=[],n=e.data,r=0;r<n.length;r++)t.push({date:n[r].date,author:n[r].author,category:n[r].categories[0],title:n[r].title.rendered,tags:n[r].tags,link:n[r].link,description:n[r].excerpt.rendered.slice(3,-5)});return e.data.length<10&&(loadPosts.textContent="All Posts Loaded",loadPosts.disabled=!0,loadPosts.classList.add("disabled")),t}).then(function(e){for(var t=0;t<e.length;t++){var n=e[t].date,r=new Date(n);r=r.toDateString().slice(3);var i=e[t].title,o="Uncategorized",a=e[t].link,c=e[t].description;switch(e[t].category){case 17:o="Maintenance Reminder";break;case 6:o="Talk With A Tech"}var s=document.createElement("div");s.classList.add("card"),s.innerHTML='<div class="card-meta"></div><div class="card-content">'+i+"</div>",s.querySelector(".card-meta").innerHTML='<time datetime="'+n+'">'+r+'</time><p><small>By: <a href="#0">Daniel</a></small></p>',s.querySelector(".card-content").innerHTML='<p class="card-category"><a href="/?cat='+e[t].postCategory+'">'+o+'</a></p><h4 class="card-title"><a href="'+a+'">'+i+'</a></h4><p class="card-description">'+c+'</p><ul class="single-tags--list"></ul>',postListing.appendChild(s)}}).catch(function(e){console.log(e)}),offset++})}!function(){var e=document.querySelectorAll(".accordian--title");if(e)for(var t=0;t<e.length;t++)e[t].parentElement.classList.add("accordian--is-collapsed"),e[t].addEventListener("click",function(e){e.target.parentElement.classList.contains("accordian--is-collapsed")?e.target.parentElement.classList.remove("accordian--is-collapsed"):e.target.parentElement.classList.add("accordian--is-collapsed")})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0b21pYy5taW4uanMiLCJzaXRlLWhlYWRlci5qcyIsInNpbmdsZS1wb3N0LmpzIiwic2luZ2xlLWNvbW1lbnRzLmpzIiwicG9zdC1saXN0aW5nLmpzIiwiYWNjb3JkaWFuLmpzIl0sIm5hbWVzIjpbInQiLCJlIiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIndpbmRvdyIsImF0b21pYyIsImdsb2JhbCIsInRoaXMiLCJuIiwibWV0aG9kIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRhdGEiLCJoZWFkZXJzIiwiQ29udGVudC10eXBlIiwicmVzcG9uc2VUeXBlIiwidGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsInIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImEiLCJYTUxIdHRwUmVxdWVzdCIsIm8iLCJQcm9taXNlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwieGhyIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicyIsInN0YXR1c1RleHQiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9udGltZW91dCIsInNlbmQiLCJ0ZXN0Iiwic3RyaW5naWZ5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJpIiwiY2FuY2VsIiwiYWJvcnQiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZU1lbnUiLCJoZWFkZXJIZWlnbnQiLCJvZmZzZXRIZWlnaHQiLCJzdHlsZSIsInRvcCIsImhlYWRlclRvcEJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TGV2ZWxPbmUiLCJjbGFzc0xpc3QiLCJhZGQiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGYiLCJ0YXJnZXQiLCJjaGlsZE1lbnUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjb250YWlucyIsInJlbW92ZSIsInBhcmVudEVsZW1lbnQiLCJhbGxMZXZlbE9uZUxpbmtzIiwibGlua3MiLCJqIiwiYm9keSIsInRvZ2dsZSIsImFsZXJ0Q2FydEl0ZW1UZW1wbGF0ZSIsImlubmVySFRNTCIsImFkZGVkUHJvZHVjdHMiLCJtb2RlbE1vZGlmZXJTZWxlY3QiLCJsb2MiLCJ2YWx1ZSIsImxvY2F0aW9uIiwiaHJlZiIsIm9yaWdpbiIsImFsbFJvd3MiLCJkYXRhc2V0IiwicHJvZHVjdFNvbGQiLCJpbWdFeGlzdHMiLCJpbWdQYXRoIiwicHJvZHVjdEltYWdlIiwicHJvZEltZyIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJwcm9kSW1nQ29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJidWlsZENhcnRTdHJpbmciLCJpbml0VVJMIiwiYWxsQWRkZWRQcm9kdWN0cyIsImFsbEFkZGVkSXRlbXMiLCJwcm9kdWN0Q29kZSIsInByb2R1Y3Rjb2RlIiwicHJvZHVjdFF0eSIsImFsZXJ0IiwicGFydFR5cGUiLCJpbm5lclRleHQiLCJwYXJ0TnVtYmVyIiwiaW5jbHVkZXMiLCJhZGRJdGVtIiwiY29udGFpbmVyIiwiY2xhc3NlcyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNvb2tpZSIsIm1haW50ZW5hbmNlS2l0Q29udGFpbmVyIiwib25sb2FkIiwib2Zmc2V0VG9wIiwiYmFzZUZvbnRTaXplIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImZvbnRTaXplIiwicGFyc2VJbnQiLCJzcGxpdCIsInNjcm9sbFkiLCJTdHJpbmciLCJzZWFyY2giLCJzdGFydCIsIkVsZW1lbnQiLCJDaGFyYWN0ZXJEYXRhIiwiRG9jdW1lbnRUeXBlIiwiZm9yRWFjaCIsIml0ZW0iLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIkFycmF5Iiwic2VhcmNoRWxlbWVudCIsImZyb21JbmRleCIsIlR5cGVFcnJvciIsImxlbiIsIngiLCJ5IiwiayIsIk1hdGgiLCJtYXgiLCJhYnMiLCJpc05hTiIsImNvbW1lbnRzQ29udGFpbmVyIiwiY29tbWVudHNSZXBseSIsImJ1dHRvbiIsImlkIiwidmlzaWJpbGl0eSIsIm1heEhlaWdodCIsInBhZGRpbmciLCJtYXJnaW5Ub3AiLCJvcGFjaXR5IiwibG9hZFBvc3RzIiwib2Zmc2V0IiwicG9zdENvdW50IiwicG9zdExpc3RpbmciLCJ1cmwiLCJ0aGVuIiwicG9zdE9iaiIsImRhdGUiLCJhdXRob3IiLCJjYXRlZ29yeSIsImNhdGVnb3JpZXMiLCJ0aXRsZSIsInJlbmRlcmVkIiwidGFncyIsImxpbmsiLCJkZXNjcmlwdGlvbiIsImV4Y2VycHQiLCJzbGljZSIsInRleHRDb250ZW50IiwiZGlzYWJsZWQiLCJwb3N0VGltZSIsInBvc3RQcmV0dHlUaW1lIiwiRGF0ZSIsInRvRGF0ZVN0cmluZyIsInBvc3RUaXRsZSIsInBvc3RDYXRlZ29yeSIsInBvc3RMaW5rIiwicG9zdERlc2NyaXB0aW9uIiwiY2FyZCIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYWNjb3JkaWFuQnV0dG9ucyJdLCJtYXBwaW5ncyI6IkNBQ0EsU0FBQUEsRUFBQUMsR0FBQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFBQUQsT0FBQSxHQUFBLFdBQUEsT0FBQUQsRUFBQUQsS0FBQSxpQkFBQUksUUFBQUMsT0FBQUQsUUFBQUgsRUFBQUQsR0FBQU0sT0FBQUMsT0FBQU4sRUFBQUQsR0FBQSxDQUFBLG9CQUFBUSxPQUFBQSxPQUFBLG9CQUFBRixPQUFBQSxPQUFBRyxLQUFBLFNBQUFULEdBQUEsYUFBQSxJQUFBQyxFQUFBUyxFQUFBLENBQUFDLE9BQUEsTUFBQUMsU0FBQSxLQUFBQyxTQUFBLEtBQUFDLEtBQUEsR0FBQUMsUUFBQSxDQUFBQyxlQUFBLHFDQUFBQyxhQUFBLE9BQUFDLFFBQUEsS0FBQUMsaUJBQUEsR0FBQUMsRUFBQSxXQUFBLElBQUEsSUFBQXBCLEVBQUEsR0FB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QUFBSyxjQUNBVCxVQUFBTyxTQUFBLDJCQUNBeEUsRUFBQXFFLE9BQUFLLGNBQUFULFVBQUFRLE9BQUEsMkJBRUF6RSxFQUFBcUUsT0FBQUssY0FBQVQsVUFBQUMsSUFBQSw2QkFYQSIsImZpbGUiOiJnbG9iYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgYXRvbWljIHY0LjIuMSB8IChjKSAyMDE4IENocmlzIEZlcmRpbmFuZGkgfCBNSVQgTGljZW5zZSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9jZmVyZGluYW5kaS9hdG9taWMgKi9cbiEoZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLChmdW5jdGlvbigpe3JldHVybiBlKHQpfSkpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCk6d2luZG93LmF0b21pYz1lKHQpfSkoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcywoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGUsbj17bWV0aG9kOlwiR0VUXCIsdXNlcm5hbWU6bnVsbCxwYXNzd29yZDpudWxsLGRhdGE6e30saGVhZGVyczp7XCJDb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwifSxyZXNwb25zZVR5cGU6XCJ0ZXh0XCIsdGltZW91dDpudWxsLHdpdGhDcmVkZW50aWFsczohMX0sbz1mdW5jdGlvbigpe3JldHVyblwiWE1MSHR0cFJlcXVlc3RcImluIHQmJlwiSlNPTlwiaW4gdCYmXCJQcm9taXNlXCJpbiB0fSxyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXt9LGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07IShmdW5jdGlvbihlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYoXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlW25dKT90W25dPXIodFtuXSxlW25dKTp0W25dPWVbbl0pfSkobil9cmV0dXJuIHR9LHM9ZnVuY3Rpb24odCl7dmFyIG47aWYoXCJ0ZXh0XCIhPT1lLnJlc3BvbnNlVHlwZSYmXCJcIiE9PWUucmVzcG9uc2VUeXBlKXJldHVybntkYXRhOnQucmVzcG9uc2UseGhyOnR9O3RyeXtuPUpTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoKGUpe249dC5yZXNwb25zZVRleHR9cmV0dXJue2RhdGE6bix4aHI6dH19LGk9ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fFwiW29iamVjdCBGb3JtRGF0YV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSlyZXR1cm4gdDtpZigvYXBwbGljYXRpb25cXC9qc29uL2kudGVzdChlLmhlYWRlcnNbXCJDb250ZW50LXR5cGVcIl0pfHxcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO3ZhciBuPVtdO2Zvcih2YXIgbyBpbiB0KXQuaGFzT3duUHJvcGVydHkobykmJm4ucHVzaChlbmNvZGVVUklDb21wb25lbnQobykrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbb10pKTtyZXR1cm4gbi5qb2luKFwiJlwiKX0sYT1mdW5jdGlvbih0KXt2YXIgbj1uZXcgWE1MSHR0cFJlcXVlc3Qsbz1uZXcgUHJvbWlzZShmdW5jdGlvbihvLHIpe24ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PW4ucmVhZHlTdGF0ZSYmKG4uc3RhdHVzPj0yMDAmJm4uc3RhdHVzPDMwMD9vKHMobikpOnIoe3N0YXR1czpuLnN0YXR1cyxzdGF0dXNUZXh0Om4uc3RhdHVzVGV4dH0pKX0sbi5vcGVuKGUubWV0aG9kLHQsITAsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxuLnJlc3BvbnNlVHlwZT1lLnJlc3BvbnNlVHlwZTtmb3IodmFyIGEgaW4gZS5oZWFkZXJzKWUuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShhKSYmbi5zZXRSZXF1ZXN0SGVhZGVyKGEsZS5oZWFkZXJzW2FdKTtlLnRpbWVvdXQmJihuLnRpbWVvdXQ9ZS50aW1lb3V0LG4ub250aW1lb3V0PWZ1bmN0aW9uKHQpe3Ioe3N0YXR1czo0MDgsc3RhdHVzVGV4dDpcIlJlcXVlc3QgdGltZW91dFwifSl9KSxlLndpdGhDcmVkZW50aWFscyYmKG4ud2l0aENyZWRlbnRpYWxzPSEwKSxuLnNlbmQoaShlLmRhdGEpKX0pO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe24uYWJvcnQoKX0sb307cmV0dXJuIGZ1bmN0aW9uKHQscyl7aWYoIW8oKSl0aHJvd1wiQXRvbWljOiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgbWV0aG9kcyB1c2VkIGluIHRoaXMgcGx1Z2luLlwiO3JldHVybiBlPXIobixzfHx7fSksYSh0KX19KSk7IiwiaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gMTA4MCkge1xuICAgIC8vICQoJy5tZW51LWl0ZW0tLXRvcC1sZXZlbCAuc3ViLW1lbnUtLWxldmVsLW9uZSA+IGxpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ2FjdGl2ZScpLmZpbmQoJy5zdWItbWVudS0tbGV2ZWwtdHdvJykuYWRkQ2xhc3MoJ2FjY29yZGlhbi1vcGVuJyk7XG4gICAgLy8gYWxlcnQoJ3RhZCcpO1xufVxuXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNoYW1idXJnZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdG9nZ2xlTWVudSgpO1xuICB2YXIgaGVhZGVySGVpZ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpdGUtaGVhZGVyJykub2Zmc2V0SGVpZ2h0O1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi0tbGV2ZWwtemVybycpLnN0eWxlLnRvcCA9IGhlYWRlckhlaWdudCArICdweCc7XG59KTtcblxudmFyIGhlYWRlclRvcEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tYnV0dG9uJyk7XG52YXIgbmF2TGV2ZWxPbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lJyk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgbmF2TGV2ZWxPbmUubGVuZ3RoOyBpKyspIHtcbiAgbmF2TGV2ZWxPbmVbaV0ucXVlcnlTZWxlY3RvcignbGk6Zmlyc3QtY2hpbGQgYScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufVxuXG5mb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlclRvcEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgaGVhZGVyVG9wQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgdmFyIGNoaWxkTWVudSA9IHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKTtcbiAgICBpZiAoY2hpbGRNZW51LmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIGNoaWxkTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBzZWxmLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coc2VsZi5wYXJlbnRFbGVtZW50KTtcbiAgICAvLyBzZWxmLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfSk7XG59XG5cbnZhciBhbGxMZXZlbE9uZUxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IGFsbExldmVsT25lTGlua3MubGVuZ3RoOyBpKyspIHtcbiAgYWxsTGV2ZWxPbmVMaW5rc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGlua3MubGVuZ3RoOyBqKyspIHtcbiAgICAgIGxpbmtzW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICAvLyBpZiAoYWxsTGV2ZWxPbmVMaW5rcy5jbGFzc0xpc3QuY29udGFpbnMoJycpKSB7fVxuICAgIC8vIGFsbExldmVsT25lTGlua3MuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdtZW51LW9wZW4nKTtcbiAgICB2YXIgbWVudUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoYW1idXJnZXInKTtcbiAgICBtZW51QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xufSIsIihmdW5jdGlvbigpIHtcblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWl0ZW0nKSkge1xuICAgIHZhciBhbGVydENhcnRJdGVtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtaXRlbScpLmlubmVySFRNTDtcbiAgfVxuICB2YXIgYWRkZWRQcm9kdWN0cyA9IFtdO1xuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWxpc3QnKS5pbm5lckhUTUwgPSAnJztcbiAgfVxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBNSU5JWkVTIEFMRVJUIE9OIFBBR0UgTE9BRCBJRiBDT09LSUUgUFJFU0VOVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgLy8gaWYgKGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgcmV0dXJuIGl0ZW0uaW5kZXhPZignY2FydFVSTD0nKSA+PSAwXG4gIC8vIH0pLmxlbmd0aCkge1xuICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKS5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gIC8vIH1cblxuICBcbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQ0hBTkdFIFBBR0UgV0hFTiBTRUxFQ1RFRCBNT0RFTCBNT0RJRklFUlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICB2YXIgbW9kZWxNb2RpZmVyU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsTW9kaWZpZXJzJyk7XG4gIHZhciBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW5fY29udGVudCcpO1xuXG4gIGlmIChtb2RlbE1vZGlmZXJTZWxlY3QpIHtcbiAgICBtb2RlbE1vZGlmZXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGxvYyA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy8nICsgbG9jO1xuICAgIH0pO1xuICB9XG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFNIT1cgUFJPRFVDVCBJTUFHRSBPTiBIT1ZFUlxuICBAbm90ZSA9IE9ubHkgcnVucyBvbiBzY3JlZW4gbGFyZ2VyIHRoYW4gMTA4MHB4XG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgdmFyIGFsbFJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZSB0cicpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsUm93cy5sZW5ndGg7IGkrKykge1xuICAgIGFsbFJvd3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICgod2luZG93LmlubmVyV2lkdGggPCAxMDgwKSB8fCAoZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5kYXRhc2V0LnByb2R1Y3RTb2xkID09PSAnZmFsc2UnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBpbWdFeGlzdHMgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCAucHJvZHVjdC1pbWFnZS1jb250YWluZXInKTtcbiAgICAgIGlmIChpbWdFeGlzdHMpIHtcbiAgICAgICAgaW1nRXhpc3RzLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2R1Y3QtaW1hZ2UtLWlzLWhpZGRlbicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBpbWdQYXRoID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5kYXRhc2V0LnByb2R1Y3RJbWFnZTtcbiAgICAgIHZhciBwcm9kSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICBwcm9kSW1nLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW1hZ2UnKTtcbiAgICAgIFxuICAgICAgaWYgKHR5cGVvZiBpbWdQYXRoID09PSAndW5kZWZpbmVkJykgeyBcbiAgICAgICAgcHJvZEltZy5zcmMgPSAnaHR0cHM6Ly9jZG4zLnZvbHVzaW9uLmNvbS95eGhmZS5kZnFldy92L3ZzcGZpbGVzL3RlbXBsYXRlcy9nZnAtdGVzdC9pbWFnZXMvbm9waG90by5naWYnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvZEltZy5zcmMgPSBpbWdQYXRoO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJvZEltZ0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcHJvZEltZ0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWltYWdlLWNvbnRhaW5lcicpO1xuICAgICAgcHJvZEltZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9kSW1nKTtcbiAgICAgIFxuICAgICAgdmFyIHRhYmxlQ2VsbCA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkJykuYXBwZW5kQ2hpbGQocHJvZEltZ0NvbnRhaW5lcik7XG4gICAgICBcbiAgICB9KTtcblxuICAgIGFsbFJvd3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkIC5wcm9kdWN0LWltYWdlLWNvbnRhaW5lcicpLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW1hZ2UtLWlzLWhpZGRlbicpO1xuICAgIH0pO1xuICB9XG5cblxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQURESU5HIFBST0RVQ1QgVE8gQ0FSVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgXG4gICAgaWYgKHNlbGYuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtdG8tY2FydCcpKSB7XG5cbiAgICAgIHZhciBhbGVydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKTtcbiAgICAgIHZhciBwYXJ0VHlwZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmlubmVyVGV4dDtcbiAgICAgIHZhciBwYXJ0TnVtYmVyID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RkOm50aC1jaGlsZCgyKScpLmlubmVyVGV4dDtcblxuICAgICAgaWYgKGFkZGVkUHJvZHVjdHMuaW5jbHVkZXMocGFydE51bWJlcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhZGRlZFByb2R1Y3RzLnB1c2gocGFydE51bWJlcik7XG5cbiAgICAgIHZhciBhZGRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2xpJyApO1xuICAgICAgYWRkSXRlbS5jbGFzc0xpc3QuYWRkKCdhbGVydC0tY2FydC1pdGVtJyk7XG4gICAgICBhZGRJdGVtLmRhdGFzZXQucHJvZHVjdGNvZGUgPSBwYXJ0TnVtYmVyO1xuICAgICAgYWRkSXRlbS5pbm5lckhUTUwgPSBhbGVydENhcnRJdGVtVGVtcGxhdGU7XG5cbiAgICAgIGFkZEl0ZW0ucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LXBhcnQtbnVtYmVyJykuaW5uZXJUZXh0ID0gcGFydE51bWJlcjtcbiAgICAgIGFkZEl0ZW0ucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LXBhcnQtdHlwZScpLmlubmVyVGV4dCA9IHBhcnRUeXBlO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpLmFwcGVuZENoaWxkKGFkZEl0ZW0pO1xuICAgICAgXG5cbiAgICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1hY3RpdmUnKTtcblxuICAgICAgaWYgKGFsZXJ0LmNsYXNzTGlzdC5jb250YWlucygnYWxlcnQtLWlzLW1pbmltaXplZCcpKSB7XG4gICAgICAgIGFsZXJ0LmNsYXNzTGlzdC5yZW1vdmUoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICBUT0dHTEUgQ0FSVCBBTEVSVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2xvc2VBbGVydCcpKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlQWxlcnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgICB2YXIgY29udGFpbmVyID0gc2VsZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICB2YXIgY2xhc3NlcyA9IGNvbnRhaW5lci5jbGFzc0xpc3QudG9TdHJpbmcoKTtcblxuICAgICAgaWYgKGNsYXNzZXMuaW5jbHVkZXMoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKSAmJiBjbGFzc2VzLmluY2x1ZGVzKCdhbGVydC0taXMtYWN0aXZlJykpIHtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgUkVNT1ZFIElURU0gRlJPTSBDQVJUXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHNlbGYgPSBlLnRhcmdldDtcbiAgICBpZiAoc2VsZi5jbGFzc0xpc3QuY29udGFpbnMoJ2FsZXJ0LS1yZW1vdmUtaXRlbScpKSB7XG4gICAgICB2YXIgcHJvZHVjdENvZGUgPSBzZWxmLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0LnByb2R1Y3Rjb2RlO1xuICAgICAgdmFyIGluZGV4ID0gYWRkZWRQcm9kdWN0cy5pbmRleE9mKHByb2R1Y3RDb2RlKTtcbiAgICAgIGFkZGVkUHJvZHVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHNlbGYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpOyBcbiAgICB9XG4gIH0pO1xuXG5cblxuICBmdW5jdGlvbiBidWlsZENhcnRTdHJpbmcoKSB7XG4gICAgdmFyIGluaXRVUkwgPSAnaHR0cHM6Ly93d3cuZ3JlZW5mYXJtcGFydHMuY29tL3Nob3BwaW5nY2FydC5hc3A/JztcbiAgICB2YXIgYWxsQWRkZWRQcm9kdWN0cyA9IFtdO1xuICAgIHZhciBhbGxBZGRlZEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsZXJ0LS1jYXJ0LWl0ZW0nKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsQWRkZWRJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHByb2R1Y3RDb2RlID0gYWxsQWRkZWRJdGVtc1tpXS5kYXRhc2V0LnByb2R1Y3Rjb2RlO1xuICAgICAgdmFyIHByb2R1Y3RRdHkgPSBhbGxBZGRlZEl0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJwcm9kdWN0X3F1YW50aXR5XCJdJykudmFsdWU7XG4gICAgICBhbGxBZGRlZFByb2R1Y3RzLnB1c2goe1xuICAgICAgICBwcm9kdWN0Q29kZTogcHJvZHVjdENvZGUsXG4gICAgICAgIHByb2R1Y3RRdHk6IHByb2R1Y3RRdHlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsQWRkZWRQcm9kdWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPCAxKSB7XG4gICAgICAgIGluaXRVUkwgPSBpbml0VVJMICsgJ3Byb2R1Y3Rjb2RlPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RDb2RlICsgJyZRVFkuJyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdENvZGUgKyAnPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RRdHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0VVJMID0gaW5pdFVSTCArICcmcHJvZHVjdGNvZGU9JyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdENvZGUgKyAnJlFUWS4nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0Q29kZSArICc9JyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdFF0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5pdFVSTDtcbiAgfVxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBDSEVDS09VVCAtIFNlbmQgcHJvZHVjdHMgdG8gVm9sdXNpb25cbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0Q2hlY2tvdXQnKSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXRDaGVja291dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gY2FydCB1cmwgdGVtcGxhdGU6IGh0dHBzOi8vd3d3LmdyZWVuZmFybXBhcnRzLmNvbS9zaG9wcGluZ2NhcnQuYXNwP3Byb2R1Y3Rjb2RlPWpkemc5MDAmUVRZLmpkemc5MDA9NVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBidWlsZENhcnRTdHJpbmcoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFNBVkUgRk9SIExBVEVSIC0gU2VuZCBwcm9kdWN0cyB0byBWb2x1c2lvbiBhbmQgY29va2llXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2F2ZUZvckxhdGVyJykpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2F2ZUZvckxhdGVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkb2N1bWVudC5jb29raWUgPSAnY2FydFVSTD0nICsgYnVpbGRDYXJ0U3RyaW5nKCk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWFkZC10by1jYXJ0JykuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLW1pbmltaXplZCcpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgU1RJQ0tZIE1BSU5URU5BTkNFIEtJVCBCVVkgTk9XXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuXG4gIHZhciBtYWludGVuYW5jZUtpdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWludGVuYW5jZS1raXQtY29udGFpbmVyJyk7XG4gIGlmIChtYWludGVuYW5jZUtpdENvbnRhaW5lciAmJiB3aW5kb3cuaW5uZXJXaWR0aCA+IDEwODApIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2Zmc2V0VG9wID0gbWFpbnRlbmFuY2VLaXRDb250YWluZXIub2Zmc2V0VG9wO1xuICAgICAgdmFyIGJhc2VGb250U2l6ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHksIG51bGwpLmZvbnRTaXplO1xuICAgICAgYmFzZUZvbnRTaXplID0gcGFyc2VJbnQoYmFzZUZvbnRTaXplLnNwbGl0KCdweCcpWzBdKTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gKG9mZnNldFRvcCAtIChiYXNlRm9udFNpemUgKiAzKSkpIHtcbiAgICAgICAgICBtYWludGVuYW5jZUtpdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtYWludGVuYW5jZS1raXQtY29udGFpbmVyLS1pcy1maXhlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA8IChvZmZzZXRUb3AgLSAoYmFzZUZvbnRTaXplICogMykpKSB7XG4gICAgICAgICAgbWFpbnRlbmFuY2VLaXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbWFpbnRlbmFuY2Uta2l0LWNvbnRhaW5lci0taXMtZml4ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cblxuXG59KSgpO1xuXG5cbi8qXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUE9MWUZJTEwgRk9SIHN0ci5pbmNsdWRlcygpXG5ATElOSyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvaW5jbHVkZXNcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKSB7XG4gIFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbihzZWFyY2gsIHN0YXJ0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgIT09ICdudW1iZXInKSB7XG4gICAgICBzdGFydCA9IDA7XG4gICAgfVxuICAgIFxuICAgIGlmIChzdGFydCArIHNlYXJjaC5sZW5ndGggPiB0aGlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5pbmRleE9mKHNlYXJjaCwgc3RhcnQpICE9PSAtMTtcbiAgICB9XG4gIH07XG59XG5cblxuLypcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUE9MWUZJTEwgRk9SIG5vZGUucmVtb3ZlKClcbkBMSU5LIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DaGlsZE5vZGUvcmVtb3ZlXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiovXG4oZnVuY3Rpb24gKGFycikge1xuICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KCdyZW1vdmUnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaXRlbSwgJ3JlbW92ZScsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudE5vZGUgIT09IG51bGwpXG4gICAgICAgICAgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKFtFbGVtZW50LnByb3RvdHlwZSwgQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUsIERvY3VtZW50VHlwZS5wcm90b3R5cGVdKTtcblxuXG5cbi8qXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblBPTFlGSUxMIEZPUiBhcnJheS5pbmNsdWRlc1xuQExJTksgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5jbHVkZXNcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbmlmICghQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdpbmNsdWRlcycsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24oc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG5cbiAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ0aGlzXCIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLlxuICAgICAgdmFyIG8gPSBPYmplY3QodGhpcyk7XG5cbiAgICAgIC8vIDIuIExldCBsZW4gYmUgPyBUb0xlbmd0aCg/IEdldChPLCBcImxlbmd0aFwiKSkuXG4gICAgICB2YXIgbGVuID0gby5sZW5ndGggPj4+IDA7XG5cbiAgICAgIC8vIDMuIElmIGxlbiBpcyAwLCByZXR1cm4gZmFsc2UuXG4gICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gTGV0IG4gYmUgPyBUb0ludGVnZXIoZnJvbUluZGV4KS5cbiAgICAgIC8vICAgIChJZiBmcm9tSW5kZXggaXMgdW5kZWZpbmVkLCB0aGlzIHN0ZXAgcHJvZHVjZXMgdGhlIHZhbHVlIDAuKVxuICAgICAgdmFyIG4gPSBmcm9tSW5kZXggfCAwO1xuXG4gICAgICAvLyA1LiBJZiBuIOKJpSAwLCB0aGVuXG4gICAgICAvLyAgYS4gTGV0IGsgYmUgbi5cbiAgICAgIC8vIDYuIEVsc2UgbiA8IDAsXG4gICAgICAvLyAgYS4gTGV0IGsgYmUgbGVuICsgbi5cbiAgICAgIC8vICBiLiBJZiBrIDwgMCwgbGV0IGsgYmUgMC5cbiAgICAgIHZhciBrID0gTWF0aC5tYXgobiA+PSAwID8gbiA6IGxlbiAtIE1hdGguYWJzKG4pLCAwKTtcblxuICAgICAgZnVuY3Rpb24gc2FtZVZhbHVlWmVybyh4LCB5KSB7XG4gICAgICAgIHJldHVybiB4ID09PSB5IHx8ICh0eXBlb2YgeCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHkgPT09ICdudW1iZXInICYmIGlzTmFOKHgpICYmIGlzTmFOKHkpKTtcbiAgICAgIH1cblxuICAgICAgLy8gNy4gUmVwZWF0LCB3aGlsZSBrIDwgbGVuXG4gICAgICB3aGlsZSAoayA8IGxlbikge1xuICAgICAgICAvLyBhLiBMZXQgZWxlbWVudEsgYmUgdGhlIHJlc3VsdCBvZiA/IEdldChPLCAhIFRvU3RyaW5nKGspKS5cbiAgICAgICAgLy8gYi4gSWYgU2FtZVZhbHVlWmVybyhzZWFyY2hFbGVtZW50LCBlbGVtZW50SykgaXMgdHJ1ZSwgcmV0dXJuIHRydWUuXG4gICAgICAgIGlmIChzYW1lVmFsdWVaZXJvKG9ba10sIHNlYXJjaEVsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYy4gSW5jcmVhc2UgayBieSAxLiBcbiAgICAgICAgaysrO1xuICAgICAgfVxuXG4gICAgICAvLyA4LiBSZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xufSIsIihmdW5jdGlvbigpIHtcblxuICB2YXIgY29tbWVudHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2luZ2xlLWNvbW1lbnRzJyk7XG4gIHZhciBjb21tZW50c1JlcGx5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jlc3BvbmQnKTtcbiAgdmFyIGNvbW1lbnRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbW1lbnRmb3JtJyk7XG5cblxuICBpZiAoY29tbWVudHNSZXBseSkge1xuICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnQWRkIENvbW1lbnQnO1xuICAgIGJ1dHRvbi5pZCA9ICdhZGRDb21tZW50JztcblxuICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUubWF4SGVpZ2h0ID0gJzBweCc7XG4gICAgY29tbWVudHNSZXBseS5zdHlsZS5wYWRkaW5nID0gJzBweCc7XG4gICAgY29tbWVudHNSZXBseS5zdHlsZS5tYXJnaW5Ub3AgPSAnMHB4JztcblxuICAgIGNvbW1lbnRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkQ29tbWVudCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIHNlbGYgPSBlLnRhcmdldDtcbiAgICAgIHNlbGYuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUubWF4SGVpZ2h0ID0gJzEwMDBweCc7XG4gICAgICBjb21tZW50c1JlcGx5LnN0eWxlLnBhZGRpbmcgPSAnMXJlbSc7XG4gICAgICBjb21tZW50c1JlcGx5LnN0eWxlLm1hcmdpblRvcCA9ICczcmVtJztcbiAgICB9KVxuXG4gIH1cblxuXG59KSgpOyIsInZhciBsb2FkUG9zdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9hZE1vcmVQb3N0cycpO1xuXG5pZiAobG9hZFBvc3RzKSB7XG4gICAgdmFyIG9mZnNldCA9IDE7XG4gICAgdmFyIHBvc3RDb3VudCA9IDEwO1xuICAgIHZhciBwb3N0TGlzdGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0LWxpc3RpbmctLWxpc3QnKTtcblxuICAgIGxvYWRQb3N0cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWpzb24vd3AvdjIvcG9zdHM/b2Zmc2V0PScgKyAob2Zmc2V0ICogcG9zdENvdW50KTtcbiAgICAgICAgXG4gICAgICAgIGF0b21pYyh1cmwpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE9iaiA9IFtdO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBwb3N0T2JqLnB1c2goe1xuICAgICAgICAgICAgICAgIGRhdGU6IGRhdGFbaV0uZGF0ZSxcbiAgICAgICAgICAgICAgICBhdXRob3I6IGRhdGFbaV0uYXV0aG9yLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhW2ldLmNhdGVnb3JpZXNbMF0sXG4gICAgICAgICAgICAgICAgdGl0bGU6IGRhdGFbaV0udGl0bGUucmVuZGVyZWQsXG4gICAgICAgICAgICAgICAgdGFnczogZGF0YVtpXS50YWdzLFxuICAgICAgICAgICAgICAgIGxpbms6IGRhdGFbaV0ubGluayxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YVtpXS5leGNlcnB0LnJlbmRlcmVkLnNsaWNlKDMsIC01KSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxlbmd0aCA8IDEwKSB7XG4gICAgICAgICAgICAgIGxvYWRQb3N0cy50ZXh0Q29udGVudCA9ICdBbGwgUG9zdHMgTG9hZGVkJztcbiAgICAgICAgICAgICAgbG9hZFBvc3RzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgbG9hZFBvc3RzLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBwb3N0T2JqO1xuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAudGhlbihmdW5jdGlvbihwb3N0T2JqKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3RPYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgLy8gYXNzaWduIGFsbCBkYXRhXG4gICAgICAgICAgICAgIHZhciBwb3N0VGltZSA9IHBvc3RPYmpbaV0uZGF0ZTtcbiAgICAgICAgICAgICAgdmFyIHBvc3RQcmV0dHlUaW1lID0gbmV3IERhdGUocG9zdFRpbWUpO1xuICAgICAgICAgICAgICAgICAgcG9zdFByZXR0eVRpbWUgPSBwb3N0UHJldHR5VGltZS50b0RhdGVTdHJpbmcoKS5zbGljZSgzKTtcbiAgICAgICAgICAgICAgdmFyIHBvc3RUaXRsZSA9IHBvc3RPYmpbaV0udGl0bGU7XG4gICAgICAgICAgICAgIHZhciBwb3N0Q2F0ZWdvcnkgPSAnVW5jYXRlZ29yaXplZCc7XG4gICAgICAgICAgICAgIHZhciBwb3N0TGluayA9IHBvc3RPYmpbaV0ubGluaztcbiAgICAgICAgICAgICAgdmFyIHBvc3REZXNjcmlwdGlvbiA9IHBvc3RPYmpbaV0uZGVzY3JpcHRpb247XG5cbiAgICAgICAgICAgICAgc3dpdGNoKHBvc3RPYmpbaV0uY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgcG9zdENhdGVnb3J5ID0gJ01haW50ZW5hbmNlIFJlbWluZGVyJztcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgIHBvc3RDYXRlZ29yeSA9ICdUYWxrIFdpdGggQSBUZWNoJztcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGNhcmRcbiAgICAgICAgICAgICAgdmFyIGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkJyk7XG4gICAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJjYXJkLW1ldGFcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY2FyZC1jb250ZW50XCI+JyArIHBvc3RUaXRsZSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW1ldGEnKS5pbm5lckhUTUwgPSAnPHRpbWUgZGF0ZXRpbWU9XCInICsgcG9zdFRpbWUgKyAnXCI+JyArIHBvc3RQcmV0dHlUaW1lICsgJzwvdGltZT48cD48c21hbGw+Qnk6IDxhIGhyZWY9XCIjMFwiPkRhbmllbDwvYT48L3NtYWxsPjwvcD4nO1xuICAgICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKS5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJjYXJkLWNhdGVnb3J5XCI+PGEgaHJlZj1cIi8/Y2F0PScgKyBwb3N0T2JqW2ldLnBvc3RDYXRlZ29yeSArICdcIj4nICsgcG9zdENhdGVnb3J5ICsgJzwvYT48L3A+PGg0IGNsYXNzPVwiY2FyZC10aXRsZVwiPjxhIGhyZWY9XCInICsgcG9zdExpbmsgKyAnXCI+JyArIHBvc3RUaXRsZSArICc8L2E+PC9oND48cCBjbGFzcz1cImNhcmQtZGVzY3JpcHRpb25cIj4nICsgcG9zdERlc2NyaXB0aW9uICsgJzwvcD48dWwgY2xhc3M9XCJzaW5nbGUtdGFncy0tbGlzdFwiPjwvdWw+JztcblxuICAgICAgICAgICAgICAvLyBhZGQgdGhlIGNhcmQgdG8gcmVzdWx0c1xuICAgICAgICAgICAgICBwb3N0TGlzdGluZy5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIC50aGVuKGZ1bmN0aW9uKHBvc3RPYmopIHtcbiAgICAgICAgICAvLyAgIGlmIChwb3N0T2JqICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIC8vICAgICB2YXIgaW5jbHVkZWRDYXRzID0gW107XG5cbiAgICAgICAgICAvLyAgICAgcG9zdE9iai5mb3JFYWNoKGZ1bmN0aW9uKHBvc3QpIHtcbiAgICAgICAgICAvLyAgICAgICBpbmNsdWRlZENhdHMucHVzaChwb3N0LnBvc3RDYXRlZ29yeSk7XG4gICAgICAgICAgLy8gICAgIH0pO1xuXG4gICAgICAgICAgLy8gICAgIGZ1bmN0aW9uIHJlbW92ZUR1cHMoY2F0cykge1xuICAgICAgICAgIC8vICAgICAgIHZhciB1bmlxdWUgPSB7fTtcbiAgICAgICAgICAvLyAgICAgICBjYXRzLmZvckVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgIC8vICAgICAgICAgaWYoIXVuaXF1ZVtpXSkge1xuICAgICAgICAgIC8vICAgICAgICAgICB1bmlxdWVbaV0gPSB0cnVlO1xuICAgICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAgIC8vICAgICAgIH0pO1xuICAgICAgICAgIC8vICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh1bmlxdWUpO1xuICAgICAgICAgIC8vICAgICB9XG5cbiAgICAgICAgICAvLyAgICAgdmFyIGNsZWFuQ2F0cyA9IFtdO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAvLyAgICAgYXRvbWljKCcvd3AtanNvbi93cC92Mi9jYXRlZ29yaWVzLz9pbmNsdWRlPScgKyByZW1vdmVEdXBzKGluY2x1ZGVkQ2F0cykpXG4gICAgICAgICAgLy8gICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAvLyAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAvLyAgICAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vICAgICAgICAgLy8gICBjbGVhbkNhdHMucHVzaChkYXRhLm5hbWUpXG4gICAgICAgICAgLy8gICAgICAgICAvLyB9XG5cbiAgICAgICAgICAvLyAgICAgICB9KVxuXG4gICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGNsZWFuQ2F0cyk7XG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy8gfSlcbiAgICAgICAgICBcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgb2Zmc2V0Kys7XG4gICAgfSk7XG59XG5cblxuLy8gLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4vLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5sZW5ndGg7IGkrKykge1xuLy8gICAgIC8vIGFzc2lnbiBhbGwgZGF0YVxuLy8gICAgIHZhciBwb3N0VGltZSA9IHJlc3BvbnNlLmRhdGFbaV0uZGF0ZTtcbi8vICAgICB2YXIgcG9zdFRpdGxlID0gcmVzcG9uc2UuZGF0YVtpXS50aXRsZS5yZW5kZXJlZDtcbi8vICAgICB2YXIgcG9zdERlc2NyaXB0aW9uID0gcmVzcG9uc2UuZGF0YVtpXS5leGNlcnB0LnJlbmRlcmVkO1xuLy8gICAgIHBvc3REZXNjcmlwdGlvbiA9IHBvc3REZXNjcmlwdGlvbi5zcGxpdCgnPHA+JylbMV0uc3BsaXQoJzwvcD4nKVswXTtcbi8vICAgICB2YXIgcG9zdENhdGVnb3J5ID0gcmVzcG9uc2UuZGF0YVtpXS5jYXRlZ29yaWVzWzBdO1xuLy8gICAgIHZhciBwcmltYXJ5Q2F0ZWdvcmllcyA9IHt9O1xuXG4vLyAgICAgYXRvbWljKCcvd3AtanNvbi93cC92Mi9jYXRlZ29yaWVzLz9pbmNsdWRlPScgKyBwb3N0Q2F0ZWdvcnkpXG4vLyAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UsIHByaW1hcnlDYXRlZ29yaWVzKSB7XG4gICAgICAgIFxuLy8gICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goZnVuY3Rpb24ocG9zdCwgcHJpbWFyeUNhdGVnb3JpZXMpIHtcbi8vICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwb3N0Lm5hbWUpO1xuLy8gICAgICAgICAgIHByaW1hcnlDYXRlZ29yaWVzLnB1c2gocG9zdC5uYW1lKTtcbi8vICAgICAgICAgICBjb25zb2xlLmxvZyhwcmltYXJ5Q2F0ZWdvcmllcyk7XG4vLyAgICAgICAgIH0pO1xuXG4vLyAgICAgICB9KVxuLy8gICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbi8vICAgICAgIH0pXG5cbi8vICAgICAgIGNvbnNvbGUubG9nKHByaW1hcnlDYXRlZ29yaWVzKTtcbiAgICBcbi8vICAgICAvLyBjcmVhdGUgdGhlIGNhcmRcbi8vICAgICB2YXIgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuLy8gICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZCcpO1xuLy8gICAgIGNhcmQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJjYXJkLW1ldGFcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY2FyZC1jb250ZW50XCI+JyArIHBvc3RUaXRsZSArICc8L2Rpdj4nO1xuLy8gICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtbWV0YScpLmlubmVySFRNTCA9ICc8dGltZSBkYXRldGltZT1cIicgKyBwb3N0VGltZSArICdcIj5UdWVzZGF5PC90aW1lPjxwPjxzbWFsbD5CeTogPGEgaHJlZj1cIiMwXCI+RGFuaWVsPC9hPjwvc21hbGw+PC9wPic7XG4vLyAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50JykuaW5uZXJIVE1MID0gJzxwIGNsYXNzPVwiY2FyZC1jYXRlZ29yeVwiPjxhIGhyZWY9XCIjMFwiPmFzZGY8L2E+PC9wPjxoNCBjbGFzcz1cImNhcmQtdGl0bGVcIj48YSBocmVmPVwiIzBcIj4nICsgcG9zdFRpdGxlICsgJzwvYT48L2g0PjxwIGNsYXNzPVwiY2FyZC1kZXNjcmlwdGlvblwiPicgKyBwb3N0RGVzY3JpcHRpb24gKyAnPC9wPjx1bCBjbGFzcz1cInNpbmdsZS10YWdzLS1saXN0XCI+PC91bD4nO1xuXG4vLyAgICAgLy8gYWRkIHRoZSBjYXJkIHRvIHJlc3VsdHNcbi8vICAgICBwb3N0TGlzdGluZy5hcHBlbmRDaGlsZChjYXJkKTtcbi8vICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhW2ldKTtcbiAgICBcbi8vICAgfVxuICBcbiAgXG4gIFxuXG4vLyB9KSIsIihmdW5jdGlvbigpIHtcbiAgdmFyIGFjY29yZGlhbkJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkaWFuLS10aXRsZScpO1xuICBpZiAoYWNjb3JkaWFuQnV0dG9ucykge1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY2NvcmRpYW5CdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhY2NvcmRpYW5CdXR0b25zW2ldLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWNjb3JkaWFuLS1pcy1jb2xsYXBzZWQnKTtcbiAgICAgIGFjY29yZGlhbkJ1dHRvbnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBjb250YWluaW5nRWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGlmIChjb250YWluaW5nRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGlhbi0taXMtY29sbGFwc2VkJykpIHtcbiAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGlhbi0taXMtY29sbGFwc2VkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpYW4tLWlzLWNvbGxhcHNlZCcpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSkoKTsiXX0=
