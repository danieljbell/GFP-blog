!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):window.atomic=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(n){"use strict";var a,r={method:"GET",username:null,password:null,data:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1},o=function(){for(var n={},e=0;e<arguments.length;e++){!function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?n[t]=o(n[t],e[t]):n[t]=e[t])}(arguments[e])}return n},i=function(r){var o=new XMLHttpRequest,e=new Promise(function(e,t){for(var n in o.onreadystatechange=function(){4===o.readyState&&(200<=o.status&&o.status<300?e(function(t){var n;if("text"!==a.responseType&&""!==a.responseType)return{data:t.response,xhr:t};try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return{data:n,xhr:t}}(o)):t({status:o.status,statusText:o.statusText}))},o.open(a.method,r,!0,a.username,a.password),o.responseType=a.responseType,a.headers)a.headers.hasOwnProperty(n)&&o.setRequestHeader(n,a.headers[n]);a.timeout&&(o.timeout=a.timeout,o.ontimeout=function(e){t({status:408,statusText:"Request timeout"})}),a.withCredentials&&(o.withCredentials=!0),o.send(function(e){if("string"==typeof e||"[object FormData]"===Object.prototype.toString.call(e))return e;if(/application\/json/i.test(a.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(e))return JSON.stringify(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(a.data))});return e.cancel=function(){o.abort()},e};return function(e,t){if(!("XMLHttpRequest"in n&&"JSON"in n&&"Promise"in n))throw"Atomic: This browser does not support the methods used in this plugin.";return a=o(r,t||{}),i(e)}}),window.innerWidth,document.querySelector("button#hamburger").addEventListener("click",function(e){toggleMenu();var t=document.querySelector(".site-header").offsetHeight;document.querySelector(".navigation--level-zero").style.top=t+"px"});for(var headerTopButtons=document.querySelectorAll(".navigation--button"),navLevelOne=document.querySelectorAll(".navigation--level-one"),i=0;i<navLevelOne.length;i++)navLevelOne[i].querySelector("li:first-child a").classList.add("active");for(i=0;i<headerTopButtons.length;i++)headerTopButtons[i].addEventListener("click",function(e){e.preventDefault();var t=e.target,n=t.nextElementSibling.querySelector(".navigation--level-one");n.classList.contains("active")?(n.classList.remove("active"),t.nextElementSibling.classList.remove("active")):(t.parentElement.classList.add("active"),t.nextElementSibling.classList.add("active"),t.nextElementSibling.querySelector(".navigation--level-one").classList.add("active"))});var allLevelOneLinks=document.querySelectorAll(".navigation--level-one > li > a");for(i=0;i<allLevelOneLinks.length;i++)allLevelOneLinks[i].addEventListener("click",function(e){e.preventDefault();for(var t=document.querySelectorAll(".navigation--level-one > li > a"),n=0;n<t.length;n++)t[n].classList.remove("active");e.target.classList.add("active")});function toggleMenu(){document.body.classList.toggle("menu-open"),document.querySelector("#hamburger").classList.toggle("is-active")}!function(){if(document.querySelector(".alert--cart-item"))var a=document.querySelector(".alert--cart-item").innerHTML;var i=[];document.querySelector(".alert--cart-list")&&(document.querySelector(".alert--cart-list").innerHTML="");var e=document.querySelector("#modelModifiers");document.querySelector("#main_content");e&&e.addEventListener("change",function(e){var t=e.target.value;window.location.href=t});for(var t=document.querySelectorAll("table tr"),n=0;n<t.length;n++)t[n].addEventListener("mouseenter",function(e){if(!(window.innerWidth<1080||"false"===e.target.querySelector("td:first-child").dataset.productSold)){var t=e.target.querySelector("td:first-child .product-image-container");if(t)t.classList.remove("product-image--is-hidden");else{var n=e.target.querySelector("td:first-child").dataset.productImage,r=document.createElement("img");r.classList.add("product-image"),r.src=void 0===n?"https://cdn3.volusion.com/yxhfe.dfqew/v/vspfiles/templates/gfp-test/images/nophoto.gif":n;var o=document.createElement("div");o.classList.add("product-image-container"),o.appendChild(r);e.target.querySelector("td:first-child").appendChild(o)}}}),t[n].addEventListener("mouseleave",function(e){e.target.querySelector("td:first-child .product-image-container").classList.add("product-image--is-hidden")});function r(){for(var e="https://www.greenfarmparts.com/shoppingcart.asp?",t=[],n=document.querySelectorAll(".alert--cart-item"),r=0;r<n.length;r++){var o=n[r].dataset.productcode,a=n[r].querySelector('input[name="product_quantity"]').value;t.push({productCode:o,productQty:a})}for(r=0;r<t.length;r++)e=r<1?e+"productcode="+t[r].productCode+"&QTY."+t[r].productCode+"="+t[r].productQty:e+"&productcode="+t[r].productCode+"&QTY."+t[r].productCode+"="+t[r].productQty;return e}document.addEventListener("click",function(e){if(e.target.classList.contains("add-to-cart")){var t=document.querySelector(".alert--add-to-cart"),n=e.target.parentElement.parentElement.querySelector("td:first-child").innerText,r=e.target.parentElement.parentElement.querySelector("td:nth-child(2)").innerText;if(i.includes(r))return;i.push(r);var o=document.createElement("li");o.classList.add("alert--cart-item"),o.dataset.productcode=r,o.innerHTML=a,o.querySelector(".alert--cart-part-number").innerText=r,o.querySelector(".alert--cart-part-type").innerText=n,document.querySelector(".alert--cart-list").appendChild(o),t.classList.add("alert--is-active"),t.classList.contains("alert--is-minimized")&&t.classList.remove("alert--is-minimized")}}),document.querySelector("#closeAlert")&&document.querySelector("#closeAlert").addEventListener("click",function(e){var t=e.target.parentElement.parentElement,n=t.classList.toString();n.includes("alert--is-minimized")&&n.includes("alert--is-active")?t.classList.remove("alert--is-minimized"):(t.classList.add("alert--is-minimized"),t.classList.add("alert--is-active"))}),document.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("alert--remove-item")){var n=t.parentElement.parentElement.dataset.productcode,r=i.indexOf(n);i.splice(r,1),t.parentElement.parentElement.remove()}}),document.querySelector("#submitCheckout")&&document.querySelector("#submitCheckout").addEventListener("click",function(e){e.preventDefault(),window.location.href=r()}),document.querySelector("#saveForLater")&&document.querySelector("#saveForLater").addEventListener("click",function(e){e.preventDefault(),document.cookie="cartURL="+r(),document.querySelector(".alert--add-to-cart").classList.add("alert--is-minimized")});var o=document.querySelector(".maintenance-kit-container");o&&1080<window.innerWidth&&(window.onload=function(){var t=o.offsetTop,n=window.getComputedStyle(document.body,null).fontSize;n=parseInt(n.split("px")[0]),window.addEventListener("scroll",function(e){window.scrollY>t-3*n&&o.classList.add("maintenance-kit-container--is-fixed"),window.scrollY<t-3*n&&o.classList.remove("maintenance-kit-container--is-fixed")})})}(),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o,a,i=0|t,c=Math.max(0<=i?i:r-Math.abs(i),0);for(;c<r;){if((o=n[c])===(a=e)||"number"==typeof o&&"number"==typeof a&&isNaN(o)&&isNaN(a))return!0;c++}return!1}}),function(){var e=document.querySelector(".single-comments"),t=document.querySelector("#respond");document.querySelector("#commentform");if(t){var n=document.createElement("button");n.innerHTML="Add Comment",n.id="addComment",t.style.visibility="hidden",t.style.maxHeight="0px",t.style.padding="0px",t.style.marginTop="0px",e.appendChild(n),document.querySelector("#addComment").addEventListener("click",function(e){e.preventDefault(),e.target.style.opacity="0",t.style.visibility="visible",t.style.maxHeight="1000px",t.style.padding="1rem",t.style.marginTop="3rem"})}}(),function(){var o=document.querySelector("#loadMorePosts");if(o){var r=1,l=document.querySelector(".post-listing--list");o.addEventListener("click",function(e){var t=window.location.origin+"/wp-json/wp/v2/posts?offset="+10*r;if(document.body.classList.contains("category")){var n=document.body.classList;console.log(n)}o.disabled=!0,o.classList.add("disabled"),atomic(t).then(function(e){for(var t=[],n=e.data,r=0;r<n.length;r++)t.push({date:n[r].date,author:n[r].author,category:n[r].categories[0],title:n[r].title.rendered,tags:n[r].tags,link:n[r].link,description:n[r].excerpt.rendered.slice(3,-5)});return o.disabled=!1,o.classList.remove("disabled"),e.data.length<10&&(o.textContent="All Posts Loaded",o.disabled=!0,o.classList.add("disabled")),t}).then(function(e){for(var t=0;t<e.length;t++){var n=e[t].date,r=new Date(n);r=r.toDateString().slice(3);var o=e[t].title,a="Uncategorized",i=e[t].link,c=e[t].description;switch(e[t].category){case 17:a="Maintenance Reminder";break;case 63:a="Service Intervals";break;case 65:a="Troubleshooting";break;case 6:a="Talk With A Tech"}var s=document.createElement("div");s.classList.add("card"),s.innerHTML='<div class="card-content">'+o+"</div>",s.querySelector(".card-content").innerHTML='<p class="card-category"><a href="/?cat='+e[t].category+'">'+a+'</a></p><h4 class="card-title"><a href="'+i+'">'+o+'</a></h4><p class="card-description">'+c+'</p><ul class="single-tags--list"></ul>',l.appendChild(s)}}).catch(function(e){console.log(e)}),r++})}}(),function(){var e=document.querySelectorAll(".accordian--title");if(e)for(var t=0;t<e.length;t++)e[t].parentElement.classList.add("accordian--is-collapsed"),e[t].addEventListener("click",function(e){e.target.parentElement.classList.contains("accordian--is-collapsed")?e.target.parentElement.classList.remove("accordian--is-collapsed"):e.target.parentElement.classList.add("accordian--is-collapsed")})}(),function(){var e=document.querySelectorAll(".tooltip--toggle");if(e)for(var t=0;t<e.length;t++)e[t].nextElementSibling.classList.add("tooltip--is-hidden"),e[t].addEventListener("click",function(e){console.log(e.target.nextElementSibling.classList.toggle("tooltip--is-hidden"))})}(),function(){var e=document.querySelectorAll(".modal--close"),t=document.querySelectorAll("button[data-modal-launch]");if(e){for(var n=0;n<t.length;n++)t[n].addEventListener("click",function(e){var t=e.target.dataset.modalLaunch;if(document.querySelector(".modal[data-modal="+t+"]").classList.remove("modal--is-hidden"),document.body.classList.add("modal--is-open"),t="sign-up-form")for(var n=document.querySelectorAll('meta[property="article:tag"]'),r=0;r<n.length;r++)if(n[r].content.includes("John Deere")&&"John Deere Lawn Tractor"!==n[r].content){var o=n[r].content.split("John Deere ")[1];document.querySelector("#mce-MODEL").value=o.toUpperCase()}});for(n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.target.parentElement.parentElement.classList.add("modal--is-hidden"),document.body.classList.remove("modal--is-open")});document.addEventListener("keyup",function(e){if(27==e.keyCode){var t=document.querySelectorAll("div[data-modal]");document.body.classList.remove("modal--is-open");for(var n=0;n<t.length;n++)t[n].classList.add("modal--is-hidden")}})}}(),window.jQuery&&document.body.classList.contains("single-post")&&$("#mc-embedded-subscribe-form").on("submit",function(e){e.preventDefault();var t=$(this),n=t.find("#mce-EMAIL").val(),r=t.find("#mce-FNAME").val(),o=t.find("#mce-LNAME").val(),a=t.find("#mce-MODEL").val(),i=t.find("#mce-CURRENT_HR").val(),c=t.find("#mce-MOWING_TIM").val();c=c.split("(")[1].split(")")[0].toLowerCase(),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){},success:function(e){"success"!=e.result?$("#mc_embed_signup_scroll").prepend('<p style="border: 1px solid red; padding: 1rem;">'+e.msg+"</p>"):(t.hide(),$('div[data-modal="sign-up-form"] .modal-heading').text("Great "+r+"!").next().text("You will receive a confirmation email soon and we will keep you up to date on your needed parts.")),$.ajax({type:"POST",url:"https://api.flock.com/hooks/sendMessage/855832cd-bd79-436d-9f1f-dcf0020251dd",data:JSON.stringify({text:r+" "+o+" has a "+a+" with "+i+" hours and takes "+c+" to mow. Contact "+r+" at "+n}),dataType:"json",contentType:"application/json"})}})}),function(){var e=parseInt(window.getComputedStyle(document.querySelector("body")).getPropertyValue("font-size")),t=document.querySelector("#stickyNav");if(t){var n=window.scrollY,r=t.offsetTop,o=t.clientWidth;window.addEventListener("resize",function(){r=t.offsetTop,console.log(r)}),document.addEventListener("scroll",function(){n=window.scrollY,r-3*e<n?(t.classList.add("nav--is-sticky"),t.style.maxWidth=o+"px"):t.classList.remove("nav--is-sticky")})}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0b21pYy5taW4uanMiLCJzaXRlLWhlYWRlci5qcyIsInNpbmdsZS1wb3N0LmpzIiwic2luZ2xlLWNvbW1lbnRzLmpzIiwicG9zdC1saXN0aW5nLmpzIiwiYWNjb3JkaWFuLmpzIiwidG9vbHRpcC5qcyIsIm1vZGFsLmpzIiwic2lnbi11cC1mb3JtLmpzIiwic3RpY2t5LW5hdmlnYXRpb24uanMiXSwibmFtZXMiOlsidCIsImUiLCJkZWZpbmUiLCJhbWQiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93IiwiYXRvbWljIiwiZ2xvYmFsIiwidGhpcyIsIm4iLCJtZXRob2QiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGF0YSIsImhlYWRlcnMiLCJDb250ZW50LXR5cGUiLCJyZXNwb25zZVR5cGUiLCJ0aW1lb3V0Iiwid2l0aENyZWRlbnRpYWxzIiwiciIsImFyZ3VtZW50cyIsImxlbmd0aCIsImhhc093blByb3BlcnR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiYSIsIlhNTEh0dHBSZXF1ZXN0IiwibyIsIlByb21pc2UiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJ4aHIiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzIiwic3RhdHVzVGV4dCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib250aW1lb3V0Iiwic2VuZCIsInRlc3QiLCJzdHJpbmdpZnkiLCJwdXNoIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsImkiLCJjYW5jZWwiLCJhYm9ydCIsImlubmVyV2lkdGgiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlTWVudSIsImhlYWRlckhlaWdudCIsIm9mZnNldEhlaWdodCIsInN0eWxlIiwidG9wIiwiaGVhZGVyVG9wQnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuYXZMZXZlbE9uZSIsImNsYXNzTGlzdCIsImFkZCIsInByZXZlbnREZWZhdWx0Iiwic2VsZiIsInRhcmdldCIsImNoaWxkTWVudSIsIm5leHRFbGVtZW50U2libGluZyIsImNvbnRhaW5zIiwicmVtb3ZlIiwicGFyZW50RWxlbWVudCIsImFsbExldmVsT25lTGlua3MiLCJsaW5rcyIsImoiLCJib2R5IiwidG9nZ2xlIiwiYWxlcnRDYXJ0SXRlbVRlbXBsYXRlIiwiaW5uZXJIVE1MIiwiYWRkZWRQcm9kdWN0cyIsIm1vZGVsTW9kaWZlclNlbGVjdCIsImxvYyIsInZhbHVlIiwibG9jYXRpb24iLCJocmVmIiwiYWxsUm93cyIsImRhdGFzZXQiLCJwcm9kdWN0U29sZCIsImltZ0V4aXN0cyIsImltZ1BhdGgiLCJwcm9kdWN0SW1hZ2UiLCJwcm9kSW1nIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsInByb2RJbWdDb250YWluZXIiLCJhcHBlbmRDaGlsZCIsImJ1aWxkQ2FydFN0cmluZyIsImluaXRVUkwiLCJhbGxBZGRlZFByb2R1Y3RzIiwiYWxsQWRkZWRJdGVtcyIsInByb2R1Y3RDb2RlIiwicHJvZHVjdGNvZGUiLCJwcm9kdWN0UXR5IiwiYWxlcnQiLCJwYXJ0VHlwZSIsImlubmVyVGV4dCIsInBhcnROdW1iZXIiLCJpbmNsdWRlcyIsImFkZEl0ZW0iLCJjb250YWluZXIiLCJjbGFzc2VzIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiY29va2llIiwibWFpbnRlbmFuY2VLaXRDb250YWluZXIiLCJvbmxvYWQiLCJvZmZzZXRUb3AiLCJiYXNlRm9udFNpemUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZm9udFNpemUiLCJwYXJzZUludCIsInNwbGl0Iiwic2Nyb2xsWSIsIlN0cmluZyIsInNlYXJjaCIsInN0YXJ0IiwiRWxlbWVudCIsIkNoYXJhY3RlckRhdGEiLCJEb2N1bWVudFR5cGUiLCJmb3JFYWNoIiwiaXRlbSIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiQXJyYXkiLCJzZWFyY2hFbGVtZW50IiwiZnJvbUluZGV4IiwiVHlwZUVycm9yIiwibGVuIiwieCIsInkiLCJrIiwiTWF0aCIsIm1heCIsImFicyIsImlzTmFOIiwiY29tbWVudHNDb250YWluZXIiLCJjb21tZW50c1JlcGx5IiwiYnV0dG9uIiwiaWQiLCJ2aXNpYmlsaXR5IiwibWF4SGVpZ2h0IiwicGFkZGluZyIsIm1hcmdpblRvcCIsIm9wYWNpdHkiLCJsb2FkUG9zdHMiLCJvZmZzZXQiLCJwb3N0TGlzdGluZyIsInVybCIsIm9yaWdpbiIsImNhdCIsImNvbnNvbGUiLCJsb2ciLCJkaXNhYmxlZCIsInRoZW4iLCJwb3N0T2JqIiwiZGF0ZSIsImF1dGhvciIsImNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsInRpdGxlIiwicmVuZGVyZWQiLCJ0YWdzIiwibGluayIsImRlc2NyaXB0aW9uIiwiZXhjZXJwdCIsInNsaWNlIiwidGV4dENvbnRlbnQiLCJwb3N0VGltZSIsInBvc3RQcmV0dHlUaW1lIiwiRGF0ZSIsInRvRGF0ZVN0cmluZyIsInBvc3RUaXRsZSIsInBvc3RDYXRlZ29yeSIsInBvc3RMaW5rIiwicG9zdERlc2NyaXB0aW9uIiwiY2FyZCIsImNhdGNoIiwiZXJyb3IiLCJhY2NvcmRpYW5CdXR0b25zIiwiYWxsVG9vbFRpcHMiLCJjbG9zZU1vZGFsIiwibGF1bmNoTW9kYWwiLCJtb2RhbElEIiwibW9kYWxMYXVuY2giLCJwYWdlVGFncyIsImNvbnRlbnQiLCJtb2RlbCIsInRvVXBwZXJDYXNlIiwia2V5Q29kZSIsImpRdWVyeSIsIiQiLCJvbiIsIiR0aGlzIiwiZW1haWwiLCJmaW5kIiwidmFsIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJtb2RlbE51bWJlciIsImN1cnJlbnRIb3VycyIsIm1vd2luZ1RpbWUiLCJ0b0xvd2VyQ2FzZSIsImFqYXgiLCJ0eXBlIiwiYXR0ciIsInNlcmlhbGl6ZSIsImNhY2hlIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsImVyciIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJwcmVwZW5kIiwibXNnIiwiaGlkZSIsInRleHQiLCJuZXh0IiwiZ2V0UHJvcGVydHlWYWx1ZSIsIm5hdiIsIm5hdk9mZnNldCIsIm5hdldpZHRoIiwiY2xpZW50V2lkdGgiLCJtYXhXaWR0aCJdLCJtYXBwaW5ncyI6IkNBQ0EsU0FBQUEsRUFBQUMsR0FBQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFBQUQsT0FBQSxHQUFBLFdBQUEsT0FBQUQsRUFBQUQsS0FBQSxpQkFBQUksUUFBQUMsT0FBQUQsUUFBQUgsRUFBQUQsR0FBQU0sT0FBQUMsT0FBQU4sRUFBQUQsR0FBQSxDQUFBLG9CQUFBUSxPQUFBQSxPQUFBLG9CQUFBRixPQUFBQSxPQUFBRyxLQUFBLFNBQUFULEdBQUEsYUFBQSxJQUFBQyxFQUFBUyxFQUFBLENBQUFDLE9BQUEsTUFBQUMsU0FBQSxLQUFBQyxTQUFBLEtBQUFDLEtBQUEsR0FBQUMsUUFBQSxDQUFBQyxlQUFBLHFDQUFBQyxhQUFBLE9BQUFDLFFBQUEsS0FBQUMsaUJBQUEsR0FBQUMsRUFBQSxXQUFBLElBQUEsSUFBQXBCLEVBQUEsR0FBQUMsRUFBQSxFQUFBQSxFQUFBb0IsVUFBQUMsT0FBQXJCLElBQUEsRUFBQSxTQUFBQSxHQUFBLElBQUEsSUFBQVMsS0FBQVQsRUFBQUEsRUFBQXNCLGVBQUFiLEtBQUEsb0JBQUFjLE9BQUFDLFVBQUFDLFNBQUFDLEtBQUExQixFQUFBUyxJQUFBVixFQUFBVSxHQUFBVSxFQUFBcEIsRUFBQVUsR0FBQVQsRUFBQVMsSUFBQVYsRUFBQVUsR0FBQVQsRUFBQVMsSUFBQSxDQUFBVyxVQUFBcEIsSUFBQSxPQUFBRCxHQUFBNEIsRUFBQSxTQUFBNUIsR0FBQSxJQUFBVSxFQUFBLElBQUFtQixlQUFBQyxFQUFBLElBQUFDLFFBQUEsU0FBQUQsRUFBQVYsR0FBQSxJQUFBLElBQUFRLEtBQUFsQixFQUFBc0IsbUJBQUEsV0FBQSxJQUFBdEIsRUFBQXVCLGFBQUEsS0FBQXZCLEVBQUF3QixRQUFBeEIsRUFBQXdCLE9B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MUNBLFdBRUEsSUFBQXpHLEVBQUFHLFNBQUF2SCxPQUFBcUgsaUJBQUFwRSxTQUFBQyxjQUFBLFNBQUFvTCxpQkFBQSxjQUVBQyxFQUFBdEwsU0FBQUMsY0FBQSxjQUVBLEdBQUFxTCxFQUFBLENBRUEsSUFBQTlHLEVBQUF6SCxPQUFBeUgsUUFDQStHLEVBQUFELEVBQUFwSCxVQUNBc0gsRUFBQUYsRUFBQUcsWUFFQTFPLE9BQUFtRCxpQkFBQSxTQUFBLFdBQ0FxTCxFQUFBRCxFQUFBcEgsVUFDQWdELFFBQUFDLElBQUFvRSxLQUdBdkwsU0FBQUUsaUJBQUEsU0FBQSxXQUNBc0UsRUFBQXpILE9BQUF5SCxRQUNBK0csRUFBQSxFQUFBcEgsRUFBQUssR0FHQThHLEVBQUEzSyxVQUFBQyxJQUFBLGtCQUNBMEssRUFBQWhMLE1BQUFvTCxTQUFBRixFQUFBLE1BRUFGLEVBQUEzSyxVQUFBUSxPQUFBLHFCQXpCQSIsImZpbGUiOiJnbG9iYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgYXRvbWljIHY0LjIuMSB8IChjKSAyMDE4IENocmlzIEZlcmRpbmFuZGkgfCBNSVQgTGljZW5zZSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9jZmVyZGluYW5kaS9hdG9taWMgKi9cbiEoZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLChmdW5jdGlvbigpe3JldHVybiBlKHQpfSkpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCk6d2luZG93LmF0b21pYz1lKHQpfSkoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcywoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGUsbj17bWV0aG9kOlwiR0VUXCIsdXNlcm5hbWU6bnVsbCxwYXNzd29yZDpudWxsLGRhdGE6e30saGVhZGVyczp7XCJDb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwifSxyZXNwb25zZVR5cGU6XCJ0ZXh0XCIsdGltZW91dDpudWxsLHdpdGhDcmVkZW50aWFsczohMX0sbz1mdW5jdGlvbigpe3JldHVyblwiWE1MSHR0cFJlcXVlc3RcImluIHQmJlwiSlNPTlwiaW4gdCYmXCJQcm9taXNlXCJpbiB0fSxyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXt9LGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07IShmdW5jdGlvbihlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYoXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlW25dKT90W25dPXIodFtuXSxlW25dKTp0W25dPWVbbl0pfSkobil9cmV0dXJuIHR9LHM9ZnVuY3Rpb24odCl7dmFyIG47aWYoXCJ0ZXh0XCIhPT1lLnJlc3BvbnNlVHlwZSYmXCJcIiE9PWUucmVzcG9uc2VUeXBlKXJldHVybntkYXRhOnQucmVzcG9uc2UseGhyOnR9O3RyeXtuPUpTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoKGUpe249dC5yZXNwb25zZVRleHR9cmV0dXJue2RhdGE6bix4aHI6dH19LGk9ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fFwiW29iamVjdCBGb3JtRGF0YV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSlyZXR1cm4gdDtpZigvYXBwbGljYXRpb25cXC9qc29uL2kudGVzdChlLmhlYWRlcnNbXCJDb250ZW50LXR5cGVcIl0pfHxcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO3ZhciBuPVtdO2Zvcih2YXIgbyBpbiB0KXQuaGFzT3duUHJvcGVydHkobykmJm4ucHVzaChlbmNvZGVVUklDb21wb25lbnQobykrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbb10pKTtyZXR1cm4gbi5qb2luKFwiJlwiKX0sYT1mdW5jdGlvbih0KXt2YXIgbj1uZXcgWE1MSHR0cFJlcXVlc3Qsbz1uZXcgUHJvbWlzZShmdW5jdGlvbihvLHIpe24ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PW4ucmVhZHlTdGF0ZSYmKG4uc3RhdHVzPj0yMDAmJm4uc3RhdHVzPDMwMD9vKHMobikpOnIoe3N0YXR1czpuLnN0YXR1cyxzdGF0dXNUZXh0Om4uc3RhdHVzVGV4dH0pKX0sbi5vcGVuKGUubWV0aG9kLHQsITAsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxuLnJlc3BvbnNlVHlwZT1lLnJlc3BvbnNlVHlwZTtmb3IodmFyIGEgaW4gZS5oZWFkZXJzKWUuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShhKSYmbi5zZXRSZXF1ZXN0SGVhZGVyKGEsZS5oZWFkZXJzW2FdKTtlLnRpbWVvdXQmJihuLnRpbWVvdXQ9ZS50aW1lb3V0LG4ub250aW1lb3V0PWZ1bmN0aW9uKHQpe3Ioe3N0YXR1czo0MDgsc3RhdHVzVGV4dDpcIlJlcXVlc3QgdGltZW91dFwifSl9KSxlLndpdGhDcmVkZW50aWFscyYmKG4ud2l0aENyZWRlbnRpYWxzPSEwKSxuLnNlbmQoaShlLmRhdGEpKX0pO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe24uYWJvcnQoKX0sb307cmV0dXJuIGZ1bmN0aW9uKHQscyl7aWYoIW8oKSl0aHJvd1wiQXRvbWljOiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgbWV0aG9kcyB1c2VkIGluIHRoaXMgcGx1Z2luLlwiO3JldHVybiBlPXIobixzfHx7fSksYSh0KX19KSk7IiwiaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gMTA4MCkge1xuICAgIC8vICQoJy5tZW51LWl0ZW0tLXRvcC1sZXZlbCAuc3ViLW1lbnUtLWxldmVsLW9uZSA+IGxpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ2FjdGl2ZScpLmZpbmQoJy5zdWItbWVudS0tbGV2ZWwtdHdvJykuYWRkQ2xhc3MoJ2FjY29yZGlhbi1vcGVuJyk7XG4gICAgLy8gYWxlcnQoJ3RhZCcpO1xufVxuXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNoYW1idXJnZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdG9nZ2xlTWVudSgpO1xuICB2YXIgaGVhZGVySGVpZ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpdGUtaGVhZGVyJykub2Zmc2V0SGVpZ2h0O1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi0tbGV2ZWwtemVybycpLnN0eWxlLnRvcCA9IGhlYWRlckhlaWdudCArICdweCc7XG59KTtcblxudmFyIGhlYWRlclRvcEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tYnV0dG9uJyk7XG52YXIgbmF2TGV2ZWxPbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lJyk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgbmF2TGV2ZWxPbmUubGVuZ3RoOyBpKyspIHtcbiAgbmF2TGV2ZWxPbmVbaV0ucXVlcnlTZWxlY3RvcignbGk6Zmlyc3QtY2hpbGQgYScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufVxuXG5mb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlclRvcEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgaGVhZGVyVG9wQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgdmFyIGNoaWxkTWVudSA9IHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKTtcbiAgICBpZiAoY2hpbGRNZW51LmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIGNoaWxkTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBzZWxmLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coc2VsZi5wYXJlbnRFbGVtZW50KTtcbiAgICAvLyBzZWxmLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfSk7XG59XG5cbnZhciBhbGxMZXZlbE9uZUxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IGFsbExldmVsT25lTGlua3MubGVuZ3RoOyBpKyspIHtcbiAgYWxsTGV2ZWxPbmVMaW5rc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGlua3MubGVuZ3RoOyBqKyspIHtcbiAgICAgIGxpbmtzW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICAvLyBpZiAoYWxsTGV2ZWxPbmVMaW5rcy5jbGFzc0xpc3QuY29udGFpbnMoJycpKSB7fVxuICAgIC8vIGFsbExldmVsT25lTGlua3MuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdtZW51LW9wZW4nKTtcbiAgICB2YXIgbWVudUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoYW1idXJnZXInKTtcbiAgICBtZW51QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xufSIsIihmdW5jdGlvbigpIHtcblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWl0ZW0nKSkge1xuICAgIHZhciBhbGVydENhcnRJdGVtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtaXRlbScpLmlubmVySFRNTDtcbiAgfVxuICB2YXIgYWRkZWRQcm9kdWN0cyA9IFtdO1xuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWxpc3QnKS5pbm5lckhUTUwgPSAnJztcbiAgfVxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBNSU5JWkVTIEFMRVJUIE9OIFBBR0UgTE9BRCBJRiBDT09LSUUgUFJFU0VOVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgLy8gaWYgKGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgcmV0dXJuIGl0ZW0uaW5kZXhPZignY2FydFVSTD0nKSA+PSAwXG4gIC8vIH0pLmxlbmd0aCkge1xuICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKS5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gIC8vIH1cblxuICBcbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQ0hBTkdFIFBBR0UgV0hFTiBTRUxFQ1RFRCBNT0RFTCBNT0RJRklFUlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICB2YXIgbW9kZWxNb2RpZmVyU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsTW9kaWZpZXJzJyk7XG4gIHZhciBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW5fY29udGVudCcpO1xuXG4gIGlmIChtb2RlbE1vZGlmZXJTZWxlY3QpIHtcbiAgICBtb2RlbE1vZGlmZXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGxvYyA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsb2M7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgU0hPVyBQUk9EVUNUIElNQUdFIE9OIEhPVkVSXG4gIEBub3RlID0gT25seSBydW5zIG9uIHNjcmVlbiBsYXJnZXIgdGhhbiAxMDgwcHhcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICB2YXIgYWxsUm93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlIHRyJyk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGxSb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgYWxsUm93c1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKCh3aW5kb3cuaW5uZXJXaWR0aCA8IDEwODApIHx8IChlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmRhdGFzZXQucHJvZHVjdFNvbGQgPT09ICdmYWxzZScpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGltZ0V4aXN0cyA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkIC5wcm9kdWN0LWltYWdlLWNvbnRhaW5lcicpO1xuICAgICAgaWYgKGltZ0V4aXN0cykge1xuICAgICAgICBpbWdFeGlzdHMuY2xhc3NMaXN0LnJlbW92ZSgncHJvZHVjdC1pbWFnZS0taXMtaGlkZGVuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGltZ1BhdGggPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmRhdGFzZXQucHJvZHVjdEltYWdlO1xuICAgICAgdmFyIHByb2RJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIHByb2RJbWcuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1pbWFnZScpO1xuICAgICAgXG4gICAgICBpZiAodHlwZW9mIGltZ1BhdGggPT09ICd1bmRlZmluZWQnKSB7IFxuICAgICAgICBwcm9kSW1nLnNyYyA9ICdodHRwczovL2NkbjMudm9sdXNpb24uY29tL3l4aGZlLmRmcWV3L3YvdnNwZmlsZXMvdGVtcGxhdGVzL2dmcC10ZXN0L2ltYWdlcy9ub3Bob3RvLmdpZic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9kSW1nLnNyYyA9IGltZ1BhdGg7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9kSW1nQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBwcm9kSW1nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW1hZ2UtY29udGFpbmVyJyk7XG4gICAgICBwcm9kSW1nQ29udGFpbmVyLmFwcGVuZENoaWxkKHByb2RJbWcpO1xuICAgICAgXG4gICAgICB2YXIgdGFibGVDZWxsID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5hcHBlbmRDaGlsZChwcm9kSW1nQ29udGFpbmVyKTtcbiAgICAgIFxuICAgIH0pO1xuXG4gICAgYWxsUm93c1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQgLnByb2R1Y3QtaW1hZ2UtY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1pbWFnZS0taXMtaGlkZGVuJyk7XG4gICAgfSk7XG4gIH1cblxuXG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICBBRERJTkcgUFJPRFVDVCBUTyBDQVJUXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHNlbGYgPSBlLnRhcmdldDtcbiAgICBcbiAgICBpZiAoc2VsZi5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC10by1jYXJ0JykpIHtcblxuICAgICAgdmFyIGFsZXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1hZGQtdG8tY2FydCcpO1xuICAgICAgdmFyIHBhcnRUeXBlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkJykuaW5uZXJUZXh0O1xuICAgICAgdmFyIHBhcnROdW1iZXIgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcigndGQ6bnRoLWNoaWxkKDIpJykuaW5uZXJUZXh0O1xuXG4gICAgICBpZiAoYWRkZWRQcm9kdWN0cy5pbmNsdWRlcyhwYXJ0TnVtYmVyKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFkZGVkUHJvZHVjdHMucHVzaChwYXJ0TnVtYmVyKTtcblxuICAgICAgdmFyIGFkZEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnbGknICk7XG4gICAgICBhZGRJdGVtLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1jYXJ0LWl0ZW0nKTtcbiAgICAgIGFkZEl0ZW0uZGF0YXNldC5wcm9kdWN0Y29kZSA9IHBhcnROdW1iZXI7XG4gICAgICBhZGRJdGVtLmlubmVySFRNTCA9IGFsZXJ0Q2FydEl0ZW1UZW1wbGF0ZTtcblxuICAgICAgYWRkSXRlbS5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtcGFydC1udW1iZXInKS5pbm5lclRleHQgPSBwYXJ0TnVtYmVyO1xuICAgICAgYWRkSXRlbS5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtcGFydC10eXBlJykuaW5uZXJUZXh0ID0gcGFydFR5cGU7XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1saXN0JykuYXBwZW5kQ2hpbGQoYWRkSXRlbSk7XG4gICAgICBcblxuICAgICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLWFjdGl2ZScpO1xuXG4gICAgICBpZiAoYWxlcnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbGVydC0taXMtbWluaW1pemVkJykpIHtcbiAgICAgICAgYWxlcnQuY2xhc3NMaXN0LnJlbW92ZSgnYWxlcnQtLWlzLW1pbmltaXplZCcpXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFRPR0dMRSBDQVJUIEFMRVJUXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZUFsZXJ0JykpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2xvc2VBbGVydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHNlbGYgPSBlLnRhcmdldDtcbiAgICAgIHZhciBjb250YWluZXIgPSBzZWxmLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgIHZhciBjbGFzc2VzID0gY29udGFpbmVyLmNsYXNzTGlzdC50b1N0cmluZygpO1xuXG4gICAgICBpZiAoY2xhc3Nlcy5pbmNsdWRlcygnYWxlcnQtLWlzLW1pbmltaXplZCcpICYmIGNsYXNzZXMuaW5jbHVkZXMoJ2FsZXJ0LS1pcy1hY3RpdmUnKSkge1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWxlcnQtLWlzLW1pbmltaXplZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1hY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICBSRU1PVkUgSVRFTSBGUk9NIENBUlRcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgc2VsZiA9IGUudGFyZ2V0O1xuICAgIGlmIChzZWxmLmNsYXNzTGlzdC5jb250YWlucygnYWxlcnQtLXJlbW92ZS1pdGVtJykpIHtcbiAgICAgIHZhciBwcm9kdWN0Q29kZSA9IHNlbGYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucHJvZHVjdGNvZGU7XG4gICAgICB2YXIgaW5kZXggPSBhZGRlZFByb2R1Y3RzLmluZGV4T2YocHJvZHVjdENvZGUpO1xuICAgICAgYWRkZWRQcm9kdWN0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgc2VsZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7IFxuICAgIH1cbiAgfSk7XG5cblxuXG4gIGZ1bmN0aW9uIGJ1aWxkQ2FydFN0cmluZygpIHtcbiAgICB2YXIgaW5pdFVSTCA9ICdodHRwczovL3d3dy5ncmVlbmZhcm1wYXJ0cy5jb20vc2hvcHBpbmdjYXJ0LmFzcD8nO1xuICAgIHZhciBhbGxBZGRlZFByb2R1Y3RzID0gW107XG4gICAgdmFyIGFsbEFkZGVkSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxlcnQtLWNhcnQtaXRlbScpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGxBZGRlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcHJvZHVjdENvZGUgPSBhbGxBZGRlZEl0ZW1zW2ldLmRhdGFzZXQucHJvZHVjdGNvZGU7XG4gICAgICB2YXIgcHJvZHVjdFF0eSA9IGFsbEFkZGVkSXRlbXNbaV0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInByb2R1Y3RfcXVhbnRpdHlcIl0nKS52YWx1ZTtcbiAgICAgIGFsbEFkZGVkUHJvZHVjdHMucHVzaCh7XG4gICAgICAgIHByb2R1Y3RDb2RlOiBwcm9kdWN0Q29kZSxcbiAgICAgICAgcHJvZHVjdFF0eTogcHJvZHVjdFF0eVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGxBZGRlZFByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA8IDEpIHtcbiAgICAgICAgaW5pdFVSTCA9IGluaXRVUkwgKyAncHJvZHVjdGNvZGU9JyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdENvZGUgKyAnJlFUWS4nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0Q29kZSArICc9JyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdFF0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluaXRVUkwgPSBpbml0VVJMICsgJyZwcm9kdWN0Y29kZT0nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0Q29kZSArICcmUVRZLicgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RDb2RlICsgJz0nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0UXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbml0VVJMO1xuICB9XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIENIRUNLT1VUIC0gU2VuZCBwcm9kdWN0cyB0byBWb2x1c2lvblxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXRDaGVja291dCcpKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1Ym1pdENoZWNrb3V0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjYXJ0IHVybCB0ZW1wbGF0ZTogaHR0cHM6Ly93d3cuZ3JlZW5mYXJtcGFydHMuY29tL3Nob3BwaW5nY2FydC5hc3A/cHJvZHVjdGNvZGU9amR6ZzkwMCZRVFkuamR6ZzkwMD01XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGJ1aWxkQ2FydFN0cmluZygpO1xuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgU0FWRSBGT1IgTEFURVIgLSBTZW5kIHByb2R1Y3RzIHRvIFZvbHVzaW9uIGFuZCBjb29raWVcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzYXZlRm9yTGF0ZXInKSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzYXZlRm9yTGF0ZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdjYXJ0VVJMPScgKyBidWlsZENhcnRTdHJpbmcoKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKS5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBTVElDS1kgTUFJTlRFTkFOQ0UgS0lUIEJVWSBOT1dcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG5cbiAgdmFyIG1haW50ZW5hbmNlS2l0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW50ZW5hbmNlLWtpdC1jb250YWluZXInKTtcbiAgaWYgKG1haW50ZW5hbmNlS2l0Q29udGFpbmVyICYmIHdpbmRvdy5pbm5lcldpZHRoID4gMTA4MCkge1xuICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvZmZzZXRUb3AgPSBtYWludGVuYW5jZUtpdENvbnRhaW5lci5vZmZzZXRUb3A7XG4gICAgICB2YXIgYmFzZUZvbnRTaXplID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSwgbnVsbCkuZm9udFNpemU7XG4gICAgICBiYXNlRm9udFNpemUgPSBwYXJzZUludChiYXNlRm9udFNpemUuc3BsaXQoJ3B4JylbMF0pO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPiAob2Zmc2V0VG9wIC0gKGJhc2VGb250U2l6ZSAqIDMpKSkge1xuICAgICAgICAgIG1haW50ZW5hbmNlS2l0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21haW50ZW5hbmNlLWtpdC1jb250YWluZXItLWlzLWZpeGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZIDwgKG9mZnNldFRvcCAtIChiYXNlRm9udFNpemUgKiAzKSkpIHtcbiAgICAgICAgICBtYWludGVuYW5jZUtpdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdtYWludGVuYW5jZS1raXQtY29udGFpbmVyLS1pcy1maXhlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfVxuXG5cbn0pKCk7XG5cblxuLypcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5QT0xZRklMTCBGT1Igc3RyLmluY2x1ZGVzKClcbkBMSU5LIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9pbmNsdWRlc1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uKHNlYXJjaCwgc3RhcnQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgaWYgKHR5cGVvZiBzdGFydCAhPT0gJ251bWJlcicpIHtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHN0YXJ0ICsgc2VhcmNoLmxlbmd0aCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmluZGV4T2Yoc2VhcmNoLCBzdGFydCkgIT09IC0xO1xuICAgIH1cbiAgfTtcbn1cblxuXG4vKlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5QT0xZRklMTCBGT1Igbm9kZS5yZW1vdmUoKVxuQExJTksgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NoaWxkTm9kZS9yZW1vdmVcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbihmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3JlbW92ZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncmVtb3ZlJywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Tm9kZSAhPT0gbnVsbClcbiAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSkoW0VsZW1lbnQucHJvdG90eXBlLCBDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZSwgRG9jdW1lbnRUeXBlLnByb3RvdHlwZV0pO1xuXG5cblxuLypcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUE9MWUZJTEwgRk9SIGFycmF5LmluY2x1ZGVzXG5ATElOSyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pbmNsdWRlc1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2luY2x1ZGVzJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcblxuICAgICAgaWYgKHRoaXMgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInRoaXNcIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDEuIExldCBPIGJlID8gVG9PYmplY3QodGhpcyB2YWx1ZSkuXG4gICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTtcblxuICAgICAgLy8gMi4gTGV0IGxlbiBiZSA/IFRvTGVuZ3RoKD8gR2V0KE8sIFwibGVuZ3RoXCIpKS5cbiAgICAgIHZhciBsZW4gPSBvLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgLy8gMy4gSWYgbGVuIGlzIDAsIHJldHVybiBmYWxzZS5cbiAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyA0LiBMZXQgbiBiZSA/IFRvSW50ZWdlcihmcm9tSW5kZXgpLlxuICAgICAgLy8gICAgKElmIGZyb21JbmRleCBpcyB1bmRlZmluZWQsIHRoaXMgc3RlcCBwcm9kdWNlcyB0aGUgdmFsdWUgMC4pXG4gICAgICB2YXIgbiA9IGZyb21JbmRleCB8IDA7XG5cbiAgICAgIC8vIDUuIElmIG4g4omlIDAsIHRoZW5cbiAgICAgIC8vICBhLiBMZXQgayBiZSBuLlxuICAgICAgLy8gNi4gRWxzZSBuIDwgMCxcbiAgICAgIC8vICBhLiBMZXQgayBiZSBsZW4gKyBuLlxuICAgICAgLy8gIGIuIElmIGsgPCAwLCBsZXQgayBiZSAwLlxuICAgICAgdmFyIGsgPSBNYXRoLm1heChuID49IDAgPyBuIDogbGVuIC0gTWF0aC5hYnMobiksIDApO1xuXG4gICAgICBmdW5jdGlvbiBzYW1lVmFsdWVaZXJvKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggPT09IHkgfHwgKHR5cGVvZiB4ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeSA9PT0gJ251bWJlcicgJiYgaXNOYU4oeCkgJiYgaXNOYU4oeSkpO1xuICAgICAgfVxuXG4gICAgICAvLyA3LiBSZXBlYXQsIHdoaWxlIGsgPCBsZW5cbiAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgIC8vIGEuIExldCBlbGVtZW50SyBiZSB0aGUgcmVzdWx0IG9mID8gR2V0KE8sICEgVG9TdHJpbmcoaykpLlxuICAgICAgICAvLyBiLiBJZiBTYW1lVmFsdWVaZXJvKHNlYXJjaEVsZW1lbnQsIGVsZW1lbnRLKSBpcyB0cnVlLCByZXR1cm4gdHJ1ZS5cbiAgICAgICAgaWYgKHNhbWVWYWx1ZVplcm8ob1trXSwgc2VhcmNoRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjLiBJbmNyZWFzZSBrIGJ5IDEuIFxuICAgICAgICBrKys7XG4gICAgICB9XG5cbiAgICAgIC8vIDguIFJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59IiwiKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBjb21tZW50c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaW5nbGUtY29tbWVudHMnKTtcbiAgdmFyIGNvbW1lbnRzUmVwbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzcG9uZCcpO1xuICB2YXIgY29tbWVudEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tbWVudGZvcm0nKTtcblxuXG4gIGlmIChjb21tZW50c1JlcGx5KSB7XG4gICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYnV0dG9uLmlubmVySFRNTCA9ICdBZGQgQ29tbWVudCc7XG4gICAgYnV0dG9uLmlkID0gJ2FkZENvbW1lbnQnO1xuXG4gICAgY29tbWVudHNSZXBseS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgY29tbWVudHNSZXBseS5zdHlsZS5tYXhIZWlnaHQgPSAnMHB4JztcbiAgICBjb21tZW50c1JlcGx5LnN0eWxlLnBhZGRpbmcgPSAnMHB4JztcbiAgICBjb21tZW50c1JlcGx5LnN0eWxlLm1hcmdpblRvcCA9ICcwcHgnO1xuXG4gICAgY29tbWVudHNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRDb21tZW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgc2VsZiA9IGUudGFyZ2V0O1xuICAgICAgc2VsZi5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgY29tbWVudHNSZXBseS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgY29tbWVudHNSZXBseS5zdHlsZS5tYXhIZWlnaHQgPSAnMTAwMHB4JztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUucGFkZGluZyA9ICcxcmVtJztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUubWFyZ2luVG9wID0gJzNyZW0nO1xuICAgIH0pXG5cbiAgfVxuXG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBsb2FkUG9zdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9hZE1vcmVQb3N0cycpO1xuXG4gIGlmIChsb2FkUG9zdHMpIHtcbiAgICAgIHZhciBvZmZzZXQgPSAxO1xuICAgICAgdmFyIHBvc3RDb3VudCA9IDEwO1xuICAgICAgdmFyIHBvc3RMaXN0aW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvc3QtbGlzdGluZy0tbGlzdCcpO1xuXG4gICAgICBsb2FkUG9zdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWpzb24vd3AvdjIvcG9zdHM/b2Zmc2V0PScgKyAob2Zmc2V0ICogcG9zdENvdW50KTtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2NhdGVnb3J5JykpIHtcbiAgICAgICAgICAgIHZhciBjYXQgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhdCk7XG4gICAgICAgICAgICAvLyB1cmwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1qc29uL3dwL3YyL3Bvc3RzP29mZnNldD0nICsgKG9mZnNldCAqIHBvc3RDb3VudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbG9hZFBvc3RzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICBsb2FkUG9zdHMuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBhdG9taWModXJsKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHZhciBwb3N0T2JqID0gW107XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwb3N0T2JqLnB1c2goe1xuICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YVtpXS5kYXRlLFxuICAgICAgICAgICAgICAgICAgYXV0aG9yOiBkYXRhW2ldLmF1dGhvcixcbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhW2ldLmNhdGVnb3JpZXNbMF0sXG4gICAgICAgICAgICAgICAgICB0aXRsZTogZGF0YVtpXS50aXRsZS5yZW5kZXJlZCxcbiAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGFbaV0udGFncyxcbiAgICAgICAgICAgICAgICAgIGxpbms6IGRhdGFbaV0ubGluayxcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhW2ldLmV4Y2VycHQucmVuZGVyZWQuc2xpY2UoMywgLTUpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgbG9hZFBvc3RzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIGxvYWRQb3N0cy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgICAgICAgICBsb2FkUG9zdHMudGV4dENvbnRlbnQgPSAnQWxsIFBvc3RzIExvYWRlZCc7XG4gICAgICAgICAgICAgICAgbG9hZFBvc3RzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBsb2FkUG9zdHMuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBwb3N0T2JqO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocG9zdE9iaikge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3RPYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyBhc3NpZ24gYWxsIGRhdGFcbiAgICAgICAgICAgICAgICB2YXIgcG9zdFRpbWUgPSBwb3N0T2JqW2ldLmRhdGU7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RQcmV0dHlUaW1lID0gbmV3IERhdGUocG9zdFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICBwb3N0UHJldHR5VGltZSA9IHBvc3RQcmV0dHlUaW1lLnRvRGF0ZVN0cmluZygpLnNsaWNlKDMpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0VGl0bGUgPSBwb3N0T2JqW2ldLnRpdGxlO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0Q2F0ZWdvcnkgPSAnVW5jYXRlZ29yaXplZCc7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RMaW5rID0gcG9zdE9ialtpXS5saW5rO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0RGVzY3JpcHRpb24gPSBwb3N0T2JqW2ldLmRlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoKHBvc3RPYmpbaV0uY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgIHBvc3RDYXRlZ29yeSA9ICdNYWludGVuYW5jZSBSZW1pbmRlcic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSA2MzpcbiAgICAgICAgICAgICAgICAgICAgcG9zdENhdGVnb3J5ID0gJ1NlcnZpY2UgSW50ZXJ2YWxzJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDY1OlxuICAgICAgICAgICAgICAgICAgICBwb3N0Q2F0ZWdvcnkgPSAnVHJvdWJsZXNob290aW5nJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIHBvc3RDYXRlZ29yeSA9ICdUYWxrIFdpdGggQSBUZWNoJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgY2FyZFxuICAgICAgICAgICAgICAgIHZhciBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkJyk7XG4gICAgICAgICAgICAgICAgY2FyZC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cImNhcmQtY29udGVudFwiPicgKyBwb3N0VGl0bGUgKyAnPC9kaXY+JztcbiAgICAgICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKS5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJjYXJkLWNhdGVnb3J5XCI+PGEgaHJlZj1cIi8/Y2F0PScgKyBwb3N0T2JqW2ldLmNhdGVnb3J5ICsgJ1wiPicgKyBwb3N0Q2F0ZWdvcnkgKyAnPC9hPjwvcD48aDQgY2xhc3M9XCJjYXJkLXRpdGxlXCI+PGEgaHJlZj1cIicgKyBwb3N0TGluayArICdcIj4nICsgcG9zdFRpdGxlICsgJzwvYT48L2g0PjxwIGNsYXNzPVwiY2FyZC1kZXNjcmlwdGlvblwiPicgKyBwb3N0RGVzY3JpcHRpb24gKyAnPC9wPjx1bCBjbGFzcz1cInNpbmdsZS10YWdzLS1saXN0XCI+PC91bD4nO1xuXG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjYXJkIHRvIHJlc3VsdHNcbiAgICAgICAgICAgICAgICBwb3N0TGlzdGluZy5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBvZmZzZXQrKztcbiAgICAgIH0pO1xuICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgYWNjb3JkaWFuQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2NvcmRpYW4tLXRpdGxlJyk7XG4gIGlmIChhY2NvcmRpYW5CdXR0b25zKSB7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjY29yZGlhbkJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFjY29yZGlhbkJ1dHRvbnNbaV0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpYW4tLWlzLWNvbGxhcHNlZCcpO1xuICAgICAgYWNjb3JkaWFuQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5pbmdFbGVtZW50ID0gZS50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgaWYgKGNvbnRhaW5pbmdFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYWNjb3JkaWFuLS1pcy1jb2xsYXBzZWQnKSkge1xuICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkaWFuLS1pcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlhbi0taXMtY29sbGFwc2VkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgdmFyIGFsbFRvb2xUaXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvb2x0aXAtLXRvZ2dsZScpO1xuICBpZiAoYWxsVG9vbFRpcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbFRvb2xUaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhbGxUb29sVGlwc1tpXS5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgndG9vbHRpcC0taXMtaGlkZGVuJyk7XG5cbiAgICAgIGFsbFRvb2xUaXBzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnRvZ2dsZSgndG9vbHRpcC0taXMtaGlkZGVuJykpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcblxuICB2YXIgY2xvc2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC0tY2xvc2UnKTtcbiAgdmFyIGxhdW5jaE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtbW9kYWwtbGF1bmNoXScpO1xuXG4gIGlmIChjbG9zZU1vZGFsKSB7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhdW5jaE1vZGFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsYXVuY2hNb2RhbFtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIG1vZGFsSUQgPSBlLnRhcmdldC5kYXRhc2V0Lm1vZGFsTGF1bmNoO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxbZGF0YS1tb2RhbD0nICsgbW9kYWxJRCArICddJykuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLWlzLWhpZGRlbicpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1pcy1vcGVuJyk7XG5cbiAgICAgICAgLy8gUG9wdWxhdGUgTW9kZWwgRmllbGQgd2l0aCBDdXJyZW50IE1vZGVsIFBhZ2VcbiAgICAgICAgaWYgKG1vZGFsSUQgPSAnc2lnbi11cC1mb3JtJykge1xuICAgICAgICAgIHZhciBwYWdlVGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ21ldGFbcHJvcGVydHk9XCJhcnRpY2xlOnRhZ1wiXScpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZVRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICgocGFnZVRhZ3NbaV0uY29udGVudC5pbmNsdWRlcygnSm9obiBEZWVyZScpKSAmJiAocGFnZVRhZ3NbaV0uY29udGVudCAhPT0gJ0pvaG4gRGVlcmUgTGF3biBUcmFjdG9yJykpIHtcbiAgICAgICAgICAgICAgdmFyIG1vZGVsID0gcGFnZVRhZ3NbaV0uY29udGVudC5zcGxpdCgnSm9obiBEZWVyZSAnKVsxXTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21jZS1NT0RFTCcpLnZhbHVlID0gbW9kZWwudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9zZU1vZGFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjbG9zZU1vZGFsW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLWlzLWhpZGRlbicpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1pcy1vcGVuJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLmtleUNvZGUgIT0gMjcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGxhdW5jaE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2W2RhdGEtbW9kYWxdJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1pcy1vcGVuJyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhdW5jaE1vZGFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxhdW5jaE1vZGFsW2ldLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1pcy1oaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9XG5cbn0pKCk7IiwiaWYgKHdpbmRvdy5qUXVlcnkgJiYgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3NpbmdsZS1wb3N0JykpIHtcblxuICAoZnVuY3Rpb24oKSB7XG5cblxuICAgICQoJyNtYy1lbWJlZGRlZC1zdWJzY3JpYmUtZm9ybScpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gIFxuICAgICAgdmFyIGVtYWlsID0gJHRoaXMuZmluZCgnI21jZS1FTUFJTCcpLnZhbCgpO1xuICAgICAgdmFyIGZpcnN0TmFtZSA9ICR0aGlzLmZpbmQoJyNtY2UtRk5BTUUnKS52YWwoKTtcbiAgICAgIHZhciBsYXN0TmFtZSA9ICR0aGlzLmZpbmQoJyNtY2UtTE5BTUUnKS52YWwoKTtcbiAgICAgIHZhciBtb2RlbE51bWJlciA9ICR0aGlzLmZpbmQoJyNtY2UtTU9ERUwnKS52YWwoKTtcbiAgICAgIHZhciBjdXJyZW50SG91cnMgPSAkdGhpcy5maW5kKCcjbWNlLUNVUlJFTlRfSFInKS52YWwoKTtcbiAgICAgIHZhciBtb3dpbmdUaW1lID0gJHRoaXMuZmluZCgnI21jZS1NT1dJTkdfVElNJykudmFsKCk7XG4gICAgICBtb3dpbmdUaW1lID0gbW93aW5nVGltZS5zcGxpdCgnKCcpWzFdLnNwbGl0KCcpJylbMF0udG9Mb3dlckNhc2UoKTtcbiAgXG4gICAgICAkLmFqYXgoe1xuICAgICAgICB0eXBlOiAkdGhpcy5hdHRyKCdtZXRob2QnKSxcbiAgICAgICAgdXJsOiAkdGhpcy5hdHRyKCdhY3Rpb24nKSxcbiAgICAgICAgZGF0YTogJHRoaXMuc2VyaWFsaXplKCksXG4gICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gIFxuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEucmVzdWx0ICE9ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgJCgnI21jX2VtYmVkX3NpZ251cF9zY3JvbGwnKS5wcmVwZW5kKCc8cCBzdHlsZT1cImJvcmRlcjogMXB4IHNvbGlkIHJlZDsgcGFkZGluZzogMXJlbTtcIj4nICsgZGF0YS5tc2cgKyAnPC9wPicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAkKCdkaXZbZGF0YS1tb2RhbD1cInNpZ24tdXAtZm9ybVwiXSAubW9kYWwtaGVhZGluZycpLnRleHQoJ0dyZWF0ICcgKyBmaXJzdE5hbWUgKyAnIScpLm5leHQoKS50ZXh0KCdZb3Ugd2lsbCByZWNlaXZlIGEgY29uZmlybWF0aW9uIGVtYWlsIHNvb24gYW5kIHdlIHdpbGwga2VlcCB5b3UgdXAgdG8gZGF0ZSBvbiB5b3VyIG5lZWRlZCBwYXJ0cy4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLmZsb2NrLmNvbS9ob29rcy9zZW5kTWVzc2FnZS84NTU4MzJjZC1iZDc5LTQzNmQtOWYxZi1kY2YwMDIwMjUxZGQnLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBcInRleHRcIjogZmlyc3ROYW1lICsgXCIgXCIgKyBsYXN0TmFtZSArIFwiIGhhcyBhIFwiICsgbW9kZWxOdW1iZXIgKyBcIiB3aXRoIFwiICsgY3VycmVudEhvdXJzICsgXCIgaG91cnMgYW5kIHRha2VzIFwiICsgbW93aW5nVGltZSArIFwiIHRvIG1vdy4gQ29udGFjdCBcIiArIGZpcnN0TmFtZSArIFwiIGF0IFwiICsgZW1haWxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICBcbiAgICB9KTtcbiAgXG4gIH0pKCk7XG5cbn0iLCIoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGJhc2VGb250U2l6ZSA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSkuZ2V0UHJvcGVydHlWYWx1ZSgnZm9udC1zaXplJykpO1xuXG4gIHZhciBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RpY2t5TmF2Jyk7XG5cbiAgaWYgKG5hdikge1xuXG4gICAgdmFyIHNjcm9sbFkgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICB2YXIgbmF2T2Zmc2V0ID0gbmF2Lm9mZnNldFRvcDtcbiAgICB2YXIgbmF2V2lkdGggPSBuYXYuY2xpZW50V2lkdGg7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICBuYXZPZmZzZXQgPSBuYXYub2Zmc2V0VG9wO1xuICAgICAgY29uc29sZS5sb2cobmF2T2Zmc2V0KTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgc2Nyb2xsWSA9IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgdmFyIG1ha2VTdGlja3kgPSBzY3JvbGxZID4gKG5hdk9mZnNldCAtIChiYXNlRm9udFNpemUgKiAzKSk7XG5cbiAgICAgIGlmIChtYWtlU3RpY2t5KSB7XG4gICAgICAgIG5hdi5jbGFzc0xpc3QuYWRkKCduYXYtLWlzLXN0aWNreScpO1xuICAgICAgICBuYXYuc3R5bGUubWF4V2lkdGggPSBuYXZXaWR0aCArICdweCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LS1pcy1zdGlja3knKTtcbiAgICAgIH1cblxuXG4gICAgfSk7XG5cbiAgfVxuXG59KSgpOyAiXX0=
