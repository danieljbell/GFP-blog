!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):window.atomic=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(n){"use strict";var o,r={method:"GET",username:null,password:null,data:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1},i=function(){for(var n={},e=0;e<arguments.length;e++){!function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?n[t]=i(n[t],e[t]):n[t]=e[t])}(arguments[e])}return n},a=function(r){var i=new XMLHttpRequest,e=new Promise(function(e,t){for(var n in i.onreadystatechange=function(){4===i.readyState&&(200<=i.status&&i.status<300?e(function(t){var n;if("text"!==o.responseType&&""!==o.responseType)return{data:t.response,xhr:t};try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return{data:n,xhr:t}}(i)):t({status:i.status,statusText:i.statusText}))},i.open(o.method,r,!0,o.username,o.password),i.responseType=o.responseType,o.headers)o.headers.hasOwnProperty(n)&&i.setRequestHeader(n,o.headers[n]);o.timeout&&(i.timeout=o.timeout,i.ontimeout=function(e){t({status:408,statusText:"Request timeout"})}),o.withCredentials&&(i.withCredentials=!0),i.send(function(e){if("string"==typeof e||"[object FormData]"===Object.prototype.toString.call(e))return e;if(/application\/json/i.test(o.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(e))return JSON.stringify(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(o.data))});return e.cancel=function(){i.abort()},e};return function(e,t){if(!("XMLHttpRequest"in n&&"JSON"in n&&"Promise"in n))throw"Atomic: This browser does not support the methods used in this plugin.";return o=i(r,t||{}),a(e)}}),window.innerWidth,document.querySelector("button#hamburger").addEventListener("click",function(e){toggleMenu();var t=document.querySelector(".site-header").offsetHeight;document.querySelector(".navigation--level-zero").style.top=t+"px"});for(var headerTopButtons=document.querySelectorAll(".navigation--button"),navLevelOne=document.querySelectorAll(".navigation--level-one"),i=0;i<navLevelOne.length;i++)navLevelOne[i].querySelector("li:first-child a").classList.add("active");for(i=0;i<headerTopButtons.length;i++)headerTopButtons[i].addEventListener("click",function(e){e.preventDefault();var t=e.target,n=t.nextElementSibling.querySelector(".navigation--level-one");n.classList.contains("active")?(n.classList.remove("active"),t.nextElementSibling.classList.remove("active")):(t.parentElement.classList.add("active"),t.nextElementSibling.classList.add("active"),t.nextElementSibling.querySelector(".navigation--level-one").classList.add("active"))});var allLevelOneLinks=document.querySelectorAll(".navigation--level-one > li > a");for(i=0;i<allLevelOneLinks.length;i++)allLevelOneLinks[i].addEventListener("click",function(e){e.preventDefault();for(var t=document.querySelectorAll(".navigation--level-one > li > a"),n=0;n<t.length;n++)t[n].classList.remove("active");e.target.classList.add("active")});function toggleMenu(){document.body.classList.toggle("menu-open"),document.querySelector("#hamburger").classList.toggle("is-active")}!function(){var o=document.querySelector(".alert--cart-item").innerHTML,a=[];document.querySelector(".alert--cart-list").innerHTML="";var e=document.querySelector("#modelModifiers");document.querySelector("#main_content");e.addEventListener("change",function(e){var t=e.target.value;window.location.href="/"+t});for(var t=document.querySelectorAll("table tr"),n=0;n<t.length;n++)t[n].addEventListener("mouseenter",function(e){if(!(window.innerWidth<1080||"false"===e.target.querySelector("td:first-child").dataset.productSold)){var t=e.target.querySelector("td:first-child .product-image-container");if(t)t.classList.remove("product-image--is-hidden");else{var n=e.target.querySelector("td:first-child").dataset.productImage,r=document.createElement("img");r.classList.add("product-image"),r.src=void 0===n?"https://cdn3.volusion.com/yxhfe.dfqew/v/vspfiles/templates/gfp-test/images/nophoto.gif":n;var i=document.createElement("div");i.classList.add("product-image-container"),i.appendChild(r);e.target.querySelector("td:first-child").appendChild(i)}}}),t[n].addEventListener("mouseleave",function(e){e.target.querySelector("td:first-child .product-image-container").classList.add("product-image--is-hidden")});function r(){for(var e="https://www.greenfarmparts.com/shoppingcart.asp?",t=[],n=document.querySelectorAll(".alert--cart-item"),r=0;r<n.length;r++){var i=n[r].dataset.productcode,o=n[r].querySelector('input[name="product_quantity"]').value;t.push({productCode:i,productQty:o})}for(r=0;r<t.length;r++)e=r<1?e+"productcode="+t[r].productCode+"&QTY."+t[r].productCode+"="+t[r].productQty:e+"&productcode="+t[r].productCode+"&QTY."+t[r].productCode+"="+t[r].productQty;return e}document.addEventListener("click",function(e){if(e.target.classList.contains("add-to-cart")){var t=document.querySelector(".alert--add-to-cart"),n=e.target.parentElement.parentElement.querySelector("td:first-child").innerText,r=e.target.parentElement.parentElement.querySelector("td:nth-child(2)").innerText;if(a.includes(r))return;a.push(r);var i=document.createElement("li");i.classList.add("alert--cart-item"),i.dataset.productcode=r,i.innerHTML=o,i.querySelector(".alert--cart-part-number").innerText=r,i.querySelector(".alert--cart-part-type").innerText=n,document.querySelector(".alert--cart-list").appendChild(i),t.classList.add("alert--is-active"),t.classList.contains("alert--is-minimized")&&t.classList.remove("alert--is-minimized")}}),document.querySelector("#closeAlert").addEventListener("click",function(e){var t=e.target.parentElement.parentElement,n=t.classList.toString();n.includes("alert--is-minimized")&&n.includes("alert--is-active")?t.classList.remove("alert--is-minimized"):(t.classList.add("alert--is-minimized"),t.classList.add("alert--is-active"))}),document.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("alert--remove-item")){var n=t.parentElement.parentElement.dataset.productcode,r=a.indexOf(n);a.splice(r,1),t.parentElement.parentElement.remove()}}),document.querySelector("#submitCheckout").addEventListener("click",function(e){e.preventDefault(),window.location.href=r()}),document.querySelector("#saveForLater").addEventListener("click",function(e){e.preventDefault(),document.cookie="cartURL="+r(),document.querySelector(".alert--add-to-cart").classList.add("alert--is-minimized")})}(),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var i,o,a=0|t,c=Math.max(0<=a?a:r-Math.abs(a),0);for(;c<r;){if((i=n[c])===(o=e)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;c++}return!1}}),function(){var e=document.querySelector(".single-comments"),t=document.querySelector("#respond");document.querySelector("#commentform");if(t){var n=document.createElement("button");n.innerHTML="Add Comment",n.id="addComment",t.style.visibility="hidden",t.style.maxHeight="0px",t.style.padding="0px",t.style.marginTop="0px",e.appendChild(n),document.querySelector("#addComment").addEventListener("click",function(e){e.preventDefault(),e.target.style.opacity="0",t.style.visibility="visible",t.style.maxHeight="1000px",t.style.padding="1rem",t.style.marginTop="3rem"})}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0b21pYy5taW4uanMiLCJzaXRlLWhlYWRlci5qcyIsInNpbmdsZS1wb3N0LmpzIiwic2luZ2xlLWNvbW1lbnRzLmpzIl0sIm5hbWVzIjpbInQiLCJlIiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIndpbmRvdyIsImF0b21pYyIsImdsb2JhbCIsInRoaXMiLCJuIiwibWV0aG9kIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRhdGEiLCJoZWFkZXJzIiwiQ29udGVudC10eXBlIiwicmVzcG9uc2VUeXBlIiwidGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsInIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImEiLCJYTUxIdHRwUmVxdWVzdCIsIm8iLCJQcm9taXNlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwieGhyIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicyIsInN0YXR1c1RleHQiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9udGltZW91dCIsInNlbmQiLCJ0ZXN0Iiwic3RyaW5naWZ5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJpIiwiY2FuY2VsIiwiYWJvcnQiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZU1lbnUiLCJoZWFkZXJIZWlnbnQiLCJvZmZzZXRIZWlnaHQiLCJzdHlsZSIsInRvcCIsImhlYWRlclRvcEJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TGV2ZWxPbmUiLCJjbGFzc0xpc3QiLCJhZGQiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGYiLCJ0YXJnZXQiLCJjaGlsZE1lbnUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjb250YWlucyIsInJlbW92ZSIsInBhcmVudEVsZW1lbnQiLCJhbGxMZXZlbE9uZUxpbmtzIiwibGlua3MiLCJqIiwiYm9keSIsInRvZ2dsZSIsImFsZXJ0Q2FydEl0ZW1UZW1wbGF0ZSIsImlubmVySFRNTCIsImFkZGVkUHJvZHVjdHMiLCJtb2RlbE1vZGlmZXJTZWxlY3QiLCJsb2MiLCJ2YWx1ZSIsImxvY2F0aW9uIiwiaHJlZiIsImFsbFJvd3MiLCJkYXRhc2V0IiwicHJvZHVjdFNvbGQiLCJpbWdFeGlzdHMiLCJpbWdQYXRoIiwicHJvZHVjdEltYWdlIiwicHJvZEltZyIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJwcm9kSW1nQ29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJidWlsZENhcnRTdHJpbmciLCJpbml0VVJMIiwiYWxsQWRkZWRQcm9kdWN0cyIsImFsbEFkZGVkSXRlbXMiLCJwcm9kdWN0Q29kZSIsInByb2R1Y3Rjb2RlIiwicHJvZHVjdFF0eSIsImFsZXJ0IiwicGFydFR5cGUiLCJpbm5lclRleHQiLCJwYXJ0TnVtYmVyIiwiaW5jbHVkZXMiLCJhZGRJdGVtIiwiY29udGFpbmVyIiwiY2xhc3NlcyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNvb2tpZSIsIlN0cmluZyIsInNlYXJjaCIsInN0YXJ0IiwiRWxlbWVudCIsIkNoYXJhY3RlckRhdGEiLCJEb2N1bWVudFR5cGUiLCJmb3JFYWNoIiwiaXRlbSIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiQXJyYXkiLCJzZWFyY2hFbGVtZW50IiwiZnJvbUluZGV4IiwiVHlwZUVycm9yIiwibGVuIiwieCIsInkiLCJrIiwiTWF0aCIsIm1heCIsImFicyIsImlzTmFOIiwiY29tbWVudHNDb250YWluZXIiLCJjb21tZW50c1JlcGx5IiwiYnV0dG9uIiwiaWQiLCJ2aXNpYmlsaXR5IiwibWF4SGVpZ2h0IiwicGFkZGluZyIsIm1hcmdpblRvcCIsIm9wYWNpdHkiXSwibWFwcGluZ3MiOiJDQUNBLFNBQUFBLEVBQUFDLEdBQUEsbUJBQUFDLFFBQUFBLE9BQUFDLElBQUFELE9BQUEsR0FBQSxXQUFBLE9BQUFELEVBQUFELEtBQUEsaUJBQUFJLFFBQUFDLE9BQUFELFFBQUFILEVBQUFELEdBQUFNLE9BQUFDLE9BQUFOLEVBQUFELEdBQUEsQ0FBQSxvQkFBQVEsT0FBQUEsT0FBQSxvQkFBQUYsT0FBQUEsT0FBQUcsS0FBQSxTQUFBVCxHQUFBLGFBQUEsSUFBQUMsRUFBQVMsRUFBQSxDQUFBQyxPQUFBLE1BQUFDLFNBQUEsS0FBQUMsU0FBQSxLQUFBQyxLQUFBLEdBQUFDLFFBQUEsQ0FBQUMsZUFBQSxxQ0FBQUMsYUFBQSxPQUFBQyxRQUFBLEtBQUFDLGlCQUFBLEdBQUFDLEVBQUEsV0FBQSxJQUFBLElBQUFwQixFQUFBLEdBQUFDLEVBQUEsRUFBQUEsRUFBQW9CLFVBQUFDLE9BQUFyQixJQUFBLEVBQUEsU0FBQUEsR0FBQSxJQUFBLElBQUFTLEtBQUFULEVBQUFBLEVBQUFzQixlQUFBYixLQUFBLG9CQUFBYyxPQUFBQyxVQUFBQyxTQUFBQyxLQUFBMUIsRUFBQVMsSUFBQVYsRUFBQVUsR0FBQVUsRUFBQXBCLEVBQUFVLEdBQUFULEVBQUFTLElBQUFWLEVBQUFVLEdBQUFULEVBQUFTLElBQUEsQ0FBQVcsVUFBQXBCLElBQUEsT0FBQUQsR0FBQTRCLEVBQUEsU0FBQTVCLEdBQUEsSUFBQVUsRUFBQSxJQUFBbUIsZUFBQUMsRUFBQSxJQUFBQyxRQUFBLFNBQUFELEVBQUFWLEdBQUEsSUFBQSxJQUFBUSxLQUFBbEIsRUFBQXNCLG1CQUFBLFdBQUEsSUFBQXRCLEVBQUF1QixhQUFBLEtBQUF2QixFQUFBd0IsUUFBQXhCLEVBQUF3QixPQUFBLElBQUFKLEVBQUEsU0FBQTlCLEdBQUEsSUFBQVUsRUFBQSxHQUFBLFNBQUFULEVBQUFnQixjQUFBLEtBQUFoQixFQUFBZ0IsYUFBQSxNQUFBLENBQUFILEtBQUFkLEVBQUFtQyxTQUFBQyxJQUFBcEMsR0FBQSxJQUFBVSxFQUFBMkIsS0FBQUMsTUFBQXRDLEVBQUF1QyxjQUFBLE1BQUF0QyxHQUFBUyxFQUFBVixFQUFBdUMsYUFBQSxNQUFBLENBQUF6QixLQUFBSixFQUFBMEIsSUFBQXBDLEdBQUF3QyxDQUFBOUIsSUFBQVUsRUFBQSxDQUFBYyxPQUFBeEIsRUFBQXdCLE9BQUFPLFdBQUEvQixFQUFBK0IsZUFBQS9CLEVBQUFnQyxLQUFBekMsRUFBQVUsT0FBQVgsR0FBQSxFQUFBQyxFQUFBVyxTQUFBWCxFQUFBWSxVQUFBSCxFQUFBTyxhQUFBaEIsRUFBQWdCLGFBQUFoQixFQUFBYyxRQUFBZCxFQUFBYyxRQUFBUSxlQUFBSyxJQUFBbEIsRUFBQWlDLGlCQUFBZixFQUFBM0IsRUFBQWMsUUFBQWEsSUFBQTNCLEVBQUFpQixVQUFBUixFQUFBUSxRQUFBakIsRUFBQWlCLFFBQUFSLEVBQUFrQyxVQUFBLFNBQUE1QyxHQUFBb0IsRUFBQSxDQUFBYyxPQUFBLElBQUFPLFdBQUEsc0JBQUF4QyxFQUFBa0Isa0JBQUFULEVBQUFTLGlCQUFBLEdBQUFULEVBQUFtQyxLQUFBLFNBQUE3QyxHQUFBLEdBQUEsaUJBQUFBLEdBQUEsc0JBQUF3QixPQUFBQyxVQUFBQyxTQUFBQyxLQUFBM0IsR0FBQSxPQUFBQSxFQUFBLEdBQUEscUJBQUE4QyxLQUFBN0MsRUFBQWMsUUFBQSxrQkFBQSxtQkFBQVMsT0FBQUMsVUFBQUMsU0FBQUMsS0FBQTNCLEdBQUEsT0FBQXFDLEtBQUFVLFVBQUEvQyxHQUFBLElBQUFVLEVBQUEsR0FBQSxJQUFBLElBQUFvQixLQUFBOUIsRUFBQUEsRUFBQXVCLGVBQUFPLElBQUFwQixFQUFBc0MsS0FBQUMsbUJBQUFuQixHQUFBLElBQUFtQixtQkFBQWpELEVBQUE4QixLQUFBLE9BQUFwQixFQUFBd0MsS0FBQSxLQUFBQyxDQUFBbEQsRUFBQWEsU0FBQSxPQUFBZ0IsRUFBQXNCLE9BQUEsV0FBQTFDLEVBQUEyQyxTQUFBdkIsR0FBQSxPQUFBLFNBQUE5QixFQUFBd0MsR0FBQSxLQUFBLG1CQUFBeEMsR0FBQSxTQUFBQSxHQUFBLFlBQUFBLEdBQUEsS0FBQSx5RUFBQSxPQUFBQyxFQUFBbUIsRUFBQVYsRUFBQThCLEdBQUEsSUFBQVosRUFBQTVCLE1DREFNLE9BQUFnRCxXQU1BQyxTQUFBQyxjQUFBLG9CQUFBQyxpQkFBQSxRQUFBLFNBQUF4RCxHQUNBeUQsYUFDQSxJQUFBQyxFQUFBSixTQUFBQyxjQUFBLGdCQUFBSSxhQUNBTCxTQUFBQyxjQUFBLDJCQUFBSyxNQUFBQyxJQUFBSCxFQUFBLE9BTUEsSUFIQSxJQUFBSSxpQkFBQVIsU0FBQVMsaUJBQUEsdUJBQ0FDLFlBQUFWLFNBQUFTLGlCQUFBLDBCQUVBYixFQUFBLEVBQUFBLEVBQUFjLFlBQUEzQyxPQUFBNkIsSUFDQWMsWUFBQWQsR0FBQUssY0FBQSxvQkFBQVUsVUFBQUMsSUFBQSxVQUdBLElBQUFoQixFQUFBLEVBQUFBLEVBQUFZLGlCQUFBekMsT0FBQTZCLElBQ0FZLGlCQUFBWixHQUFBTSxpQkFBQSxRQUFBLFNBQUF4RCxHQUNBQSxFQUFBbUUsaUJBQ0EsSUFBQUMsRUFBQXBFLEVBQUFxRSxPQUNBQyxFQUFBRixFQUFBRyxtQkFBQWhCLGNBQUEsMEJBQ0FlLEVBQUFMLFVBQUFPLFNBQUEsV0FDQUYsRUFBQUwsVUFBQVEsT0FBQSxVQUNBTCxFQUFBRyxtQkFBQU4sVUFBQVEsT0FBQSxZQUVBTCxFQUFBTSxjQUFBVCxVQUFBQyxJQUFBLFVBQ0FFLEVBQUFHLG1CQUFBTixVQUFBQyxJQUFBLFVBQ0FFLEVBQUFHLG1CQUFBaEIsY0FBQSwwQkFBQVUsVUFBQUMsSUFBQSxhQU9BLElBQUFTLGlCQUFBckIsU0FBQVMsaUJBQUEsbUNBRUEsSUFBQWIsRUFBQSxFQUFBQSxFQUFBeUIsaUJBQUF0RCxPQUFBNkIsSUFDQXlCLGlCQUFBekIsR0FBQU0saUJBQUEsUUFBQSxTQUFBeEQsR0FDQUEsRUFBQW1FLGlCQUVBLElBREEsSUFBQVMsRUFBQXRCLFNBQUFTLGlCQUFBLG1DQUNBYyxFQUFBLEVBQUFBLEVBQUFELEVBQUF2RCxPQUFBd0QsSUFDQUQsRUFBQUMsR0FBQVosVUFBQVEsT0FBQSxVQUlBekUsRUFBQXFFLE9BQUFKLFVBQUFDLElBQUEsWUFLQSxTQUFBVCxhQUNBSCxTQUFBd0IsS0FBQWIsVUFBQWMsT0FBQSxhQUNBekIsU0FBQUMsY0FBQSxjQUNBVSxVQUFBYyxPQUFBLGNDeERBLFdBRUEsSUFBQUMsRUFBQTFCLFNBQUFDLGNBQUEscUJBQUEwQixVQUNBQyxFQUFBLEdBRUE1QixTQUFBQyxjQUFBLHFCQUFBMEIsVUFBQSxHQW1CQSxJQUFBRSxFQUFBN0IsU0FBQUMsY0FBQSxtQkFDQUQsU0FBQUMsY0FBQSxpQkFDQTRCLEVBQUEzQixpQkFBQSxTQUFBLFNBQUF4RCxHQUtBLElBQUFvRixFQUFBcEYsRUFBQXFFLE9BQUFnQixNQUNBaEYsT0FBQWlGLFNBQUFDLEtBQUEsSUFBQUgsSUFZQSxJQUZBLElBQUFJLEVBQUFsQyxTQUFBUyxpQkFBQSxZQUVBYixFQUFBLEVBQUFBLEVBQUFzQyxFQUFBbkUsT0FBQTZCLElBQ0FzQyxFQUFBdEMsR0FBQU0saUJBQUEsYUFBQSxTQUFBeEQsR0FDQSxLQUFBSyxPQUFBZ0QsV0FBQSxNQUFBLFVBQUFyRCxFQUFBcUUsT0FBQWQsY0FBQSxrQkFBQWtDLFFBQUFDLGFBQUEsQ0FLQSxJQUFBQyxFQUFBM0YsRUFBQXFFLE9BQUFkLGNBQUEsMkNBQ0EsR0FBQW9DLEVBQ0FBLEVBQUExQixVQUFBUSxPQUFBLGdDQURBLENBS0EsSUFBQW1CLEVBQUE1RixFQUFBcUUsT0FBQWQsY0FBQSxrQkFBQWtDLFFBQUFJLGFBQ0FDLEVBQUF4QyxTQUFBeUMsY0FBQSxPQUNBRCxFQUFBN0IsVUFBQUMsSUFBQSxpQkFHQTRCLEVBQUFFLFNBREEsSUFBQUosRUFDQSx5RkFFQUEsRUFHQSxJQUFBSyxFQUFBM0MsU0FBQXlDLGNBQUEsT0FDQUUsRUFBQWhDLFVBQUFDLElBQUEsMkJBQ0ErQixFQUFBQyxZQUFBSixHQUVBOUYsRUFBQXFFLE9BQUFkLGNBQUEsa0JBQUEyQyxZQUFBRCxPQUlBVCxFQUFBdEMsR0FBQU0saUJBQUEsYUFBQSxTQUFBeEQsR0FDQUEsRUFBQXFFLE9BQUFkLGNBQUEsMkNBQUFVLFVBQUFDLElBQUEsOEJBaUZBLFNBQUFpQyxJQUtBLElBSkEsSUFBQUMsRUFBQSxtREFDQUMsRUFBQSxHQUNBQyxFQUFBaEQsU0FBQVMsaUJBQUEscUJBRUFiLEVBQUEsRUFBQUEsRUFBQW9ELEVBQUFqRixPQUFBNkIsSUFBQSxDQUNBLElBQUFxRCxFQUFBRCxFQUFBcEQsR0FBQXVDLFFBQUFlLFlBQ0FDLEVBQUFILEVBQUFwRCxHQUFBSyxjQUFBLGtDQUFBOEIsTUFDQWdCLEVBQUF0RCxLQUFBLENBQ0F3RCxZQUFBQSxFQUNBRSxXQUFBQSxJQUlBLElBQUF2RCxFQUFBLEVBQUFBLEVBQUFtRCxFQUFBaEYsT0FBQTZCLElBRUFrRCxFQURBbEQsRUFBQSxFQUNBa0QsRUFBQSxlQUFBQyxFQUFBbkQsR0FBQXFELFlBQUEsUUFBQUYsRUFBQW5ELEdBQUFxRCxZQUFBLElBQUFGLEVBQUFuRCxHQUFBdUQsV0FFQUwsRUFBQSxnQkFBQUMsRUFBQW5ELEdBQUFxRCxZQUFBLFFBQUFGLEVBQUFuRCxHQUFBcUQsWUFBQSxJQUFBRixFQUFBbkQsR0FBQXVELFdBSUEsT0FBQUwsRUE1RkE5QyxTQUFBRSxpQkFBQSxRQUFBLFNBQUF4RCxHQUdBLEdBRkFBLEVBQUFxRSxPQUVBSixVQUFBTyxTQUFBLGVBQUEsQ0FFQSxJQUFBa0MsRUFBQXBELFNBQUFDLGNBQUEsdUJBQ0FvRCxFQUFBM0csRUFBQXFFLE9BQUFLLGNBQUFBLGNBQUFuQixjQUFBLGtCQUFBcUQsVUFDQUMsRUFBQTdHLEVBQUFxRSxPQUFBSyxjQUFBQSxjQUFBbkIsY0FBQSxtQkFBQXFELFVBRUEsR0FBQTFCLEVBQUE0QixTQUFBRCxHQUNBLE9BR0EzQixFQUFBbkMsS0FBQThELEdBRUEsSUFBQUUsRUFBQXpELFNBQUF5QyxjQUFBLE1BQ0FnQixFQUFBOUMsVUFBQUMsSUFBQSxvQkFDQTZDLEVBQUF0QixRQUFBZSxZQUFBSyxFQUNBRSxFQUFBOUIsVUFBQUQsRUFFQStCLEVBQUF4RCxjQUFBLDRCQUFBcUQsVUFBQUMsRUFDQUUsRUFBQXhELGNBQUEsMEJBQUFxRCxVQUFBRCxFQUVBckQsU0FBQUMsY0FBQSxxQkFBQTJDLFlBQUFhLEdBR0FMLEVBQUF6QyxVQUFBQyxJQUFBLG9CQUVBd0MsRUFBQXpDLFVBQUFPLFNBQUEsd0JBQ0FrQyxFQUFBekMsVUFBQVEsT0FBQSwwQkFVQW5CLFNBQUFDLGNBQUEsZUFBQUMsaUJBQUEsUUFBQSxTQUFBeEQsR0FDQSxJQUNBZ0gsRUFEQWhILEVBQUFxRSxPQUNBSyxjQUFBQSxjQUNBdUMsRUFBQUQsRUFBQS9DLFVBQUF4QyxXQUVBd0YsRUFBQUgsU0FBQSx3QkFBQUcsRUFBQUgsU0FBQSxvQkFDQUUsRUFBQS9DLFVBQUFRLE9BQUEsd0JBRUF1QyxFQUFBL0MsVUFBQUMsSUFBQSx1QkFDQThDLEVBQUEvQyxVQUFBQyxJQUFBLHVCQVVBWixTQUFBRSxpQkFBQSxRQUFBLFNBQUF4RCxHQUNBLElBQUFvRSxFQUFBcEUsRUFBQXFFLE9BQ0EsR0FBQUQsRUFBQUgsVUFBQU8sU0FBQSxzQkFBQSxDQUNBLElBQUErQixFQUFBbkMsRUFBQU0sY0FBQUEsY0FBQWUsUUFBQWUsWUFDQVUsRUFBQWhDLEVBQUFpQyxRQUFBWixHQUNBckIsRUFBQWtDLE9BQUFGLEVBQUEsR0FDQTlDLEVBQUFNLGNBQUFBLGNBQUFELFlBb0NBbkIsU0FBQUMsY0FBQSxtQkFBQUMsaUJBQUEsUUFBQSxTQUFBeEQsR0FFQUEsRUFBQW1FLGlCQUNBOUQsT0FBQWlGLFNBQUFDLEtBQUFZLE1BU0E3QyxTQUFBQyxjQUFBLGlCQUFBQyxpQkFBQSxRQUFBLFNBQUF4RCxHQUNBQSxFQUFBbUUsaUJBRUFiLFNBQUErRCxPQUFBLFdBQUFsQixJQUVBN0MsU0FBQUMsY0FBQSx1QkFBQVUsVUFBQUMsSUFBQSx5QkE1TUEsR0F5TkFvRCxPQUFBOUYsVUFBQXNGLFdBQ0FRLE9BQUE5RixVQUFBc0YsU0FBQSxTQUFBUyxFQUFBQyxHQUNBLGFBS0EsTUFKQSxpQkFBQUEsSUFDQUEsRUFBQSxLQUdBQSxFQUFBRCxFQUFBbEcsT0FBQWIsS0FBQWEsVUFHQSxJQUFBYixLQUFBMkcsUUFBQUksRUFBQUMsS0EyQkEsQ0FBQUMsUUFBQWpHLFVBQUFrRyxjQUFBbEcsVUFBQW1HLGFBQUFuRyxXQWRBb0csUUFBQSxTQUFBQyxHQUNBQSxFQUFBdkcsZUFBQSxXQUdBQyxPQUFBdUcsZUFBQUQsRUFBQSxTQUFBLENBQ0FFLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxVQUFBLEVBQ0E1QyxNQUFBLFdBQ0EsT0FBQTdFLEtBQUEwSCxZQUNBMUgsS0FBQTBILFdBQUFDLFlBQUEzSCxXQWNBNEgsTUFBQTVHLFVBQUFzRixVQUNBdkYsT0FBQXVHLGVBQUFNLE1BQUE1RyxVQUFBLFdBQUEsQ0FDQTZELE1BQUEsU0FBQWdELEVBQUFDLEdBRUEsR0FBQSxNQUFBOUgsS0FDQSxNQUFBLElBQUErSCxVQUFBLGlDQUlBLElBQUExRyxFQUFBTixPQUFBZixNQUdBZ0ksRUFBQTNHLEVBQUFSLFNBQUEsRUFHQSxHQUFBLElBQUFtSCxFQUNBLE9BQUEsRUFLQSxJQVNBQyxFQUFBQyxFQVRBakksRUFBQSxFQUFBNkgsRUFPQUssRUFBQUMsS0FBQUMsSUFBQSxHQUFBcEksRUFBQUEsRUFBQStILEVBQUFJLEtBQUFFLElBQUFySSxHQUFBLEdBT0EsS0FBQWtJLEVBQUFILEdBQUEsQ0FHQSxJQVJBQyxFQVFBNUcsRUFBQThHLE9BUkFELEVBUUFMLElBUEEsaUJBQUFJLEdBQUEsaUJBQUFDLEdBQUFLLE1BQUFOLElBQUFNLE1BQUFMLEdBUUEsT0FBQSxFQUdBQyxJQUlBLE9BQUEsS0N0VEEsV0FFQSxJQUFBSyxFQUFBMUYsU0FBQUMsY0FBQSxvQkFDQTBGLEVBQUEzRixTQUFBQyxjQUFBLFlBQ0FELFNBQUFDLGNBQUEsZ0JBR0EsR0FBQTBGLEVBQUEsQ0FDQSxJQUFBQyxFQUFBNUYsU0FBQXlDLGNBQUEsVUFDQW1ELEVBQUFqRSxVQUFBLGNBQ0FpRSxFQUFBQyxHQUFBLGFBRUFGLEVBQUFyRixNQUFBd0YsV0FBQSxTQUNBSCxFQUFBckYsTUFBQXlGLFVBQUEsTUFDQUosRUFBQXJGLE1BQUEwRixRQUFBLE1BQ0FMLEVBQUFyRixNQUFBMkYsVUFBQSxNQUVBUCxFQUFBOUMsWUFBQWdELEdBRUE1RixTQUFBQyxjQUFBLGVBQUFDLGlCQUFBLFFBQUEsU0FBQXhELEdBQ0FBLEVBQUFtRSxpQkFDQW5FLEVBQUFxRSxPQUNBVCxNQUFBNEYsUUFBQSxJQUNBUCxFQUFBckYsTUFBQXdGLFdBQUEsVUFDQUgsRUFBQXJGLE1BQUF5RixVQUFBLFNBQ0FKLEVBQUFyRixNQUFBMEYsUUFBQSxPQUNBTCxFQUFBckYsTUFBQTJGLFVBQUEsVUExQkEiLCJmaWxlIjoiZ2xvYmFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIGF0b21pYyB2NC4yLjEgfCAoYykgMjAxOCBDaHJpcyBGZXJkaW5hbmRpIHwgTUlUIExpY2Vuc2UgfCBodHRwczovL2dpdGh1Yi5jb20vY2ZlcmRpbmFuZGkvYXRvbWljICovXG4hKGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSwoZnVuY3Rpb24oKXtyZXR1cm4gZSh0KX0pKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQpOndpbmRvdy5hdG9taWM9ZSh0KX0pKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsKGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlLG49e21ldGhvZDpcIkdFVFwiLHVzZXJuYW1lOm51bGwscGFzc3dvcmQ6bnVsbCxkYXRhOnt9LGhlYWRlcnM6e1wiQ29udGVudC10eXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIn0scmVzcG9uc2VUeXBlOlwidGV4dFwiLHRpbWVvdXQ6bnVsbCx3aXRoQ3JlZGVudGlhbHM6ITF9LG89ZnVuY3Rpb24oKXtyZXR1cm5cIlhNTEh0dHBSZXF1ZXN0XCJpbiB0JiZcIkpTT05cImluIHQmJlwiUHJvbWlzZVwiaW4gdH0scj1mdW5jdGlvbigpe2Zvcih2YXIgdD17fSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdOyEoZnVuY3Rpb24oZSl7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKFwiW29iamVjdCBPYmplY3RdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZVtuXSk/dFtuXT1yKHRbbl0sZVtuXSk6dFtuXT1lW25dKX0pKG4pfXJldHVybiB0fSxzPWZ1bmN0aW9uKHQpe3ZhciBuO2lmKFwidGV4dFwiIT09ZS5yZXNwb25zZVR5cGUmJlwiXCIhPT1lLnJlc3BvbnNlVHlwZSlyZXR1cm57ZGF0YTp0LnJlc3BvbnNlLHhocjp0fTt0cnl7bj1KU09OLnBhcnNlKHQucmVzcG9uc2VUZXh0KX1jYXRjaChlKXtuPXQucmVzcG9uc2VUZXh0fXJldHVybntkYXRhOm4seGhyOnR9fSxpPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0fHxcIltvYmplY3QgRm9ybURhdGFdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpcmV0dXJuIHQ7aWYoL2FwcGxpY2F0aW9uXFwvanNvbi9pLnRlc3QoZS5oZWFkZXJzW1wiQ29udGVudC10eXBlXCJdKXx8XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXJldHVybiBKU09OLnN0cmluZ2lmeSh0KTt2YXIgbj1bXTtmb3IodmFyIG8gaW4gdCl0Lmhhc093blByb3BlcnR5KG8pJiZuLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KG8pK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0W29dKSk7cmV0dXJuIG4uam9pbihcIiZcIil9LGE9ZnVuY3Rpb24odCl7dmFyIG49bmV3IFhNTEh0dHBSZXF1ZXN0LG89bmV3IFByb21pc2UoZnVuY3Rpb24obyxyKXtuLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1uLnJlYWR5U3RhdGUmJihuLnN0YXR1cz49MjAwJiZuLnN0YXR1czwzMDA/byhzKG4pKTpyKHtzdGF0dXM6bi5zdGF0dXMsc3RhdHVzVGV4dDpuLnN0YXR1c1RleHR9KSl9LG4ub3BlbihlLm1ldGhvZCx0LCEwLGUudXNlcm5hbWUsZS5wYXNzd29yZCksbi5yZXNwb25zZVR5cGU9ZS5yZXNwb25zZVR5cGU7Zm9yKHZhciBhIGluIGUuaGVhZGVycyllLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoYSkmJm4uc2V0UmVxdWVzdEhlYWRlcihhLGUuaGVhZGVyc1thXSk7ZS50aW1lb3V0JiYobi50aW1lb3V0PWUudGltZW91dCxuLm9udGltZW91dD1mdW5jdGlvbih0KXtyKHtzdGF0dXM6NDA4LHN0YXR1c1RleHQ6XCJSZXF1ZXN0IHRpbWVvdXRcIn0pfSksZS53aXRoQ3JlZGVudGlhbHMmJihuLndpdGhDcmVkZW50aWFscz0hMCksbi5zZW5kKGkoZS5kYXRhKSl9KTtyZXR1cm4gby5jYW5jZWw9ZnVuY3Rpb24oKXtuLmFib3J0KCl9LG99O3JldHVybiBmdW5jdGlvbih0LHMpe2lmKCFvKCkpdGhyb3dcIkF0b21pYzogVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIG1ldGhvZHMgdXNlZCBpbiB0aGlzIHBsdWdpbi5cIjtyZXR1cm4gZT1yKG4sc3x8e30pLGEodCl9fSkpOyIsImlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDEwODApIHtcbiAgICAvLyAkKCcubWVudS1pdGVtLS10b3AtbGV2ZWwgLnN1Yi1tZW51LS1sZXZlbC1vbmUgPiBsaTpmaXJzdC1jaGlsZCcpLmFkZENsYXNzKCdhY3RpdmUnKS5maW5kKCcuc3ViLW1lbnUtLWxldmVsLXR3bycpLmFkZENsYXNzKCdhY2NvcmRpYW4tb3BlbicpO1xuICAgIC8vIGFsZXJ0KCd0YWQnKTtcbn1cblxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24jaGFtYnVyZ2VyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gIHRvZ2dsZU1lbnUoKTtcbiAgdmFyIGhlYWRlckhlaWdudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWhlYWRlcicpLm9mZnNldEhlaWdodDtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tLWxldmVsLXplcm8nKS5zdHlsZS50b3AgPSBoZWFkZXJIZWlnbnQgKyAncHgnO1xufSk7XG5cbnZhciBoZWFkZXJUb3BCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWJ1dHRvbicpO1xudmFyIG5hdkxldmVsT25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWxldmVsLW9uZScpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IG5hdkxldmVsT25lLmxlbmd0aDsgaSsrKSB7XG4gIG5hdkxldmVsT25lW2ldLnF1ZXJ5U2VsZWN0b3IoJ2xpOmZpcnN0LWNoaWxkIGEnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbn1cblxuZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJUb3BCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gIGhlYWRlclRvcEJ1dHRvbnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgc2VsZiA9IGUudGFyZ2V0O1xuICAgIHZhciBjaGlsZE1lbnUgPSBzZWxmLm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lJyk7XG4gICAgaWYgKGNoaWxkTWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICBjaGlsZE1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBzZWxmLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgc2VsZi5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBzZWxmLm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKHNlbGYucGFyZW50RWxlbWVudCk7XG4gICAgLy8gc2VsZi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIH0pO1xufVxuXG52YXIgYWxsTGV2ZWxPbmVMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUgPiBsaSA+IGEnKTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBhbGxMZXZlbE9uZUxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gIGFsbExldmVsT25lTGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUgPiBsaSA+IGEnKTtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmtzLmxlbmd0aDsgaisrKSB7XG4gICAgICBsaW5rc1tqXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgLy8gaWYgKGFsbExldmVsT25lTGlua3MuY2xhc3NMaXN0LmNvbnRhaW5zKCcnKSkge31cbiAgICAvLyBhbGxMZXZlbE9uZUxpbmtzLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIC8vIGNvbnNvbGUubG9nKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUgPiBsaSA+IGEnKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVNZW51KCkge1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbWVudS1vcGVuJyk7XG4gICAgdmFyIG1lbnVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGFtYnVyZ2VyJyk7XG4gICAgbWVudUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcbn0iLCIoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGFsZXJ0Q2FydEl0ZW1UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1pdGVtJykuaW5uZXJIVE1MO1xuICB2YXIgYWRkZWRQcm9kdWN0cyA9IFtdO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1saXN0JykuaW5uZXJIVE1MID0gJyc7XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIE1JTklaRVMgQUxFUlQgT04gUEFHRSBMT0FEIElGIENPT0tJRSBQUkVTRU5UXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICAvLyBpZiAoZG9jdW1lbnQuY29va2llLnNwbGl0KCc7JykuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgLy8gICByZXR1cm4gaXRlbS5pbmRleE9mKCdjYXJ0VVJMPScpID49IDBcbiAgLy8gfSkubGVuZ3RoKSB7XG4gIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1hZGQtdG8tY2FydCcpLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgLy8gfVxuXG4gIFxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBDSEFOR0UgUEFHRSBXSEVOIFNFTEVDVEVEIE1PREVMIE1PRElGSUVSXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIHZhciBtb2RlbE1vZGlmZXJTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kZWxNb2RpZmllcnMnKTtcbiAgdmFyIG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFpbl9jb250ZW50Jyk7XG4gIG1vZGVsTW9kaWZlclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgXG4gICAgLy8gbWFpbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYWluQ29udGFpbmVyLm9mZnNldEhlaWdodDtcbiAgICAvLyBtYWluQ29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwic2l0ZS13aWR0aCBwYWQteS0tbW9zdFwiPjxpbWcgc3JjPVwiaHR0cHM6Ly9maWxsbXVycmF5LmNvbS8yMDAvMjAwXCI+PC9kaXY+JztcblxuICAgIHZhciBsb2MgPSBlLnRhcmdldC52YWx1ZTtcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJyArIGxvYztcbiAgfSk7XG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFNIT1cgUFJPRFVDVCBJTUFHRSBPTiBIT1ZFUlxuICBAbm90ZSA9IE9ubHkgcnVucyBvbiBzY3JlZW4gbGFyZ2VyIHRoYW4gMTA4MHB4XG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgdmFyIGFsbFJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZSB0cicpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsUm93cy5sZW5ndGg7IGkrKykge1xuICAgIGFsbFJvd3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICgod2luZG93LmlubmVyV2lkdGggPCAxMDgwKSB8fCAoZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5kYXRhc2V0LnByb2R1Y3RTb2xkID09PSAnZmFsc2UnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmRhdGFzZXQucHJvZHVjdFNvbGQpO1xuXG4gICAgICB2YXIgaW1nRXhpc3RzID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQgLnByb2R1Y3QtaW1hZ2UtY29udGFpbmVyJyk7XG4gICAgICBpZiAoaW1nRXhpc3RzKSB7XG4gICAgICAgIGltZ0V4aXN0cy5jbGFzc0xpc3QucmVtb3ZlKCdwcm9kdWN0LWltYWdlLS1pcy1oaWRkZW4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaW1nUGF0aCA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkJykuZGF0YXNldC5wcm9kdWN0SW1hZ2U7XG4gICAgICB2YXIgcHJvZEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgcHJvZEltZy5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWltYWdlJyk7XG4gICAgICBcbiAgICAgIGlmICh0eXBlb2YgaW1nUGF0aCA9PT0gJ3VuZGVmaW5lZCcpIHsgXG4gICAgICAgIHByb2RJbWcuc3JjID0gJ2h0dHBzOi8vY2RuMy52b2x1c2lvbi5jb20veXhoZmUuZGZxZXcvdi92c3BmaWxlcy90ZW1wbGF0ZXMvZ2ZwLXRlc3QvaW1hZ2VzL25vcGhvdG8uZ2lmJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2RJbWcuc3JjID0gaW1nUGF0aDtcbiAgICAgIH1cblxuICAgICAgdmFyIHByb2RJbWdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHByb2RJbWdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1pbWFnZS1jb250YWluZXInKTtcbiAgICAgIHByb2RJbWdDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvZEltZyk7XG4gICAgICBcbiAgICAgIHZhciB0YWJsZUNlbGwgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmFwcGVuZENoaWxkKHByb2RJbWdDb250YWluZXIpO1xuICAgICAgXG4gICAgfSk7XG5cbiAgICBhbGxSb3dzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCAucHJvZHVjdC1pbWFnZS1jb250YWluZXInKS5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWltYWdlLS1pcy1oaWRkZW4nKTtcbiAgICB9KTtcbiAgfVxuXG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEFERElORyBQUk9EVUNUIFRPIENBUlRcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgc2VsZiA9IGUudGFyZ2V0O1xuICAgIFxuICAgIGlmIChzZWxmLmNsYXNzTGlzdC5jb250YWlucygnYWRkLXRvLWNhcnQnKSkge1xuXG4gICAgICB2YXIgYWxlcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWFkZC10by1jYXJ0Jyk7XG4gICAgICB2YXIgcGFydFR5cGUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5pbm5lclRleHQ7XG4gICAgICB2YXIgcGFydE51bWJlciA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0ZDpudGgtY2hpbGQoMiknKS5pbm5lclRleHQ7XG5cbiAgICAgIGlmIChhZGRlZFByb2R1Y3RzLmluY2x1ZGVzKHBhcnROdW1iZXIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYWRkZWRQcm9kdWN0cy5wdXNoKHBhcnROdW1iZXIpO1xuXG4gICAgICB2YXIgYWRkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdsaScgKTtcbiAgICAgIGFkZEl0ZW0uY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWNhcnQtaXRlbScpO1xuICAgICAgYWRkSXRlbS5kYXRhc2V0LnByb2R1Y3Rjb2RlID0gcGFydE51bWJlcjtcbiAgICAgIGFkZEl0ZW0uaW5uZXJIVE1MID0gYWxlcnRDYXJ0SXRlbVRlbXBsYXRlO1xuXG4gICAgICBhZGRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1wYXJ0LW51bWJlcicpLmlubmVyVGV4dCA9IHBhcnROdW1iZXI7XG4gICAgICBhZGRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1wYXJ0LXR5cGUnKS5pbm5lclRleHQgPSBwYXJ0VHlwZTtcblxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWxpc3QnKS5hcHBlbmRDaGlsZChhZGRJdGVtKTtcbiAgICAgIFxuXG4gICAgICBhbGVydC5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtYWN0aXZlJyk7XG5cbiAgICAgIGlmIChhbGVydC5jbGFzc0xpc3QuY29udGFpbnMoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKSkge1xuICAgICAgICBhbGVydC5jbGFzc0xpc3QucmVtb3ZlKCdhbGVydC0taXMtbWluaW1pemVkJylcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgVE9HR0xFIENBUlQgQUxFUlRcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2xvc2VBbGVydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgdmFyIGNvbnRhaW5lciA9IHNlbGYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIHZhciBjbGFzc2VzID0gY29udGFpbmVyLmNsYXNzTGlzdC50b1N0cmluZygpO1xuXG4gICAgaWYgKGNsYXNzZXMuaW5jbHVkZXMoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKSAmJiBjbGFzc2VzLmluY2x1ZGVzKCdhbGVydC0taXMtYWN0aXZlJykpIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLWFjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFJFTU9WRSBJVEVNIEZST00gQ0FSVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgaWYgKHNlbGYuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbGVydC0tcmVtb3ZlLWl0ZW0nKSkge1xuICAgICAgdmFyIHByb2R1Y3RDb2RlID0gc2VsZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5wcm9kdWN0Y29kZTtcbiAgICAgIHZhciBpbmRleCA9IGFkZGVkUHJvZHVjdHMuaW5kZXhPZihwcm9kdWN0Q29kZSk7XG4gICAgICBhZGRlZFByb2R1Y3RzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICBzZWxmLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmUoKTsgXG4gICAgfVxuICB9KTtcblxuXG5cbiAgZnVuY3Rpb24gYnVpbGRDYXJ0U3RyaW5nKCkge1xuICAgIHZhciBpbml0VVJMID0gJ2h0dHBzOi8vd3d3LmdyZWVuZmFybXBhcnRzLmNvbS9zaG9wcGluZ2NhcnQuYXNwPyc7XG4gICAgdmFyIGFsbEFkZGVkUHJvZHVjdHMgPSBbXTtcbiAgICB2YXIgYWxsQWRkZWRJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGVydC0tY2FydC1pdGVtJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbEFkZGVkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwcm9kdWN0Q29kZSA9IGFsbEFkZGVkSXRlbXNbaV0uZGF0YXNldC5wcm9kdWN0Y29kZTtcbiAgICAgIHZhciBwcm9kdWN0UXR5ID0gYWxsQWRkZWRJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicHJvZHVjdF9xdWFudGl0eVwiXScpLnZhbHVlO1xuICAgICAgYWxsQWRkZWRQcm9kdWN0cy5wdXNoKHtcbiAgICAgICAgcHJvZHVjdENvZGU6IHByb2R1Y3RDb2RlLFxuICAgICAgICBwcm9kdWN0UXR5OiBwcm9kdWN0UXR5XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbEFkZGVkUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpIDwgMSkge1xuICAgICAgICBpbml0VVJMID0gaW5pdFVSTCArICdwcm9kdWN0Y29kZT0nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0Q29kZSArICcmUVRZLicgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RDb2RlICsgJz0nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0UXR5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdFVSTCA9IGluaXRVUkwgKyAnJnByb2R1Y3Rjb2RlPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RDb2RlICsgJyZRVFkuJyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdENvZGUgKyAnPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RRdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluaXRVUkw7XG4gIH1cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQ0hFQ0tPVVQgLSBTZW5kIHByb2R1Y3RzIHRvIFZvbHVzaW9uXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0Q2hlY2tvdXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyBjYXJ0IHVybCB0ZW1wbGF0ZTogaHR0cHM6Ly93d3cuZ3JlZW5mYXJtcGFydHMuY29tL3Nob3BwaW5nY2FydC5hc3A/cHJvZHVjdGNvZGU9amR6ZzkwMCZRVFkuamR6ZzkwMD01XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYnVpbGRDYXJ0U3RyaW5nKCk7XG5cbiAgfSk7XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgU0FWRSBGT1IgTEFURVIgLSBTZW5kIHByb2R1Y3RzIHRvIFZvbHVzaW9uIGFuZCBjb29raWVcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NhdmVGb3JMYXRlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGRvY3VtZW50LmNvb2tpZSA9ICdjYXJ0VVJMPScgKyBidWlsZENhcnRTdHJpbmcoKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKS5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG5cbiAgfSk7XG5cbn0pKCk7XG5cblxuLypcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5QT0xZRklMTCBGT1Igc3RyLmluY2x1ZGVzKClcbkBMSU5LIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9pbmNsdWRlc1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uKHNlYXJjaCwgc3RhcnQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgaWYgKHR5cGVvZiBzdGFydCAhPT0gJ251bWJlcicpIHtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHN0YXJ0ICsgc2VhcmNoLmxlbmd0aCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmluZGV4T2Yoc2VhcmNoLCBzdGFydCkgIT09IC0xO1xuICAgIH1cbiAgfTtcbn1cblxuXG4vKlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5QT0xZRklMTCBGT1Igbm9kZS5yZW1vdmUoKVxuQExJTksgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NoaWxkTm9kZS9yZW1vdmVcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbihmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3JlbW92ZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncmVtb3ZlJywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Tm9kZSAhPT0gbnVsbClcbiAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSkoW0VsZW1lbnQucHJvdG90eXBlLCBDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZSwgRG9jdW1lbnRUeXBlLnByb3RvdHlwZV0pO1xuXG5cblxuLypcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUE9MWUZJTEwgRk9SIGFycmF5LmluY2x1ZGVzXG5ATElOSyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pbmNsdWRlc1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2luY2x1ZGVzJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcblxuICAgICAgaWYgKHRoaXMgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInRoaXNcIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDEuIExldCBPIGJlID8gVG9PYmplY3QodGhpcyB2YWx1ZSkuXG4gICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTtcblxuICAgICAgLy8gMi4gTGV0IGxlbiBiZSA/IFRvTGVuZ3RoKD8gR2V0KE8sIFwibGVuZ3RoXCIpKS5cbiAgICAgIHZhciBsZW4gPSBvLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgLy8gMy4gSWYgbGVuIGlzIDAsIHJldHVybiBmYWxzZS5cbiAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyA0LiBMZXQgbiBiZSA/IFRvSW50ZWdlcihmcm9tSW5kZXgpLlxuICAgICAgLy8gICAgKElmIGZyb21JbmRleCBpcyB1bmRlZmluZWQsIHRoaXMgc3RlcCBwcm9kdWNlcyB0aGUgdmFsdWUgMC4pXG4gICAgICB2YXIgbiA9IGZyb21JbmRleCB8IDA7XG5cbiAgICAgIC8vIDUuIElmIG4g4omlIDAsIHRoZW5cbiAgICAgIC8vICBhLiBMZXQgayBiZSBuLlxuICAgICAgLy8gNi4gRWxzZSBuIDwgMCxcbiAgICAgIC8vICBhLiBMZXQgayBiZSBsZW4gKyBuLlxuICAgICAgLy8gIGIuIElmIGsgPCAwLCBsZXQgayBiZSAwLlxuICAgICAgdmFyIGsgPSBNYXRoLm1heChuID49IDAgPyBuIDogbGVuIC0gTWF0aC5hYnMobiksIDApO1xuXG4gICAgICBmdW5jdGlvbiBzYW1lVmFsdWVaZXJvKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggPT09IHkgfHwgKHR5cGVvZiB4ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeSA9PT0gJ251bWJlcicgJiYgaXNOYU4oeCkgJiYgaXNOYU4oeSkpO1xuICAgICAgfVxuXG4gICAgICAvLyA3LiBSZXBlYXQsIHdoaWxlIGsgPCBsZW5cbiAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgIC8vIGEuIExldCBlbGVtZW50SyBiZSB0aGUgcmVzdWx0IG9mID8gR2V0KE8sICEgVG9TdHJpbmcoaykpLlxuICAgICAgICAvLyBiLiBJZiBTYW1lVmFsdWVaZXJvKHNlYXJjaEVsZW1lbnQsIGVsZW1lbnRLKSBpcyB0cnVlLCByZXR1cm4gdHJ1ZS5cbiAgICAgICAgaWYgKHNhbWVWYWx1ZVplcm8ob1trXSwgc2VhcmNoRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjLiBJbmNyZWFzZSBrIGJ5IDEuIFxuICAgICAgICBrKys7XG4gICAgICB9XG5cbiAgICAgIC8vIDguIFJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59IiwiKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBjb21tZW50c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaW5nbGUtY29tbWVudHMnKTtcbiAgdmFyIGNvbW1lbnRzUmVwbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzcG9uZCcpO1xuICB2YXIgY29tbWVudEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tbWVudGZvcm0nKTtcblxuXG4gIGlmIChjb21tZW50c1JlcGx5KSB7XG4gICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYnV0dG9uLmlubmVySFRNTCA9ICdBZGQgQ29tbWVudCc7XG4gICAgYnV0dG9uLmlkID0gJ2FkZENvbW1lbnQnO1xuXG4gICAgY29tbWVudHNSZXBseS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgY29tbWVudHNSZXBseS5zdHlsZS5tYXhIZWlnaHQgPSAnMHB4JztcbiAgICBjb21tZW50c1JlcGx5LnN0eWxlLnBhZGRpbmcgPSAnMHB4JztcbiAgICBjb21tZW50c1JlcGx5LnN0eWxlLm1hcmdpblRvcCA9ICcwcHgnO1xuXG4gICAgY29tbWVudHNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRDb21tZW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgc2VsZiA9IGUudGFyZ2V0O1xuICAgICAgc2VsZi5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgY29tbWVudHNSZXBseS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgY29tbWVudHNSZXBseS5zdHlsZS5tYXhIZWlnaHQgPSAnMTAwMHB4JztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUucGFkZGluZyA9ICcxcmVtJztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUubWFyZ2luVG9wID0gJzNyZW0nO1xuICAgIH0pXG5cbiAgfVxuXG5cbn0pKCk7Il19
