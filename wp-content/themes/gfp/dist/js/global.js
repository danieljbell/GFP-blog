!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):window.atomic=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(n){"use strict";var i,a={method:"GET",username:null,password:null,data:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1},o=function(){for(var n={},e=0;e<arguments.length;e++){!function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?n[t]=o(n[t],e[t]):n[t]=e[t])}(arguments[e])}return n},r=function(a){var o=new XMLHttpRequest,e=new Promise(function(e,t){for(var n in o.onreadystatechange=function(){4===o.readyState&&(200<=o.status&&o.status<300?e(function(t){var n;if("text"!==i.responseType&&""!==i.responseType)return{data:t.response,xhr:t};try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return{data:n,xhr:t}}(o)):t({status:o.status,statusText:o.statusText}))},o.open(i.method,a,!0,i.username,i.password),o.responseType=i.responseType,i.headers)i.headers.hasOwnProperty(n)&&o.setRequestHeader(n,i.headers[n]);i.timeout&&(o.timeout=i.timeout,o.ontimeout=function(e){t({status:408,statusText:"Request timeout"})}),i.withCredentials&&(o.withCredentials=!0),o.send(function(e){if("string"==typeof e||"[object FormData]"===Object.prototype.toString.call(e))return e;if(/application\/json/i.test(i.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(e))return JSON.stringify(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(i.data))});return e.cancel=function(){o.abort()},e};return function(e,t){if(!("XMLHttpRequest"in n&&"JSON"in n&&"Promise"in n))throw"Atomic: This browser does not support the methods used in this plugin.";return i=o(a,t||{}),r(e)}}),window.innerWidth,document.querySelector("button#hamburger").addEventListener("click",function(e){toggleMenu();var t=document.querySelector(".site-header").offsetHeight;document.querySelector(".navigation--level-zero").style.top=t+"px"});for(var headerTopButtons=document.querySelectorAll(".navigation--button"),navLevelOne=document.querySelectorAll(".navigation--level-one"),i=0;i<navLevelOne.length;i++)navLevelOne[i].querySelector("li:first-child a").classList.add("active");for(i=0;i<headerTopButtons.length;i++)headerTopButtons[i].addEventListener("click",function(e){e.preventDefault();var t=e.target,n=t.nextElementSibling.querySelector(".navigation--level-one");n.classList.contains("active")?(n.classList.remove("active"),t.nextElementSibling.classList.remove("active")):(t.parentElement.classList.add("active"),t.nextElementSibling.classList.add("active"),t.nextElementSibling.querySelector(".navigation--level-one").classList.add("active"))});var allLevelOneLinks=document.querySelectorAll(".navigation--level-one > li > a");for(i=0;i<allLevelOneLinks.length;i++)allLevelOneLinks[i].addEventListener("click",function(e){e.preventDefault();for(var t=document.querySelectorAll(".navigation--level-one > li > a"),n=0;n<t.length;n++)t[n].classList.remove("active");e.target.classList.add("active")});function toggleMenu(){document.body.classList.toggle("menu-open"),document.querySelector("#hamburger").classList.toggle("is-active")}!function(){var e=document.querySelector("#modelModifiers");document.querySelector("#main_content");if(e&&e.addEventListener("change",function(e){var t=e.target.value;window.location.href=t}),document.body.classList.contains("single-post"))for(var t=document.querySelectorAll("table tr"),n=0;n<t.length;n++)t[n].addEventListener("mouseenter",function(e){if(!(window.innerWidth<1080||"false"===e.target.querySelector("td:first-child").dataset.productSold)){var t=e.target.querySelector("td:first-child .product-image-container");if(t)t.classList.remove("product-image--is-hidden");else{var n=e.target.querySelector("td:first-child").dataset.productImage,a=document.createElement("img");a.classList.add("product-image"),a.src=void 0===n?"https://cdn3.volusion.com/yxhfe.dfqew/v/vspfiles/templates/gfp-test/images/nophoto.gif":n;var o=document.createElement("div");o.classList.add("product-image-container"),o.appendChild(a);e.target.querySelector("td:first-child").appendChild(o)}}}),t[n].addEventListener("mouseleave",function(e){e.target.querySelector("td:first-child .product-image-container").classList.add("product-image--is-hidden")});var a=document.querySelector(".maintenance-kit-container");a&&1080<window.innerWidth&&(window.onload=function(){var t=a.offsetTop,n=window.getComputedStyle(document.body,null).fontSize;n=parseInt(n.split("px")[0]),window.addEventListener("scroll",function(e){window.scrollY>t-3*n&&a.classList.add("maintenance-kit-container--is-fixed"),window.scrollY<t-3*n&&a.classList.remove("maintenance-kit-container--is-fixed")})})}(),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0===a)return!1;var o,i,r=0|t,c=Math.max(0<=r?r:a-Math.abs(r),0);for(;c<a;){if((o=n[c])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;c++}return!1}}),function(){var e=document.querySelector("#fitment-text-filter"),a=document.querySelectorAll(".single--part-fitment-list a");e&&e.addEventListener("keyup",function(e){for(var t=e.target.value.toUpperCase(),n=0;n<a.length;n++)a[n].parentElement.classList.add("hidden"),a[n].textContent.includes(t)&&a[n].parentElement.classList.remove("hidden")})}(),function(){var e=document.querySelector(".single-comments"),t=document.querySelector("#respond");document.querySelector("#commentform");if(t){var n=document.createElement("button");n.innerHTML="Add Comment",n.id="addComment",t.style.visibility="hidden",t.style.maxHeight="0px",t.style.padding="0px",t.style.marginTop="0px",e.appendChild(n),document.querySelector("#addComment").addEventListener("click",function(e){e.preventDefault(),e.target.style.opacity="0",t.style.visibility="visible",t.style.maxHeight="1000px",t.style.padding="1rem",t.style.marginTop="3rem"})}}(),function(){var o=document.querySelector("#loadMorePosts");if(o){var a=1,d=document.querySelector(".post-listing--list");o.addEventListener("click",function(e){var t=window.location.origin+"/wp-json/wp/v2/posts?offset="+10*a;if(document.body.classList.contains("category")){var n=document.body.classList;console.log(n)}o.disabled=!0,o.classList.add("disabled"),atomic(t).then(function(e){for(var t=[],n=e.data,a=0;a<n.length;a++)t.push({date:n[a].date,author:n[a].author,category:n[a].categories[0],title:n[a].title.rendered,tags:n[a].tags,link:n[a].link,description:n[a].excerpt.rendered.slice(3,-5)});return o.disabled=!1,o.classList.remove("disabled"),e.data.length<10&&(o.textContent="All Posts Loaded",o.disabled=!0,o.classList.add("disabled")),t}).then(function(e){for(var t=0;t<e.length;t++){var n=e[t].date,a=new Date(n);a=a.toDateString().slice(3);var o=e[t].title,i="Uncategorized",r=e[t].link,c=e[t].description;switch(e[t].category){case 17:i="Maintenance Reminder";break;case 63:i="Service Intervals";break;case 65:i="Troubleshooting";break;case 6:i="Talk With A Tech"}var s=document.createElement("div");s.classList.add("card"),s.innerHTML='<div class="card-content">'+o+"</div>",s.querySelector(".card-content").innerHTML='<p class="card-category"><a href="/?cat='+e[t].category+'">'+i+'</a></p><h4 class="card-title"><a href="'+r+'">'+o+'</a></h4><p class="card-description">'+c+'</p><ul class="single-tags--list"></ul>',d.appendChild(s)}}).catch(function(e){console.log(e)}),a++})}var i=document.querySelector(".product-list-filters-list");document.querySelector("#filter-products");i&&i.addEventListener("change",function(e){var t,n=[];i.querySelectorAll("li").forEach(function(e){e.querySelector("input").checked&&n.push(e.querySelector("input").value)}),t=n,document.querySelectorAll(".product-list-with-filters .products--item").forEach(function(e){e.classList.remove("visually-hidden"),e.dataset.brand.includes(t)||e.classList.add("visually-hidden")})})}(),function(){if(!document.body.classList.contains("woocommerce-cart")&&!document.body.classList.contains("woocommerce-checkout")){var t=document.querySelector(".alert--add-to-cart"),n=!1,a=document.querySelector(".alert--cart-list"),o=document.querySelector(".alert--header");if(a){a.addEventListener("click",function(e){e.target.matches("a")?console.log("redirect"):e.target.matches("button")&&(e.preventDefault(),function(e){if(e.preventDefault(),i("down"),e.target.matches("button")){var t=e.target.dataset.index,n=a.querySelector('[data-index="'+t+'"]');n.remove(),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"remove_item_from_cart",product_id:n.dataset.productid}})}a.children.length<1&&(a.innerHTML="<li>Your shopping cart is empty.</li>")}(e))}),a.addEventListener("change",function(e){var t,n,a;t=e.target,n=t.parentElement.parentElement.dataset.productid,a=t.value,atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"increment_item_in_cart",product_id:n,qty:a}}).then(function(e){200===e.xhr.status&&console.log("quantity for "+n+" is set to "+a)})}),o.addEventListener("click",function(e){r()}),0<a.querySelectorAll("li").length&&function(){if(!t)return console.error("Cart Markup is not on the page");t.classList.add("alert--is-active"),t.classList.add("alert--is-minimized")}();var e=document.querySelectorAll(".add-to-cart");e&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),i("up"),function(e){if(!e.value)return console.log("i dont have a value"),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"find_product_by_sku",sku:e.dataset.sku}}).then(function(e){console.log(e)});var n=e.value;atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"add_item_to_cart",product_id:n,qty:1}}).then(function(e){var t;200===e.xhr.status&&(console.log("successfully added "+n+" to cart"),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"get_product_details",product_id:t}}).then(function(e){return JSON.parse(e.data.slice(0,-1))}).then(function(e){console.table(e),a.innerHTML=e.map(function(e,t){return e.salePrice?'<li class="alert--cart-item" data-productID="'+e.id+'" data-index="'+t+'"><span class="alert--cart-part"><span class="alert--cart-part-type"><a href="'+e.permalink+'">'+e.name+'</a></span><span class="alert--cart-part-number">'+e.sku+" - <del>$"+e.price+'</del> <span class="sale-price">$'+e.salePrice+'</span></span></span><span><label for="product_quantity">Qty: </label><input type="number" name="product_quantity" min="1" max="50" value="1"><button class="alert--remove-item" data-index="'+t+'">&times;</button></span></li>':'<li class="alert--cart-item" data-productID="'+e.id+'" data-index="'+t+'"><span class="alert--cart-part"><span class="alert--cart-part-type"><a href="'+e.permalink+'">'+e.name+'</a></span><span class="alert--cart-part-number">'+e.sku+" - $"+e.price+'</span></span><span><label for="product_quantity">Qty: </label><input type="number" name="product_quantity" min="1" max="50" value="1"><button class="alert--remove-item" data-index="'+t+'">&times;</button></span></li>'}).join("")}),setTimeout(function(){r()},200))})}(e.target)})})}else console.error("Ajax Cart Markup doesn't exist on the page. Add it!")}function i(e){var t=parseInt(o.querySelector(".product-count").innerText);e?("up"===e?++t:--t,o.querySelector("h4").innerHTML=1<t||0===t?'<span class="product-count">'+t+"</span> Products in Cart":'<span class="product-count">'+t+"</span> Product in Cart"):o.querySelector(".product-count").innerText=t}function r(e){t?(n=!n,t.classList.add("alert--is-active"),t.classList.contains("alert--is-minimized")&&t.classList.remove("alert--is-minimized")):console.error("Cart Markup is not on the page")}}(),function(){var e=document.querySelectorAll(".accordian--title");if(e)for(var t=0;t<e.length;t++)e[t].parentElement.classList.add("accordian--is-collapsed"),e[t].addEventListener("click",function(e){e.target.parentElement.classList.contains("accordian--is-collapsed")?e.target.parentElement.classList.remove("accordian--is-collapsed"):e.target.parentElement.classList.add("accordian--is-collapsed")})}(),function(){var e=document.querySelectorAll(".tooltip--toggle");if(e)for(var t=0;t<e.length;t++)e[t].nextElementSibling.classList.add("tooltip--is-hidden"),e[t].addEventListener("click",function(e){console.log(e.target.nextElementSibling.classList.toggle("tooltip--is-hidden"))})}(),function(){var e=document.querySelectorAll(".modal--close"),t=document.querySelectorAll("button[data-modal-launch]");if(e){for(var n=0;n<t.length;n++)t[n].addEventListener("click",function(e){var t=e.target.dataset.modalLaunch;if(document.querySelector(".modal[data-modal="+t+"]").classList.remove("modal--is-hidden"),document.body.classList.add("modal--is-open"),t="sign-up-form")for(var n=document.querySelectorAll('meta[property="article:tag"]'),a=0;a<n.length;a++)if(n[a].content.includes("John Deere")&&"John Deere Lawn Tractor"!==n[a].content){var o=n[a].content.split("John Deere ")[1];document.querySelector("#mce-MODEL").value=o.toUpperCase()}});for(n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.target.parentElement.parentElement.classList.add("modal--is-hidden"),document.body.classList.remove("modal--is-open")});document.addEventListener("keyup",function(e){if(27==e.keyCode){var t=document.querySelectorAll("div[data-modal]");document.body.classList.remove("modal--is-open");for(var n=0;n<t.length;n++)t[n].classList.add("modal--is-hidden")}})}}(),window.jQuery&&document.body.classList.contains("single-post")&&$("#mc-embedded-subscribe-form").on("submit",function(e){e.preventDefault();var t=$(this),n=t.find("#mce-EMAIL").val(),a=t.find("#mce-FNAME").val(),o=t.find("#mce-LNAME").val(),i=t.find("#mce-MODEL").val(),r=t.find("#mce-CURRENT_HR").val(),c=t.find("#mce-MOWING_TIM").val();c=c.split("(")[1].split(")")[0].toLowerCase(),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){},success:function(e){"success"!=e.result?$("#mc_embed_signup_scroll").prepend('<p style="border: 1px solid red; padding: 1rem;">'+e.msg+"</p>"):(t.hide(),$('div[data-modal="sign-up-form"] .modal-heading').text("Great "+a+"!").next().text("You will receive a confirmation email soon and we will keep you up to date on your needed parts.")),$.ajax({type:"POST",url:"https://api.flock.com/hooks/sendMessage/855832cd-bd79-436d-9f1f-dcf0020251dd",data:JSON.stringify({text:a+" "+o+" has a "+i+" with "+r+" hours and takes "+c+" to mow. Contact "+a+" at "+n}),dataType:"json",contentType:"application/json"})}})}),function(){var e=parseInt(window.getComputedStyle(document.querySelector("body")).getPropertyValue("font-size")),t=document.querySelector("#stickyNav");if(t){var n=window.scrollY,a=t.offsetTop,o=t.clientWidth;window.addEventListener("resize",function(){a=t.offsetTop,console.log(a)}),document.addEventListener("scroll",function(){n=window.scrollY,a-3*e<n?(t.classList.add("nav--is-sticky"),t.style.maxWidth=o+"px"):t.classList.remove("nav--is-sticky")})}}(),function(){var e=parseInt(window.getComputedStyle(document.querySelector("body")).getPropertyValue("font-size")),t=document.querySelector(".sticky--container"),n=document.querySelector(".sticky--element");if(t&&n&&!(window.innerWidth<960)){var a=t.parentElement.children;Array.from(a).forEach(function(e){e.classList.contains("sticky--container")||(a=e)});var o=a.offsetWidth,i=(t.offsetHeight,t.offsetTop),r=n.offsetWidth,c=(n.offsetHeight,window.scrollY);setTimeout(s,200),window.addEventListener("scroll",function(e){c=window.scrollY,s()})}function s(){i-3*e<c&&(n.classList.add("sticky--element--is-fixed"),n.style.maxWidth=r+"px",n.style.transform="translateY("+3*e+"px)",a.style.maxWidth=o+"px"),c<i-3*e&&(n.classList.remove("sticky--element--is-fixed"),n.style.transform="translateY(0)")}}(),function(){if(document.body.classList.contains("woocommerce-cart")){var e=document.querySelector(".gfp-cart--list"),t=document.querySelector('button[name="update_cart"]'),i=document.querySelector(".cart-subtotal td"),r=document.querySelector(".order-total td strong"),c=document.querySelectorAll(".cart-discount");t&&t.remove(),e.addEventListener("change",function(e){"INPUT"===e.target.tagName&&function(e){console.log("update line item price");var t=e.parentElement.parentElement.parentElement,n=t.querySelector(".regular-price"),a=t.querySelector(".sale-price");n.textContent=(n.dataset.price*e.value).toFixed(2),a&&(a.textContent="$"+(a.dataset.salePrice*e.value).toFixed(2));i.textContent="Updating...",r.textContent="Updating...",c.forEach(function(e){var t=e.dataset.discountType;"coupon-percent"===t&&(e.querySelector("td[data-title]").textContent="Updating...")}),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"increment_item_in_cart",product_id:t.dataset.productid,qty:e.value}}).then(function(){o()})}(e.target)}),e.addEventListener("click",function(t){"remove"===t.target.className&&(t.preventDefault(),i.textContent="Updating...",r.textContent="Updating...",atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"remove_item_from_cart",product_id:t.target.dataset.product_id}}).then(function(e){console.log(e.data),t.target.parentElement.remove(),o()}))})}function o(){console.log("update cart totals"),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"get_cart"}}).then(function(e){var t=Object.values(JSON.parse(e.data.slice(0,-1))),o=0,n=0;t.forEach(function(e){o+=e.line_subtotal,n+=e.line_total}),c.forEach(function(e){var t=e.dataset.discountType,n=e.dataset.discountAmount;if("coupon-percent"===t){var a=o*(n/100);e.querySelector("td[data-title]").textContent="-$"+a.toFixed(2)}}),i.textContent="$"+o.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r.textContent="$"+n.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")})}}(),function(){var t=document.querySelector("#ship-to-different-address-checkbox"),n=document.querySelector(".shipping-details--is-hidden");t&&t.addEventListener("change",function(e){t.checked?n.classList.remove("shipping-details--is-hidden"):n.classList.add("shipping-details--is-hidden")})}(),function(){var e=document.querySelector(".global-search-bar form");if(e){var t=e.querySelector('input[type="text"]'),n=document.querySelector(".global-search-bar .default"),a=document.querySelector(".search-results");t.addEventListener("focus",o),t.addEventListener("blur",o),t.addEventListener("keyup",function(e){var t=this.value.length;3<=t?(n.classList.add("visually-hidden"),console.log("start searching")):(n.querySelector(".search-characters").textContent=3-t,n.classList.remove("visually-hidden"))})}function o(){a.classList.contains("visually-hidden")?a.classList.remove("visually-hidden"):a.classList.add("visually-hidden")}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0b21pYy5taW4uanMiLCJzaXRlLWhlYWRlci5qcyIsInNpbmdsZS1wb3N0LmpzIiwic2luZ2xlLXByb2R1Y3QuanMiLCJzaW5nbGUtY29tbWVudHMuanMiLCJwb3N0LWxpc3RpbmcuanMiLCJhamF4LWFkZC10by1jYXJ0LmpzIiwiYWNjb3JkaWFuLmpzIiwidG9vbHRpcC5qcyIsIm1vZGFsLmpzIiwic2lnbi11cC1mb3JtLmpzIiwic3RpY2t5LW5hdmlnYXRpb24uanMiLCJzdGlja3kuanMiLCJjYXJ0LmpzIiwiY2hlY2tvdXQuanMiLCJzZWFyY2gtYmFyLmpzIl0sIm5hbWVzIjpbInQiLCJlIiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIndpbmRvdyIsImF0b21pYyIsImdsb2JhbCIsInRoaXMiLCJuIiwibWV0aG9kIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRhdGEiLCJoZWFkZXJzIiwiQ29udGVudC10eXBlIiwicmVzcG9uc2VUeXBlIiwidGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsInIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImEiLCJYTUxIdHRwUmVxdWVzdCIsIm8iLCJQcm9taXNlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwieGhyIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicyIsInN0YXR1c1RleHQiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9udGltZW91dCIsInNlbmQiLCJ0ZXN0Iiwic3RyaW5naWZ5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJpIiwiY2FuY2VsIiwiYWJvcnQiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZU1lbnUiLCJoZWFkZXJIZWlnbnQiLCJvZmZzZXRIZWlnaHQiLCJzdHlsZSIsInRvcCIsImhlYWRlclRvcEJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TGV2ZWxPbmUiLCJjbGFzc0xpc3QiLCJhZGQiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGYiLCJ0YXJnZXQiLCJjaGlsZE1lbnUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjb250YWlucyIsInJlbW92ZSIsInBhcmVudEVsZW1lbnQiLCJhbGxMZXZlbE9uZUxpbmtzIiwibGlua3MiLCJqIiwiYm9keSIsInRvZ2dsZSIsIm1vZGVsTW9kaWZlclNlbGVjdCIsImxvYyIsInZhbHVlIiwibG9jYXRpb24iLCJocmVmIiwiYWxsUm93cyIsImRhdGFzZXQiLCJwcm9kdWN0U29sZCIsImltZ0V4aXN0cyIsImltZ1BhdGgiLCJwcm9kdWN0SW1hZ2UiLCJwcm9kSW1nIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsInByb2RJbWdDb250YWluZXIiLCJhcHBlbmRDaGlsZCIsIm1haW50ZW5hbmNlS2l0Q29udGFpbmVyIiwib25sb2FkIiwib2Zmc2V0VG9wIiwiYmFzZUZvbnRTaXplIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImZvbnRTaXplIiwicGFyc2VJbnQiLCJzcGxpdCIsInNjcm9sbFkiLCJTdHJpbmciLCJpbmNsdWRlcyIsInNlYXJjaCIsInN0YXJ0IiwiaW5kZXhPZiIsIkVsZW1lbnQiLCJDaGFyYWN0ZXJEYXRhIiwiRG9jdW1lbnRUeXBlIiwiZm9yRWFjaCIsIml0ZW0iLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIkFycmF5Iiwic2VhcmNoRWxlbWVudCIsImZyb21JbmRleCIsIlR5cGVFcnJvciIsImxlbiIsIngiLCJ5IiwiayIsIk1hdGgiLCJtYXgiLCJhYnMiLCJpc05hTiIsImZpdG1lbnRUZXh0RmlsdGVyIiwicHJvZHVjdEZpdG1lbnRUYWdzIiwidG9VcHBlckNhc2UiLCJ0ZXh0Q29udGVudCIsImNvbW1lbnRzQ29udGFpbmVyIiwiY29tbWVudHNSZXBseSIsImJ1dHRvbiIsImlubmVySFRNTCIsImlkIiwidmlzaWJpbGl0eSIsIm1heEhlaWdodCIsInBhZGRpbmciLCJtYXJnaW5Ub3AiLCJvcGFjaXR5IiwibG9hZFBvc3RzIiwib2Zmc2V0IiwicG9zdExpc3RpbmciLCJ1cmwiLCJvcmlnaW4iLCJjYXQiLCJjb25zb2xlIiwibG9nIiwiZGlzYWJsZWQiLCJ0aGVuIiwicG9zdE9iaiIsImRhdGUiLCJhdXRob3IiLCJjYXRlZ29yeSIsImNhdGVnb3JpZXMiLCJ0aXRsZSIsInJlbmRlcmVkIiwidGFncyIsImxpbmsiLCJkZXNjcmlwdGlvbiIsImV4Y2VycHQiLCJzbGljZSIsInBvc3RUaW1lIiwicG9zdFByZXR0eVRpbWUiLCJEYXRlIiwidG9EYXRlU3RyaW5nIiwicG9zdFRpdGxlIiwicG9zdENhdGVnb3J5IiwicG9zdExpbmsiLCJwb3N0RGVzY3JpcHRpb24iLCJjYXJkIiwiY2F0Y2giLCJlcnJvciIsInByb2R1Y3RMaXN0RmlsdGVycyIsImJyYW5kcyIsInNlbGVjdGVkQnJhbmRzIiwiYnJhbmQiLCJjaGVja2VkIiwicHJvZHVjdCIsImNhcnREcmF3ZXIiLCJjYXJ0T3BlbiIsImNhcnRMaXN0IiwiY2FydEhlYWRlciIsIm1hdGNoZXMiLCJ1cGRhdGVDYXJ0SGVhZGVyQ291bnQiLCJpbmRleCIsInBhcmVudCIsImFjdGlvbiIsInByb2R1Y3RfaWQiLCJwcm9kdWN0aWQiLCJjaGlsZHJlbiIsInJlbW92ZWZyb21DYXJ0IiwiZWxlbWVudENoYW5nZWQiLCJwcm9kdWN0SUQiLCJxdHkiLCJkaXNwbGF5Q2FydCIsImRpc3BsYXlNaW5pbWl6ZWRDYXJ0IiwiYWRkVG9DYXJ0QnV0dG9ucyIsImVsZW0iLCJza3UiLCJpdGVtQXJyYXkiLCJ0YWJsZSIsIm1hcCIsInNhbGVQcmljZSIsInBlcm1hbGluayIsIm5hbWUiLCJwcmljZSIsInNldFRpbWVvdXQiLCJhZGRUb0NhcnQiLCJkaXJlY3Rpb24iLCJjdXJyZW50Q291bnQiLCJpbm5lclRleHQiLCJpc01pbmltaXplZCIsImFjY29yZGlhbkJ1dHRvbnMiLCJhbGxUb29sVGlwcyIsImNsb3NlTW9kYWwiLCJsYXVuY2hNb2RhbCIsIm1vZGFsSUQiLCJtb2RhbExhdW5jaCIsInBhZ2VUYWdzIiwiY29udGVudCIsIm1vZGVsIiwia2V5Q29kZSIsImpRdWVyeSIsIiQiLCJvbiIsIiR0aGlzIiwiZW1haWwiLCJmaW5kIiwidmFsIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJtb2RlbE51bWJlciIsImN1cnJlbnRIb3VycyIsIm1vd2luZ1RpbWUiLCJ0b0xvd2VyQ2FzZSIsImFqYXgiLCJ0eXBlIiwiYXR0ciIsInNlcmlhbGl6ZSIsImNhY2hlIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsImVyciIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJwcmVwZW5kIiwibXNnIiwiaGlkZSIsInRleHQiLCJuZXh0IiwiZ2V0UHJvcGVydHlWYWx1ZSIsIm5hdiIsIm5hdk9mZnNldCIsIm5hdldpZHRoIiwiY2xpZW50V2lkdGgiLCJtYXhXaWR0aCIsInN0aWNreUNvbnRhaW5lciIsInN0aWNreUVsZW1lbnQiLCJzdGlja3lTaWJsaW5nIiwiZnJvbSIsImNoaWxkIiwic3RpY2t5U2libGluZ1dpZHRoIiwib2Zmc2V0V2lkdGgiLCJzdGlja3lDb250YWluZXJUb3AiLCJzdGlja3lFbGVtZW50V2lkdGgiLCJ3YXRjaEZvclN0aWNreSIsInRyYW5zZm9ybSIsInVwZGF0ZUNhcnRCdXR0b24iLCJjYXJ0U3VidG90YWwiLCJjYXJ0VG90YWwiLCJjb3Vwb25zIiwidGFnTmFtZSIsIml0ZW1EZXRhaWxzIiwicmVndWxhclByaWNlIiwidG9GaXhlZCIsImNvdXBvbiIsImNvdXBvblR5cGUiLCJkaXNjb3VudFR5cGUiLCJ1cGRhdGVDYXJ0VG90YWxzIiwidXBkYXRlTGluZUl0ZW1QcmljZSIsImNsYXNzTmFtZSIsImNhcnQiLCJ2YWx1ZXMiLCJjYXJ0U3VidG90YWxBbW91bnQiLCJjYXJ0VG90YWxBbW91bnQiLCJsaW5lX3N1YnRvdGFsIiwibGluZV90b3RhbCIsImNvdXBvbkFtb3VudCIsImRpc2NvdW50QW1vdW50IiwiZGlzY291bnQiLCJyZXBsYWNlIiwic2hpcFRvRGlmZmVyZW50Iiwic2hpcERldGFpbHMiLCJzZWFyY2hCYXIiLCJzZWFyY2hJbnB1dCIsImRlZmF1bHRUZXh0Iiwic2VhcmNoUmVzdWx0cyIsInNob3dEZWZhdWx0UmVzdWx0cyIsInNlYXJjaElucHV0TGVuZ3RoIl0sIm1hcHBpbmdzIjoiQ0FDQSxTQUFBQSxFQUFBQyxHQUFBLG1CQUFBQyxRQUFBQSxPQUFBQyxJQUFBRCxPQUFBLEdBQUEsV0FBQSxPQUFBRCxFQUFBRCxLQUFBLGlCQUFBSSxRQUFBQyxPQUFBRCxRQUFBSCxFQUFBRCxHQUFBTSxPQUFBQyxPQUFBTixFQUFBRCxHQUFBLENBQUEsb0JBQUFRLE9BQUFBLE9BQUEsb0JBQUFGLE9BQUFBLE9BQUFHLEtBQUEsU0FBQVQsR0FBQSxhQUFBLElBQUFDLEVBQUFTLEVBQUEsQ0FBQUMsT0FBQSxNQUFBQyxTQUFBLEtBQUFDLFNBQUEsS0FBQUMsS0FBQSxHQUFBQyxRQUFBLENBQUFDLGVBQUEscUNBQUFDLGFBQUEsT0FBQUMsUUFBQSxLQUFBQyxpQkFBQSxHQUFBQyxFQUFBLFdBQUEsSUFBQSxJQUFBcEIsRUFBQSxHQUFBQyxFQUFBLEVBQUFBLEVBQUFvQixVQUFBQyxPQUFBckIsSUFBQSxFQUFBLFNBQUFBLEdBQUEsSUFBQSxJQUFBUyxLQUFBVCxFQUFBQSxFQUFBc0IsZUFBQWIsS0FBQSxvQkFBQWMsT0FBQUMsVUFBQUMsU0FBQUMsS0FBQTFCLEVBQUFTLElBQUFWLEVBQUFVLEdBQUFVLEVBQUFwQixFQUFBVSxHQUFBVCxFQUFBUyxJQUFBVixFQUFBVSxHQUFBVCxFQUFBUyxJQUFBLENBQUFXLFVBQUFwQixJQUFBLE9BQUFELEdBQUE0QixFQUFBLFNBQUE1QixHQUFBLElBQUFVLEVBQUEsSUFBQW1CLGVBQUFDLEVBQUEsSUFBQUMsUUFB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QSwrQkFIQW1PLEVBQUEzTyxVQUFBQyxJQUFBLGlDQVJBLEdDQUEsV0FFQSxJQUFBMk8sRUFBQXZQLFNBQUFDLGNBQUEsMkJBQ0EsR0FBQXNQLEVBQUEsQ0FJQSxJQUFBQyxFQUFBRCxFQUFBdFAsY0FBQSxzQkFDQXdQLEVBQUF6UCxTQUFBQyxjQUFBLCtCQUNBeVAsRUFBQTFQLFNBQUFDLGNBQUEsbUJBRUF1UCxFQUFBdFAsaUJBQUEsUUFBQXlQLEdBQ0FILEVBQUF0UCxpQkFBQSxPQUFBeVAsR0FFQUgsRUFBQXRQLGlCQUFBLFFBVUEsU0FBQXhELEdBQ0EsSUFBQWtULEVBQUExUyxLQUFBMEUsTUFBQTdELE9BSUEsR0FBQTZSLEdBR0FILEVBQUE5TyxVQUFBQyxJQUFBLG1CQUVBdUYsUUFBQUMsSUFBQSxxQkFLQXFKLEVBQUF4UCxjQUFBLHNCQUFBaUYsWUFBQSxFQUFBMEssRUFHQUgsRUFBQTlPLFVBQUFRLE9BQUEsc0JBMUJBLFNBQUF3TyxJQUNBRCxFQUFBL08sVUFBQU8sU0FBQSxtQkFDQXdPLEVBQUEvTyxVQUFBUSxPQUFBLG1CQUdBdU8sRUFBQS9PLFVBQUFDLElBQUEsb0JBckJBIiwiZmlsZSI6Imdsb2JhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBhdG9taWMgdjQuMi4xIHwgKGMpIDIwMTggQ2hyaXMgRmVyZGluYW5kaSB8IE1JVCBMaWNlbnNlIHwgaHR0cHM6Ly9naXRodWIuY29tL2NmZXJkaW5hbmRpL2F0b21pYyAqL1xuIShmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sKGZ1bmN0aW9uKCl7cmV0dXJuIGUodCl9KSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0KTp3aW5kb3cuYXRvbWljPWUodCl9KShcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLChmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZSxuPXttZXRob2Q6XCJHRVRcIix1c2VybmFtZTpudWxsLHBhc3N3b3JkOm51bGwsZGF0YTp7fSxoZWFkZXJzOntcIkNvbnRlbnQtdHlwZVwiOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJ9LHJlc3BvbnNlVHlwZTpcInRleHRcIix0aW1lb3V0Om51bGwsd2l0aENyZWRlbnRpYWxzOiExfSxvPWZ1bmN0aW9uKCl7cmV0dXJuXCJYTUxIdHRwUmVxdWVzdFwiaW4gdCYmXCJKU09OXCJpbiB0JiZcIlByb21pc2VcImluIHR9LHI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9e30sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBuPWFyZ3VtZW50c1tlXTshKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJihcIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVbbl0pP3Rbbl09cih0W25dLGVbbl0pOnRbbl09ZVtuXSl9KShuKX1yZXR1cm4gdH0scz1mdW5jdGlvbih0KXt2YXIgbjtpZihcInRleHRcIiE9PWUucmVzcG9uc2VUeXBlJiZcIlwiIT09ZS5yZXNwb25zZVR5cGUpcmV0dXJue2RhdGE6dC5yZXNwb25zZSx4aHI6dH07dHJ5e249SlNPTi5wYXJzZSh0LnJlc3BvbnNlVGV4dCl9Y2F0Y2goZSl7bj10LnJlc3BvbnNlVGV4dH1yZXR1cm57ZGF0YTpuLHhocjp0fX0saT1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdHx8XCJbb2JqZWN0IEZvcm1EYXRhXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXJldHVybiB0O2lmKC9hcHBsaWNhdGlvblxcL2pzb24vaS50ZXN0KGUuaGVhZGVyc1tcIkNvbnRlbnQtdHlwZVwiXSl8fFwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSlyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7dmFyIG49W107Zm9yKHZhciBvIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShvKSYmbi5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChvKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQodFtvXSkpO3JldHVybiBuLmpvaW4oXCImXCIpfSxhPWZ1bmN0aW9uKHQpe3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdCxvPW5ldyBQcm9taXNlKGZ1bmN0aW9uKG8scil7bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09bi5yZWFkeVN0YXRlJiYobi5zdGF0dXM+PTIwMCYmbi5zdGF0dXM8MzAwP28ocyhuKSk6cih7c3RhdHVzOm4uc3RhdHVzLHN0YXR1c1RleHQ6bi5zdGF0dXNUZXh0fSkpfSxuLm9wZW4oZS5tZXRob2QsdCwhMCxlLnVzZXJuYW1lLGUucGFzc3dvcmQpLG4ucmVzcG9uc2VUeXBlPWUucmVzcG9uc2VUeXBlO2Zvcih2YXIgYSBpbiBlLmhlYWRlcnMpZS5oZWFkZXJzLmhhc093blByb3BlcnR5KGEpJiZuLnNldFJlcXVlc3RIZWFkZXIoYSxlLmhlYWRlcnNbYV0pO2UudGltZW91dCYmKG4udGltZW91dD1lLnRpbWVvdXQsbi5vbnRpbWVvdXQ9ZnVuY3Rpb24odCl7cih7c3RhdHVzOjQwOCxzdGF0dXNUZXh0OlwiUmVxdWVzdCB0aW1lb3V0XCJ9KX0pLGUud2l0aENyZWRlbnRpYWxzJiYobi53aXRoQ3JlZGVudGlhbHM9ITApLG4uc2VuZChpKGUuZGF0YSkpfSk7cmV0dXJuIG8uY2FuY2VsPWZ1bmN0aW9uKCl7bi5hYm9ydCgpfSxvfTtyZXR1cm4gZnVuY3Rpb24odCxzKXtpZighbygpKXRocm93XCJBdG9taWM6IFRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSBtZXRob2RzIHVzZWQgaW4gdGhpcyBwbHVnaW4uXCI7cmV0dXJuIGU9cihuLHN8fHt9KSxhKHQpfX0pKTsiLCJpZiAod2luZG93LmlubmVyV2lkdGggPiAxMDgwKSB7XG4gICAgLy8gJCgnLm1lbnUtaXRlbS0tdG9wLWxldmVsIC5zdWItbWVudS0tbGV2ZWwtb25lID4gbGk6Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnYWN0aXZlJykuZmluZCgnLnN1Yi1tZW51LS1sZXZlbC10d28nKS5hZGRDbGFzcygnYWNjb3JkaWFuLW9wZW4nKTtcbiAgICAvLyBhbGVydCgndGFkJyk7XG59XG5cblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uI2hhbWJ1cmdlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICB0b2dnbGVNZW51KCk7XG4gIHZhciBoZWFkZXJIZWlnbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1oZWFkZXInKS5vZmZzZXRIZWlnaHQ7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC16ZXJvJykuc3R5bGUudG9wID0gaGVhZGVySGVpZ250ICsgJ3B4Jztcbn0pO1xuXG52YXIgaGVhZGVyVG9wQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uLS1idXR0b24nKTtcbnZhciBuYXZMZXZlbE9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBuYXZMZXZlbE9uZS5sZW5ndGg7IGkrKykge1xuICBuYXZMZXZlbE9uZVtpXS5xdWVyeVNlbGVjdG9yKCdsaTpmaXJzdC1jaGlsZCBhJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG59XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVyVG9wQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICBoZWFkZXJUb3BCdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHNlbGYgPSBlLnRhcmdldDtcbiAgICB2YXIgY2hpbGRNZW51ID0gc2VsZi5uZXh0RWxlbWVudFNpYmxpbmcucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tLWxldmVsLW9uZScpO1xuICAgIGlmIChjaGlsZE1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgY2hpbGRNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgc2VsZi5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgc2VsZi5uZXh0RWxlbWVudFNpYmxpbmcucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tLWxldmVsLW9uZScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhzZWxmLnBhcmVudEVsZW1lbnQpO1xuICAgIC8vIHNlbGYucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tLWxldmVsLW9uZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICB9KTtcbn1cblxudmFyIGFsbExldmVsT25lTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lID4gbGkgPiBhJyk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgYWxsTGV2ZWxPbmVMaW5rcy5sZW5ndGg7IGkrKykge1xuICBhbGxMZXZlbE9uZUxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lID4gbGkgPiBhJyk7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5rcy5sZW5ndGg7IGorKykge1xuICAgICAgbGlua3Nbal0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfVxuICAgIC8vIGlmIChhbGxMZXZlbE9uZUxpbmtzLmNsYXNzTGlzdC5jb250YWlucygnJykpIHt9XG4gICAgLy8gYWxsTGV2ZWxPbmVMaW5rcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lID4gbGkgPiBhJykpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ21lbnUtb3BlbicpO1xuICAgIHZhciBtZW51QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hhbWJ1cmdlcicpO1xuICAgIG1lbnVCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XG59IiwiKGZ1bmN0aW9uKCkge1xuXG4gIC8vIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2luZ2xlLXBvc3QnKSkge1xuXG4gIC8vICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1pdGVtJykpIHtcbiAgLy8gICAgIHZhciBhbGVydENhcnRJdGVtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtaXRlbScpLmlubmVySFRNTDtcbiAgLy8gICB9XG4gIC8vICAgdmFyIGFkZGVkUHJvZHVjdHMgPSBbXTtcblxuICAvLyAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpKSB7XG4gIC8vICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpLmlubmVySFRNTCA9ICcnO1xuICAvLyAgIH1cblxuICAvLyB9XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIE1JTklaRVMgQUxFUlQgT04gUEFHRSBMT0FEIElGIENPT0tJRSBQUkVTRU5UXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICAvLyBpZiAoZG9jdW1lbnQuY29va2llLnNwbGl0KCc7JykuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgLy8gICByZXR1cm4gaXRlbS5pbmRleE9mKCdjYXJ0VVJMPScpID49IDBcbiAgLy8gfSkubGVuZ3RoKSB7XG4gIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1hZGQtdG8tY2FydCcpLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgLy8gfVxuXG4gIFxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBDSEFOR0UgUEFHRSBXSEVOIFNFTEVDVEVEIE1PREVMIE1PRElGSUVSXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIHZhciBtb2RlbE1vZGlmZXJTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kZWxNb2RpZmllcnMnKTtcbiAgdmFyIG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFpbl9jb250ZW50Jyk7XG5cbiAgaWYgKG1vZGVsTW9kaWZlclNlbGVjdCkge1xuICAgIG1vZGVsTW9kaWZlclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgbG9jID0gZS50YXJnZXQudmFsdWU7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGxvYztcbiAgICB9KTtcbiAgfVxuXG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBTSE9XIFBST0RVQ1QgSU1BR0UgT04gSE9WRVJcbiAgQG5vdGUgPSBPbmx5IHJ1bnMgb24gc2NyZWVuIGxhcmdlciB0aGFuIDEwODBweFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2luZ2xlLXBvc3QnKSkge1xuICAgIHZhciBhbGxSb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGFibGUgdHInKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsUm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgYWxsUm93c1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoKHdpbmRvdy5pbm5lcldpZHRoIDwgMTA4MCkgfHwgKGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkJykuZGF0YXNldC5wcm9kdWN0U29sZCA9PT0gJ2ZhbHNlJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW1nRXhpc3RzID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQgLnByb2R1Y3QtaW1hZ2UtY29udGFpbmVyJyk7XG4gICAgICAgIGlmIChpbWdFeGlzdHMpIHtcbiAgICAgICAgICBpbWdFeGlzdHMuY2xhc3NMaXN0LnJlbW92ZSgncHJvZHVjdC1pbWFnZS0taXMtaGlkZGVuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGltZ1BhdGggPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmRhdGFzZXQucHJvZHVjdEltYWdlO1xuICAgICAgICB2YXIgcHJvZEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBwcm9kSW1nLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW1hZ2UnKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgaW1nUGF0aCA9PT0gJ3VuZGVmaW5lZCcpIHsgXG4gICAgICAgICAgcHJvZEltZy5zcmMgPSAnaHR0cHM6Ly9jZG4zLnZvbHVzaW9uLmNvbS95eGhmZS5kZnFldy92L3ZzcGZpbGVzL3RlbXBsYXRlcy9nZnAtdGVzdC9pbWFnZXMvbm9waG90by5naWYnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2RJbWcuc3JjID0gaW1nUGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcm9kSW1nQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHByb2RJbWdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1pbWFnZS1jb250YWluZXInKTtcbiAgICAgICAgcHJvZEltZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9kSW1nKTtcbiAgICAgICAgXG4gICAgICAgIHZhciB0YWJsZUNlbGwgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmFwcGVuZENoaWxkKHByb2RJbWdDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgIH0pO1xuXG4gICAgICBhbGxSb3dzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkIC5wcm9kdWN0LWltYWdlLWNvbnRhaW5lcicpLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW1hZ2UtLWlzLWhpZGRlbicpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cblxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQURESU5HIFBST0RVQ1QgVE8gQ0FSVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAvLyAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgXG4gIC8vICAgaWYgKHNlbGYuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtdG8tY2FydCcpKSB7XG5cbiAgLy8gICAgIHZhciBhbGVydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKTtcbiAgLy8gICAgIHZhciBwYXJ0VHlwZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmlubmVyVGV4dDtcbiAgLy8gICAgIHZhciBwYXJ0TnVtYmVyID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RkOm50aC1jaGlsZCgyKScpLmlubmVyVGV4dDtcblxuICAvLyAgICAgaWYgKGFkZGVkUHJvZHVjdHMuaW5jbHVkZXMocGFydE51bWJlcikpIHtcbiAgLy8gICAgICAgcmV0dXJuO1xuICAvLyAgICAgfVxuXG4gIC8vICAgICBhZGRlZFByb2R1Y3RzLnB1c2gocGFydE51bWJlcik7XG5cbiAgLy8gICAgIHZhciBhZGRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2xpJyApO1xuICAvLyAgICAgYWRkSXRlbS5jbGFzc0xpc3QuYWRkKCdhbGVydC0tY2FydC1pdGVtJyk7XG4gIC8vICAgICBhZGRJdGVtLmRhdGFzZXQucHJvZHVjdGNvZGUgPSBwYXJ0TnVtYmVyO1xuICAvLyAgICAgYWRkSXRlbS5pbm5lckhUTUwgPSBhbGVydENhcnRJdGVtVGVtcGxhdGU7XG5cbiAgLy8gICAgIGFkZEl0ZW0ucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LXBhcnQtbnVtYmVyJykuaW5uZXJUZXh0ID0gcGFydE51bWJlcjtcbiAgLy8gICAgIGFkZEl0ZW0ucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LXBhcnQtdHlwZScpLmlubmVyVGV4dCA9IHBhcnRUeXBlO1xuXG4gIC8vICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpLmFwcGVuZENoaWxkKGFkZEl0ZW0pO1xuICAgICAgXG5cbiAgLy8gICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1hY3RpdmUnKTtcblxuICAvLyAgICAgaWYgKGFsZXJ0LmNsYXNzTGlzdC5jb250YWlucygnYWxlcnQtLWlzLW1pbmltaXplZCcpKSB7XG4gIC8vICAgICAgIGFsZXJ0LmNsYXNzTGlzdC5yZW1vdmUoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfSk7XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICBUT0dHTEUgQ0FSVCBBTEVSVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIC8vIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2xvc2VBbGVydCcpKSB7XG4gIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlQWxlcnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgLy8gICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gIC8vICAgICB2YXIgY29udGFpbmVyID0gc2VsZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIC8vICAgICB2YXIgY2xhc3NlcyA9IGNvbnRhaW5lci5jbGFzc0xpc3QudG9TdHJpbmcoKTtcblxuICAvLyAgICAgaWYgKGNsYXNzZXMuaW5jbHVkZXMoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKSAmJiBjbGFzc2VzLmluY2x1ZGVzKCdhbGVydC0taXMtYWN0aXZlJykpIHtcbiAgLy8gICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gIC8vICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtYWN0aXZlJyk7XG4gIC8vICAgICB9XG4gIC8vICAgfSk7XG4gIC8vIH1cblxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgUkVNT1ZFIElURU0gRlJPTSBDQVJUXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gIC8vICAgdmFyIHNlbGYgPSBlLnRhcmdldDtcbiAgLy8gICBpZiAoc2VsZi5jbGFzc0xpc3QuY29udGFpbnMoJ2FsZXJ0LS1yZW1vdmUtaXRlbScpKSB7XG4gIC8vICAgICB2YXIgcHJvZHVjdENvZGUgPSBzZWxmLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0LnByb2R1Y3Rjb2RlO1xuICAvLyAgICAgdmFyIGluZGV4ID0gYWRkZWRQcm9kdWN0cy5pbmRleE9mKHByb2R1Y3RDb2RlKTtcbiAgLy8gICAgIGFkZGVkUHJvZHVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgLy8gICAgIHNlbGYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpOyBcbiAgLy8gICB9XG4gIC8vIH0pO1xuXG5cblxuICAvLyBmdW5jdGlvbiBidWlsZENhcnRTdHJpbmcoKSB7XG4gIC8vICAgdmFyIGluaXRVUkwgPSAnaHR0cHM6Ly93d3cuZ3JlZW5mYXJtcGFydHMuY29tL3Nob3BwaW5nY2FydC5hc3A/JztcbiAgLy8gICB2YXIgYWxsQWRkZWRQcm9kdWN0cyA9IFtdO1xuICAvLyAgIHZhciBhbGxBZGRlZEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsZXJ0LS1jYXJ0LWl0ZW0nKTtcblxuICAvLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsQWRkZWRJdGVtcy5sZW5ndGg7IGkrKykge1xuICAvLyAgICAgdmFyIHByb2R1Y3RDb2RlID0gYWxsQWRkZWRJdGVtc1tpXS5kYXRhc2V0LnByb2R1Y3Rjb2RlO1xuICAvLyAgICAgdmFyIHByb2R1Y3RRdHkgPSBhbGxBZGRlZEl0ZW1zW2ldLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJwcm9kdWN0X3F1YW50aXR5XCJdJykudmFsdWU7XG4gIC8vICAgICBhbGxBZGRlZFByb2R1Y3RzLnB1c2goe1xuICAvLyAgICAgICBwcm9kdWN0Q29kZTogcHJvZHVjdENvZGUsXG4gIC8vICAgICAgIHByb2R1Y3RRdHk6IHByb2R1Y3RRdHlcbiAgLy8gICAgIH0pO1xuICAvLyAgIH1cblxuICAvLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsQWRkZWRQcm9kdWN0cy5sZW5ndGg7IGkrKykge1xuICAvLyAgICAgaWYgKGkgPCAxKSB7XG4gIC8vICAgICAgIGluaXRVUkwgPSBpbml0VVJMICsgJ3Byb2R1Y3Rjb2RlPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RDb2RlICsgJyZRVFkuJyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdENvZGUgKyAnPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RRdHk7XG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICBpbml0VVJMID0gaW5pdFVSTCArICcmcHJvZHVjdGNvZGU9JyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdENvZGUgKyAnJlFUWS4nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0Q29kZSArICc9JyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdFF0eTtcbiAgLy8gICAgIH1cbiAgLy8gICB9XG5cbiAgLy8gICByZXR1cm4gaW5pdFVSTDtcbiAgLy8gfVxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBDSEVDS09VVCAtIFNlbmQgcHJvZHVjdHMgdG8gVm9sdXNpb25cbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIC8vIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0Q2hlY2tvdXQnKSAmJiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2luZ2xlLXBvc3QnKSkge1xuICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXRDaGVja291dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAvLyAgICAgLy8gY2FydCB1cmwgdGVtcGxhdGU6IGh0dHBzOi8vd3d3LmdyZWVuZmFybXBhcnRzLmNvbS9zaG9wcGluZ2NhcnQuYXNwP3Byb2R1Y3Rjb2RlPWpkemc5MDAmUVRZLmpkemc5MDA9NVxuICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBidWlsZENhcnRTdHJpbmcoKTtcbiAgLy8gICB9KTtcbiAgLy8gfVxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFNBVkUgRk9SIExBVEVSIC0gU2VuZCBwcm9kdWN0cyB0byBWb2x1c2lvbiBhbmQgY29va2llXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIC8vIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2F2ZUZvckxhdGVyJykpIHtcbiAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2F2ZUZvckxhdGVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gIC8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICAgICBkb2N1bWVudC5jb29raWUgPSAnY2FydFVSTD0nICsgYnVpbGRDYXJ0U3RyaW5nKCk7XG4gIC8vICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWFkZC10by1jYXJ0JykuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLW1pbmltaXplZCcpO1xuICAvLyAgIH0pO1xuICAvLyB9XG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgU1RJQ0tZIE1BSU5URU5BTkNFIEtJVCBCVVkgTk9XXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuXG4gIHZhciBtYWludGVuYW5jZUtpdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWludGVuYW5jZS1raXQtY29udGFpbmVyJyk7XG4gIGlmIChtYWludGVuYW5jZUtpdENvbnRhaW5lciAmJiB3aW5kb3cuaW5uZXJXaWR0aCA+IDEwODApIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2Zmc2V0VG9wID0gbWFpbnRlbmFuY2VLaXRDb250YWluZXIub2Zmc2V0VG9wO1xuICAgICAgdmFyIGJhc2VGb250U2l6ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHksIG51bGwpLmZvbnRTaXplO1xuICAgICAgYmFzZUZvbnRTaXplID0gcGFyc2VJbnQoYmFzZUZvbnRTaXplLnNwbGl0KCdweCcpWzBdKTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gKG9mZnNldFRvcCAtIChiYXNlRm9udFNpemUgKiAzKSkpIHtcbiAgICAgICAgICBtYWludGVuYW5jZUtpdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtYWludGVuYW5jZS1raXQtY29udGFpbmVyLS1pcy1maXhlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA8IChvZmZzZXRUb3AgLSAoYmFzZUZvbnRTaXplICogMykpKSB7XG4gICAgICAgICAgbWFpbnRlbmFuY2VLaXRDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbWFpbnRlbmFuY2Uta2l0LWNvbnRhaW5lci0taXMtZml4ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cblxuXG59KSgpO1xuXG5cbi8qXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUE9MWUZJTEwgRk9SIHN0ci5pbmNsdWRlcygpXG5ATElOSyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvaW5jbHVkZXNcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuaWYgKCFTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKSB7XG4gIFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbihzZWFyY2gsIHN0YXJ0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgIT09ICdudW1iZXInKSB7XG4gICAgICBzdGFydCA9IDA7XG4gICAgfVxuICAgIFxuICAgIGlmIChzdGFydCArIHNlYXJjaC5sZW5ndGggPiB0aGlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5pbmRleE9mKHNlYXJjaCwgc3RhcnQpICE9PSAtMTtcbiAgICB9XG4gIH07XG59XG5cblxuLypcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUE9MWUZJTEwgRk9SIG5vZGUucmVtb3ZlKClcbkBMSU5LIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DaGlsZE5vZGUvcmVtb3ZlXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiovXG4oZnVuY3Rpb24gKGFycikge1xuICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KCdyZW1vdmUnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaXRlbSwgJ3JlbW92ZScsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudE5vZGUgIT09IG51bGwpXG4gICAgICAgICAgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKFtFbGVtZW50LnByb3RvdHlwZSwgQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUsIERvY3VtZW50VHlwZS5wcm90b3R5cGVdKTtcblxuXG5cbi8qXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblBPTFlGSUxMIEZPUiBhcnJheS5pbmNsdWRlc1xuQExJTksgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5jbHVkZXNcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbmlmICghQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdpbmNsdWRlcycsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24oc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG5cbiAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ0aGlzXCIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLlxuICAgICAgdmFyIG8gPSBPYmplY3QodGhpcyk7XG5cbiAgICAgIC8vIDIuIExldCBsZW4gYmUgPyBUb0xlbmd0aCg/IEdldChPLCBcImxlbmd0aFwiKSkuXG4gICAgICB2YXIgbGVuID0gby5sZW5ndGggPj4+IDA7XG5cbiAgICAgIC8vIDMuIElmIGxlbiBpcyAwLCByZXR1cm4gZmFsc2UuXG4gICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gTGV0IG4gYmUgPyBUb0ludGVnZXIoZnJvbUluZGV4KS5cbiAgICAgIC8vICAgIChJZiBmcm9tSW5kZXggaXMgdW5kZWZpbmVkLCB0aGlzIHN0ZXAgcHJvZHVjZXMgdGhlIHZhbHVlIDAuKVxuICAgICAgdmFyIG4gPSBmcm9tSW5kZXggfCAwO1xuXG4gICAgICAvLyA1LiBJZiBuIOKJpSAwLCB0aGVuXG4gICAgICAvLyAgYS4gTGV0IGsgYmUgbi5cbiAgICAgIC8vIDYuIEVsc2UgbiA8IDAsXG4gICAgICAvLyAgYS4gTGV0IGsgYmUgbGVuICsgbi5cbiAgICAgIC8vICBiLiBJZiBrIDwgMCwgbGV0IGsgYmUgMC5cbiAgICAgIHZhciBrID0gTWF0aC5tYXgobiA+PSAwID8gbiA6IGxlbiAtIE1hdGguYWJzKG4pLCAwKTtcblxuICAgICAgZnVuY3Rpb24gc2FtZVZhbHVlWmVybyh4LCB5KSB7XG4gICAgICAgIHJldHVybiB4ID09PSB5IHx8ICh0eXBlb2YgeCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHkgPT09ICdudW1iZXInICYmIGlzTmFOKHgpICYmIGlzTmFOKHkpKTtcbiAgICAgIH1cblxuICAgICAgLy8gNy4gUmVwZWF0LCB3aGlsZSBrIDwgbGVuXG4gICAgICB3aGlsZSAoayA8IGxlbikge1xuICAgICAgICAvLyBhLiBMZXQgZWxlbWVudEsgYmUgdGhlIHJlc3VsdCBvZiA/IEdldChPLCAhIFRvU3RyaW5nKGspKS5cbiAgICAgICAgLy8gYi4gSWYgU2FtZVZhbHVlWmVybyhzZWFyY2hFbGVtZW50LCBlbGVtZW50SykgaXMgdHJ1ZSwgcmV0dXJuIHRydWUuXG4gICAgICAgIGlmIChzYW1lVmFsdWVaZXJvKG9ba10sIHNlYXJjaEVsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYy4gSW5jcmVhc2UgayBieSAxLiBcbiAgICAgICAgaysrO1xuICAgICAgfVxuXG4gICAgICAvLyA4LiBSZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xufSIsIihmdW5jdGlvbigpIHtcbiAgXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgRklUTUVOVCBURVhUIEZJTFRFUlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG5cbiAgLy8gR2V0IFZhcnNcbiAgdmFyIGZpdG1lbnRUZXh0RmlsdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpdG1lbnQtdGV4dC1maWx0ZXInKSxcbiAgICAgIHByb2R1Y3RGaXRtZW50VGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaW5nbGUtLXBhcnQtZml0bWVudC1saXN0IGEnKTtcblxuICAvLyBDaGVjayB0aGF0IHBhZ2UgaGFzIHRleHQgZmlsdGVyXG4gIGlmIChmaXRtZW50VGV4dEZpbHRlcikge1xuICAgIGZpdG1lbnRUZXh0RmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHZhbHVlID0gZS50YXJnZXQudmFsdWUudG9VcHBlckNhc2UoKTtcbiAgICAgIC8vIExvb3Agb3ZlciBhbGwgZml0bWVudCBhbmQgYWRkL3JlbW92ZSBoaWRkZW4gY2xhc3NcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdEZpdG1lbnRUYWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHByb2R1Y3RGaXRtZW50VGFnc1tpXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBpZiAocHJvZHVjdEZpdG1lbnRUYWdzW2ldLnRleHRDb250ZW50LmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICAgIHByb2R1Y3RGaXRtZW50VGFnc1tpXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEFERCBQUk9EVUNUIFRPIENBUlRcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuXG4gIC8vIEdldCBWYXJzXG4gIC8vIHZhciBwcm9kdWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaW5nbGUtcHJvZHVjdC0tYWRkLXRvLWNhcnQtZm9ybScpLFxuICAvLyAgICAgYWRkUHJvZHVjdFRvQ2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaW5nbGUtcHJvZHVjdC0tYWRkLXRvLWNhcnQnKTtcbiAgXG4gIC8vIGlmIChhZGRQcm9kdWN0VG9DYXJ0KSB7XG5cbiAgLy8gICBhZGRQcm9kdWN0VG9DYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgICAgdmFyIGFkZFRvQ2FydERyYXdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKTtcbiAgICAgIFxuICAvLyAgICAgYXRvbWljKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnP2FkZC10by1jYXJ0PScgKyBlLnRhcmdldC52YWx1ZSlcbiAgLy8gICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgLy8gICAgICAgICBhZGRUb0NhcnREcmF3ZXIuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLWFjdGl2ZScpO1xuICAgICAgICAgIFxuICAvLyAgICAgICAgIGFkZFByb2R1Y3RUb0NhcnQoZS50YXJnZXQudmFsdWUpO1xuXG4gIC8vICAgICAgICAgZnVuY3Rpb24gYWRkUHJvZHVjdFRvQ2FydChwcm9kdWN0SUQpIHtcblxuICAvLyAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGNhcnQgaXRlbSB0ZW1wbGF0ZSBhbmQgY29weSB0aGUgc3RydWN0dXJlXG4gIC8vICAgICAgICAgICB2YXIgYWxlcnRDYXJ0SXRlbVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWl0ZW0nKS5pbm5lckhUTUw7XG5cbiAgLy8gICAgICAgICAgIHZhciBhZGRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2xpJyApO1xuICAvLyAgICAgICAgICAgYWRkSXRlbS5jbGFzc0xpc3QuYWRkKCdhbGVydC0tY2FydC1pdGVtJyk7XG4gIC8vICAgICAgICAgICBhZGRJdGVtLmRhdGFzZXQucHJvZHVjdElEID0gcHJvZHVjdElEO1xuICAvLyAgICAgICAgICAgYWRkSXRlbS5pbm5lckhUTUwgPSBhbGVydENhcnRJdGVtVGVtcGxhdGU7XG5cbiAgLy8gICAgICAgICAgIHZhciBwcm9kdWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbnRyeS10aXRsZScpLmlubmVyVGV4dDtcbiAgLy8gICAgICAgICAgIHZhciBwcm9kdWN0U0tVID0gcHJvZHVjdE5hbWUuc3BsaXQoJyAnKS5zcGxpY2UoLTEsIDEpO1xuICAvLyAgICAgICAgICAgdmFyIGNvbnNvbGlkYXRlZFByb2R1Y3ROYW1lID0gcHJvZHVjdE5hbWUucmVwbGFjZSgnSm9obiBEZWVyZSAnLCAnJykucmVwbGFjZShwcm9kdWN0U0tVLCAnJyk7XG5cbiAgLy8gICAgICAgICAgIGFkZEl0ZW0ucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LXBhcnQtbnVtYmVyJykuaW5uZXJUZXh0ID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJylbMl0udG9VcHBlckNhc2UoKTtcbiAgLy8gICAgICAgICAgIGFkZEl0ZW0ucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LXBhcnQtdHlwZScpLmlubmVyVGV4dCA9IGNvbnNvbGlkYXRlZFByb2R1Y3ROYW1lO1xuXG4gIC8vICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpLmFwcGVuZENoaWxkKGFkZEl0ZW0pO1xuICAvLyAgICAgICAgIH1cbiAgLy8gICAgICAgfSlcblxuICAvLyAgIH0pXG4gIC8vIH1cblxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcblxuICB2YXIgY29tbWVudHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2luZ2xlLWNvbW1lbnRzJyk7XG4gIHZhciBjb21tZW50c1JlcGx5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jlc3BvbmQnKTtcbiAgdmFyIGNvbW1lbnRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbW1lbnRmb3JtJyk7XG5cblxuICBpZiAoY29tbWVudHNSZXBseSkge1xuICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnQWRkIENvbW1lbnQnO1xuICAgIGJ1dHRvbi5pZCA9ICdhZGRDb21tZW50JztcblxuICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUubWF4SGVpZ2h0ID0gJzBweCc7XG4gICAgY29tbWVudHNSZXBseS5zdHlsZS5wYWRkaW5nID0gJzBweCc7XG4gICAgY29tbWVudHNSZXBseS5zdHlsZS5tYXJnaW5Ub3AgPSAnMHB4JztcblxuICAgIGNvbW1lbnRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkQ29tbWVudCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIHNlbGYgPSBlLnRhcmdldDtcbiAgICAgIHNlbGYuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUubWF4SGVpZ2h0ID0gJzEwMDBweCc7XG4gICAgICBjb21tZW50c1JlcGx5LnN0eWxlLnBhZGRpbmcgPSAnMXJlbSc7XG4gICAgICBjb21tZW50c1JlcGx5LnN0eWxlLm1hcmdpblRvcCA9ICczcmVtJztcbiAgICB9KVxuXG4gIH1cblxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcblxuICB2YXIgbG9hZFBvc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvYWRNb3JlUG9zdHMnKTtcblxuICBpZiAobG9hZFBvc3RzKSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gMTtcbiAgICAgIHZhciBwb3N0Q291bnQgPSAxMDtcbiAgICAgIHZhciBwb3N0TGlzdGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0LWxpc3RpbmctLWxpc3QnKTtcblxuICAgICAgbG9hZFBvc3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1qc29uL3dwL3YyL3Bvc3RzP29mZnNldD0nICsgKG9mZnNldCAqIHBvc3RDb3VudCk7XG4gICAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXRlZ29yeScpKSB7XG4gICAgICAgICAgICB2YXIgY2F0ID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjYXQpO1xuICAgICAgICAgICAgLy8gdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvd3AtanNvbi93cC92Mi9wb3N0cz9vZmZzZXQ9JyArIChvZmZzZXQgKiBwb3N0Q291bnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxvYWRQb3N0cy5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgbG9hZFBvc3RzLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgYXRvbWljKHVybClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICB2YXIgcG9zdE9iaiA9IFtdO1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcG9zdE9iai5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGFbaV0uZGF0ZSxcbiAgICAgICAgICAgICAgICAgIGF1dGhvcjogZGF0YVtpXS5hdXRob3IsXG4gICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YVtpXS5jYXRlZ29yaWVzWzBdLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IGRhdGFbaV0udGl0bGUucmVuZGVyZWQsXG4gICAgICAgICAgICAgICAgICB0YWdzOiBkYXRhW2ldLnRhZ3MsXG4gICAgICAgICAgICAgICAgICBsaW5rOiBkYXRhW2ldLmxpbmssXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YVtpXS5leGNlcnB0LnJlbmRlcmVkLnNsaWNlKDMsIC01KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGxvYWRQb3N0cy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBsb2FkUG9zdHMuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxlbmd0aCA8IDEwKSB7XG4gICAgICAgICAgICAgICAgbG9hZFBvc3RzLnRleHRDb250ZW50ID0gJ0FsbCBQb3N0cyBMb2FkZWQnO1xuICAgICAgICAgICAgICAgIGxvYWRQb3N0cy5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbG9hZFBvc3RzLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gcG9zdE9iajtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHBvc3RPYmopIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0T2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gYXNzaWduIGFsbCBkYXRhXG4gICAgICAgICAgICAgICAgdmFyIHBvc3RUaW1lID0gcG9zdE9ialtpXS5kYXRlO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0UHJldHR5VGltZSA9IG5ldyBEYXRlKHBvc3RUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zdFByZXR0eVRpbWUgPSBwb3N0UHJldHR5VGltZS50b0RhdGVTdHJpbmcoKS5zbGljZSgzKTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdFRpdGxlID0gcG9zdE9ialtpXS50aXRsZTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdENhdGVnb3J5ID0gJ1VuY2F0ZWdvcml6ZWQnO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0TGluayA9IHBvc3RPYmpbaV0ubGluaztcbiAgICAgICAgICAgICAgICB2YXIgcG9zdERlc2NyaXB0aW9uID0gcG9zdE9ialtpXS5kZXNjcmlwdGlvbjtcblxuICAgICAgICAgICAgICAgIHN3aXRjaChwb3N0T2JqW2ldLmNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgICBwb3N0Q2F0ZWdvcnkgPSAnTWFpbnRlbmFuY2UgUmVtaW5kZXInO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgNjM6XG4gICAgICAgICAgICAgICAgICAgIHBvc3RDYXRlZ29yeSA9ICdTZXJ2aWNlIEludGVydmFscyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSA2NTpcbiAgICAgICAgICAgICAgICAgICAgcG9zdENhdGVnb3J5ID0gJ1Ryb3VibGVzaG9vdGluZyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBwb3N0Q2F0ZWdvcnkgPSAnVGFsayBXaXRoIEEgVGVjaCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGNhcmRcbiAgICAgICAgICAgICAgICB2YXIgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZCcpO1xuICAgICAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJjYXJkLWNvbnRlbnRcIj4nICsgcG9zdFRpdGxlICsgJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50JykuaW5uZXJIVE1MID0gJzxwIGNsYXNzPVwiY2FyZC1jYXRlZ29yeVwiPjxhIGhyZWY9XCIvP2NhdD0nICsgcG9zdE9ialtpXS5jYXRlZ29yeSArICdcIj4nICsgcG9zdENhdGVnb3J5ICsgJzwvYT48L3A+PGg0IGNsYXNzPVwiY2FyZC10aXRsZVwiPjxhIGhyZWY9XCInICsgcG9zdExpbmsgKyAnXCI+JyArIHBvc3RUaXRsZSArICc8L2E+PC9oND48cCBjbGFzcz1cImNhcmQtZGVzY3JpcHRpb25cIj4nICsgcG9zdERlc2NyaXB0aW9uICsgJzwvcD48dWwgY2xhc3M9XCJzaW5nbGUtdGFncy0tbGlzdFwiPjwvdWw+JztcblxuICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgY2FyZCB0byByZXN1bHRzXG4gICAgICAgICAgICAgICAgcG9zdExpc3RpbmcuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgb2Zmc2V0Kys7XG4gICAgICB9KTtcbiAgfVxuXG5cbiAgdmFyIHByb2R1Y3RMaXN0RmlsdGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LWxpc3QtZmlsdGVycy1saXN0Jyk7XG4gIHZhciBzdWJtaXRGaWx0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpbHRlci1wcm9kdWN0cycpO1xuICBpZiAoIXByb2R1Y3RMaXN0RmlsdGVycykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb2R1Y3RMaXN0RmlsdGVycy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHNlbGVjdGVkQnJhbmRzID0gW107XG4gICAgcHJvZHVjdExpc3RGaWx0ZXJzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykuZm9yRWFjaChmdW5jdGlvbihicmFuZCkge1xuICAgICAgaWYgKCFicmFuZC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmNoZWNrZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VsZWN0ZWRCcmFuZHMucHVzaChicmFuZC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlKTtcbiAgICB9KTtcbiAgICBmaWx0ZXJQcm9kdWN0cyhzZWxlY3RlZEJyYW5kcyk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGZpbHRlclByb2R1Y3RzKGJyYW5kcykge1xuICAgIHZhciBwcm9kdWN0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0LWxpc3Qtd2l0aC1maWx0ZXJzIC5wcm9kdWN0cy0taXRlbScpO1xuICAgIHByb2R1Y3RMaXN0LmZvckVhY2goZnVuY3Rpb24ocHJvZHVjdCkge1xuICAgICAgcHJvZHVjdC5jbGFzc0xpc3QucmVtb3ZlKCd2aXN1YWxseS1oaWRkZW4nKTtcbiAgICAgIGlmICghcHJvZHVjdC5kYXRhc2V0LmJyYW5kLmluY2x1ZGVzKGJyYW5kcykpIHtcbiAgICAgICAgcHJvZHVjdC5jbGFzc0xpc3QuYWRkKCd2aXN1YWxseS1oaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcblxuICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3dvb2NvbW1lcmNlLWNhcnQnKSB8fCBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnd29vY29tbWVyY2UtY2hlY2tvdXQnKSkge1xuICAgIC8vIGJhaWxcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2FydERyYXdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKTtcbiAgdmFyIGNhcnRPcGVuID0gZmFsc2U7XG4gIHZhciBjYXJ0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1saXN0Jyk7XG4gIHZhciBjYXJ0SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1oZWFkZXInKTtcbiAgdmFyIGNhcnRMaW5lSXRlbXMgPSBbXTtcblxuICBpZiAoIWNhcnRMaXN0KSB7XG4gICAgY29uc29sZS5lcnJvcignQWpheCBDYXJ0IE1hcmt1cCBkb2VzblxcJ3QgZXhpc3Qgb24gdGhlIHBhZ2UuIEFkZCBpdCEnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIGNhcnRMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKCdhJykpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZWRpcmVjdCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcygnYnV0dG9uJykpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJlbW92ZWZyb21DYXJ0KGUpOyBcbiAgICB9XG4gIH0pO1xuXG4gIGNhcnRMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcbiAgICBpbmNyZW1lbnRJdGVtKGUpO1xuICB9KTtcblxuICBjYXJ0SGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGRpc3BsYXlDYXJ0KCk7XG4gIH0pO1xuXG4gIGlmIChjYXJ0TGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpLmxlbmd0aCA+IDApIHtcbiAgICBkaXNwbGF5TWluaW1pemVkQ2FydCgpO1xuICB9XG5cbiAgdmFyIGFkZFRvQ2FydEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWRkLXRvLWNhcnQnKTtcbiAgaWYgKGFkZFRvQ2FydEJ1dHRvbnMpIHtcbiAgICBhZGRUb0NhcnRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24oYnV0dG9uKSB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdXBkYXRlQ2FydEhlYWRlckNvdW50KCd1cCcpO1xuICAgICAgICBhZGRUb0NhcnQoZS50YXJnZXQpO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFRvQ2FydChlbGVtKSB7XG4gICAgaWYgKCFlbGVtLnZhbHVlKSB7XG4gICAgICAvLyBnZXQgaWQgc29tZSBvdGhlciB3YXlcbiAgICAgIGNvbnNvbGUubG9nKCdpIGRvbnQgaGF2ZSBhIHZhbHVlJyk7XG4gICAgICBhdG9taWMod2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvd3AtYWRtaW4vYWRtaW4tYWpheC5waHAnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgYWN0aW9uOiAnZmluZF9wcm9kdWN0X2J5X3NrdScsXG4gICAgICAgICAgc2t1OiBlbGVtLmRhdGFzZXQuc2t1XG4gICAgICAgIH1cbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHByb2R1Y3RJRCA9IGVsZW0udmFsdWU7XG4gICAgYXRvbWljKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWFkbWluL2FkbWluLWFqYXgucGhwJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGFjdGlvbjogJ2FkZF9pdGVtX3RvX2NhcnQnLFxuICAgICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SUQsXG4gICAgICAgIHF0eTogMVxuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZS54aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3NmdWxseSBhZGRlZCAnICsgcHJvZHVjdElEICsgJyB0byBjYXJ0Jyk7XG4gICAgICAgIHBvcHVsYXRlQ2FydCgpO1xuICAgICAgfVxuICAgICAgXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvcHVsYXRlQ2FydCgpIHtcbiAgICB2YXIgbGluZUl0ZW1zID0gZ2V0UHJvZHVjdERldGFpbHMoKTtcblxuICAgIGxpbmVJdGVtcy50aGVuKGZ1bmN0aW9uKGl0ZW1BcnJheSkge1xuICAgICAgY29uc29sZS50YWJsZShpdGVtQXJyYXkpO1xuICAgICAgY2FydExpc3QuaW5uZXJIVE1MID0gaXRlbUFycmF5Lm1hcChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICBpZiAoaXRlbS5zYWxlUHJpY2UpIHtcbiAgICAgICAgICByZXR1cm4gJzxsaSBjbGFzcz1cImFsZXJ0LS1jYXJ0LWl0ZW1cIiBkYXRhLXByb2R1Y3RJRD1cIicgKyBpdGVtLmlkICsgJ1wiIGRhdGEtaW5kZXg9XCInICsgaW5kZXggKyAnXCI+PHNwYW4gY2xhc3M9XCJhbGVydC0tY2FydC1wYXJ0XCI+PHNwYW4gY2xhc3M9XCJhbGVydC0tY2FydC1wYXJ0LXR5cGVcIj48YSBocmVmPVwiJyArIGl0ZW0ucGVybWFsaW5rICsgJ1wiPicgKyBpdGVtLm5hbWUgKyAnPC9hPjwvc3Bhbj48c3BhbiBjbGFzcz1cImFsZXJ0LS1jYXJ0LXBhcnQtbnVtYmVyXCI+JyArIGl0ZW0uc2t1ICsgJyAtIDxkZWw+JCcgKyBpdGVtLnByaWNlICsgJzwvZGVsPiA8c3BhbiBjbGFzcz1cInNhbGUtcHJpY2VcIj4kJyArIGl0ZW0uc2FsZVByaWNlICsgJzwvc3Bhbj48L3NwYW4+PC9zcGFuPjxzcGFuPjxsYWJlbCBmb3I9XCJwcm9kdWN0X3F1YW50aXR5XCI+UXR5OiA8L2xhYmVsPjxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmFtZT1cInByb2R1Y3RfcXVhbnRpdHlcIiBtaW49XCIxXCIgbWF4PVwiNTBcIiB2YWx1ZT1cIjFcIj48YnV0dG9uIGNsYXNzPVwiYWxlcnQtLXJlbW92ZS1pdGVtXCIgZGF0YS1pbmRleD1cIicgKyBpbmRleCArICdcIj4mdGltZXM7PC9idXR0b24+PC9zcGFuPjwvbGk+JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gJzxsaSBjbGFzcz1cImFsZXJ0LS1jYXJ0LWl0ZW1cIiBkYXRhLXByb2R1Y3RJRD1cIicgKyBpdGVtLmlkICsgJ1wiIGRhdGEtaW5kZXg9XCInICsgaW5kZXggKyAnXCI+PHNwYW4gY2xhc3M9XCJhbGVydC0tY2FydC1wYXJ0XCI+PHNwYW4gY2xhc3M9XCJhbGVydC0tY2FydC1wYXJ0LXR5cGVcIj48YSBocmVmPVwiJyArIGl0ZW0ucGVybWFsaW5rICsgJ1wiPicgKyBpdGVtLm5hbWUgKyAnPC9hPjwvc3Bhbj48c3BhbiBjbGFzcz1cImFsZXJ0LS1jYXJ0LXBhcnQtbnVtYmVyXCI+JyArIGl0ZW0uc2t1ICsgJyAtICQnICsgaXRlbS5wcmljZSArICc8L3NwYW4+PC9zcGFuPjxzcGFuPjxsYWJlbCBmb3I9XCJwcm9kdWN0X3F1YW50aXR5XCI+UXR5OiA8L2xhYmVsPjxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmFtZT1cInByb2R1Y3RfcXVhbnRpdHlcIiBtaW49XCIxXCIgbWF4PVwiNTBcIiB2YWx1ZT1cIjFcIj48YnV0dG9uIGNsYXNzPVwiYWxlcnQtLXJlbW92ZS1pdGVtXCIgZGF0YS1pbmRleD1cIicgKyBpbmRleCArICdcIj4mdGltZXM7PC9idXR0b24+PC9zcGFuPjwvbGk+JztcbiAgICAgICAgfVxuICAgICAgfSkuam9pbignJyk7XG4gICAgfSk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGRpc3BsYXlDYXJ0KCk7XG4gICAgfSwgMjAwKVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UHJvZHVjdERldGFpbHMoaWQpIHtcbiAgICByZXR1cm4gYXRvbWljKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWFkbWluL2FkbWluLWFqYXgucGhwJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGFjdGlvbjogJ2dldF9wcm9kdWN0X2RldGFpbHMnLFxuICAgICAgICBwcm9kdWN0X2lkOiBpZFxuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEuc2xpY2UoMCwtMSkpO1xuICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZWZyb21DYXJ0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB1cGRhdGVDYXJ0SGVhZGVyQ291bnQoJ2Rvd24nKTtcbiAgICBcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcygnYnV0dG9uJykpIHtcbiAgICAgIHZhciBpbmRleCA9IGUudGFyZ2V0LmRhdGFzZXQuaW5kZXg7XG4gICAgICB2YXIgcGFyZW50ID0gY2FydExpc3QucXVlcnlTZWxlY3RvcignW2RhdGEtaW5kZXg9XCInICsgaW5kZXggKyAnXCJdJyk7XG4gICAgICBwYXJlbnQucmVtb3ZlKCk7XG4gICAgICBhdG9taWMod2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvd3AtYWRtaW4vYWRtaW4tYWpheC5waHAnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgYWN0aW9uOiAncmVtb3ZlX2l0ZW1fZnJvbV9jYXJ0JyxcbiAgICAgICAgICBwcm9kdWN0X2lkOiBwYXJlbnQuZGF0YXNldC5wcm9kdWN0aWRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoY2FydExpc3QuY2hpbGRyZW4ubGVuZ3RoIDwgMSkge1xuICAgICAgY2FydExpc3QuaW5uZXJIVE1MID0gJzxsaT5Zb3VyIHNob3BwaW5nIGNhcnQgaXMgZW1wdHkuPC9saT4nO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQ2FydEhlYWRlckNvdW50KGRpcmVjdGlvbikge1xuICAgIHZhciBjdXJyZW50Q291bnQgPSBwYXJzZUludChjYXJ0SGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LWNvdW50JykuaW5uZXJUZXh0KTtcbiAgICBpZiAoIWRpcmVjdGlvbikge1xuICAgICAgY2FydEhlYWRlci5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC1jb3VudCcpLmlubmVyVGV4dCA9IGN1cnJlbnRDb3VudDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZGlyZWN0aW9uID09PSAndXAnKSB7XG4gICAgICArK2N1cnJlbnRDb3VudDtcbiAgICB9IGVsc2Uge1xuICAgICAgLS1jdXJyZW50Q291bnQ7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRDb3VudCA+IDEgfHwgY3VycmVudENvdW50ID09PSAwKSB7XG4gICAgICBjYXJ0SGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJ2g0JykuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwicHJvZHVjdC1jb3VudFwiPicgKyBjdXJyZW50Q291bnQgKyAnPC9zcGFuPiBQcm9kdWN0cyBpbiBDYXJ0JztcbiAgICB9IGVsc2Uge1xuICAgICAgY2FydEhlYWRlci5xdWVyeVNlbGVjdG9yKCdoNCcpLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInByb2R1Y3QtY291bnRcIj4nICsgY3VycmVudENvdW50ICsgJzwvc3Bhbj4gUHJvZHVjdCBpbiBDYXJ0JztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkaXNwbGF5Q2FydChpc01pbmltaXplZCkge1xuICAgIGlmICghY2FydERyYXdlcikgeyBcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhcnQgTWFya3VwIGlzIG5vdCBvbiB0aGUgcGFnZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNhcnRPcGVuID0gIWNhcnRPcGVuO1xuICAgIGNhcnREcmF3ZXIuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLWFjdGl2ZScpO1xuXG4gICAgaWYgKGNhcnREcmF3ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbGVydC0taXMtbWluaW1pemVkJykpIHtcbiAgICAgIGNhcnREcmF3ZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWxlcnQtLWlzLW1pbmltaXplZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BsYXlNaW5pbWl6ZWRDYXJ0KCkge1xuICAgIGlmICghY2FydERyYXdlcikgeyBcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhcnQgTWFya3VwIGlzIG5vdCBvbiB0aGUgcGFnZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYXJ0RHJhd2VyLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1hY3RpdmUnKTtcbiAgICBjYXJ0RHJhd2VyLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluY3JlbWVudEl0ZW0oZSkge1xuICAgIHZhciBlbGVtZW50Q2hhbmdlZCA9IGUudGFyZ2V0O1xuICAgIHZhciBwcm9kdWN0SUQgPSBlbGVtZW50Q2hhbmdlZC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5wcm9kdWN0aWQ7XG4gICAgdmFyIHF0eSA9IGVsZW1lbnRDaGFuZ2VkLnZhbHVlO1xuICAgIGF0b21pYyh3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YToge1xuICAgICAgICBhY3Rpb246ICdpbmNyZW1lbnRfaXRlbV9pbl9jYXJ0JyxcbiAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdElELFxuICAgICAgICBxdHk6IHF0eVxuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZS54aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgLy8gdmFyIHJlc3BvbnNlT2JqID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLnNsaWNlKDAsLTEpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3F1YW50aXR5IGZvciAnICsgcHJvZHVjdElEICsgJyBpcyBzZXQgdG8gJyArIHF0eSk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgdmFyIGFjY29yZGlhbkJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjb3JkaWFuLS10aXRsZScpO1xuICBpZiAoYWNjb3JkaWFuQnV0dG9ucykge1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY2NvcmRpYW5CdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhY2NvcmRpYW5CdXR0b25zW2ldLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWNjb3JkaWFuLS1pcy1jb2xsYXBzZWQnKTtcbiAgICAgIGFjY29yZGlhbkJ1dHRvbnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBjb250YWluaW5nRWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGlmIChjb250YWluaW5nRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGlhbi0taXMtY29sbGFwc2VkJykpIHtcbiAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGlhbi0taXMtY29sbGFwc2VkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpYW4tLWlzLWNvbGxhcHNlZCcpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBhbGxUb29sVGlwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b29sdGlwLS10b2dnbGUnKTtcbiAgaWYgKGFsbFRvb2xUaXBzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGxUb29sVGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgYWxsVG9vbFRpcHNbaV0ubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ3Rvb2x0aXAtLWlzLWhpZGRlbicpO1xuXG4gICAgICBhbGxUb29sVGlwc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC50b2dnbGUoJ3Rvb2x0aXAtLWlzLWhpZGRlbicpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGNsb3NlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtLWNsb3NlJyk7XG4gIHZhciBsYXVuY2hNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltkYXRhLW1vZGFsLWxhdW5jaF0nKTtcblxuICBpZiAoY2xvc2VNb2RhbCkge1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXVuY2hNb2RhbC5sZW5ndGg7IGkrKykge1xuICAgICAgbGF1bmNoTW9kYWxbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBtb2RhbElEID0gZS50YXJnZXQuZGF0YXNldC5tb2RhbExhdW5jaDtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsW2RhdGEtbW9kYWw9JyArIG1vZGFsSUQgKyAnXScpLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1pcy1oaWRkZW4nKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdtb2RhbC0taXMtb3BlbicpO1xuXG4gICAgICAgIC8vIFBvcHVsYXRlIE1vZGVsIEZpZWxkIHdpdGggQ3VycmVudCBNb2RlbCBQYWdlXG4gICAgICAgIGlmIChtb2RhbElEID0gJ3NpZ24tdXAtZm9ybScpIHtcbiAgICAgICAgICB2YXIgcGFnZVRhZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdtZXRhW3Byb3BlcnR5PVwiYXJ0aWNsZTp0YWdcIl0nKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZ2VUYWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoKHBhZ2VUYWdzW2ldLmNvbnRlbnQuaW5jbHVkZXMoJ0pvaG4gRGVlcmUnKSkgJiYgKHBhZ2VUYWdzW2ldLmNvbnRlbnQgIT09ICdKb2huIERlZXJlIExhd24gVHJhY3RvcicpKSB7XG4gICAgICAgICAgICAgIHZhciBtb2RlbCA9IHBhZ2VUYWdzW2ldLmNvbnRlbnQuc3BsaXQoJ0pvaG4gRGVlcmUgJylbMV07XG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtY2UtTU9ERUwnKS52YWx1ZSA9IG1vZGVsLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvc2VNb2RhbC5sZW5ndGg7IGkrKykge1xuICAgICAgY2xvc2VNb2RhbFtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1pcy1oaWRkZW4nKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0taXMtb3BlbicpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlICE9IDI3KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBsYXVuY2hNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltkYXRhLW1vZGFsXScpO1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0taXMtb3BlbicpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXVuY2hNb2RhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsYXVuY2hNb2RhbFtpXS5jbGFzc0xpc3QuYWRkKCdtb2RhbC0taXMtaGlkZGVuJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfVxuXG59KSgpOyIsImlmICh3aW5kb3cualF1ZXJ5ICYmIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaW5nbGUtcG9zdCcpKSB7XG5cbiAgKGZ1bmN0aW9uKCkge1xuXG5cbiAgICAkKCcjbWMtZW1iZWRkZWQtc3Vic2NyaWJlLWZvcm0nKS5vbignc3VibWl0JywgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICBcbiAgICAgIHZhciBlbWFpbCA9ICR0aGlzLmZpbmQoJyNtY2UtRU1BSUwnKS52YWwoKTtcbiAgICAgIHZhciBmaXJzdE5hbWUgPSAkdGhpcy5maW5kKCcjbWNlLUZOQU1FJykudmFsKCk7XG4gICAgICB2YXIgbGFzdE5hbWUgPSAkdGhpcy5maW5kKCcjbWNlLUxOQU1FJykudmFsKCk7XG4gICAgICB2YXIgbW9kZWxOdW1iZXIgPSAkdGhpcy5maW5kKCcjbWNlLU1PREVMJykudmFsKCk7XG4gICAgICB2YXIgY3VycmVudEhvdXJzID0gJHRoaXMuZmluZCgnI21jZS1DVVJSRU5UX0hSJykudmFsKCk7XG4gICAgICB2YXIgbW93aW5nVGltZSA9ICR0aGlzLmZpbmQoJyNtY2UtTU9XSU5HX1RJTScpLnZhbCgpO1xuICAgICAgbW93aW5nVGltZSA9IG1vd2luZ1RpbWUuc3BsaXQoJygnKVsxXS5zcGxpdCgnKScpWzBdLnRvTG93ZXJDYXNlKCk7XG4gIFxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdHlwZTogJHRoaXMuYXR0cignbWV0aG9kJyksXG4gICAgICAgIHVybDogJHRoaXMuYXR0cignYWN0aW9uJyksXG4gICAgICAgIGRhdGE6ICR0aGlzLnNlcmlhbGl6ZSgpLFxuICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICBcbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLnJlc3VsdCAhPSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICQoJyNtY19lbWJlZF9zaWdudXBfc2Nyb2xsJykucHJlcGVuZCgnPHAgc3R5bGU9XCJib3JkZXI6IDFweCBzb2xpZCByZWQ7IHBhZGRpbmc6IDFyZW07XCI+JyArIGRhdGEubXNnICsgJzwvcD4nKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgJCgnZGl2W2RhdGEtbW9kYWw9XCJzaWduLXVwLWZvcm1cIl0gLm1vZGFsLWhlYWRpbmcnKS50ZXh0KCdHcmVhdCAnICsgZmlyc3ROYW1lICsgJyEnKS5uZXh0KCkudGV4dCgnWW91IHdpbGwgcmVjZWl2ZSBhIGNvbmZpcm1hdGlvbiBlbWFpbCBzb29uIGFuZCB3ZSB3aWxsIGtlZXAgeW91IHVwIHRvIGRhdGUgb24geW91ciBuZWVkZWQgcGFydHMuJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5mbG9jay5jb20vaG9va3Mvc2VuZE1lc3NhZ2UvODU1ODMyY2QtYmQ3OS00MzZkLTlmMWYtZGNmMDAyMDI1MWRkJyxcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgXCJ0ZXh0XCI6IGZpcnN0TmFtZSArIFwiIFwiICsgbGFzdE5hbWUgKyBcIiBoYXMgYSBcIiArIG1vZGVsTnVtYmVyICsgXCIgd2l0aCBcIiArIGN1cnJlbnRIb3VycyArIFwiIGhvdXJzIGFuZCB0YWtlcyBcIiArIG1vd2luZ1RpbWUgKyBcIiB0byBtb3cuIENvbnRhY3QgXCIgKyBmaXJzdE5hbWUgKyBcIiBhdCBcIiArIGVtYWlsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgXG4gICAgfSk7XG4gIFxuICB9KSgpO1xuXG59IiwiKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBiYXNlRm9udFNpemUgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykpLmdldFByb3BlcnR5VmFsdWUoJ2ZvbnQtc2l6ZScpKTtcblxuICB2YXIgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0aWNreU5hdicpO1xuXG4gIGlmIChuYXYpIHtcblxuICAgIHZhciBzY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG4gICAgdmFyIG5hdk9mZnNldCA9IG5hdi5vZmZzZXRUb3A7XG4gICAgdmFyIG5hdldpZHRoID0gbmF2LmNsaWVudFdpZHRoO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgbmF2T2Zmc2V0ID0gbmF2Lm9mZnNldFRvcDtcbiAgICAgIGNvbnNvbGUubG9nKG5hdk9mZnNldCk7XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcbiAgICAgIHNjcm9sbFkgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgIHZhciBtYWtlU3RpY2t5ID0gc2Nyb2xsWSA+IChuYXZPZmZzZXQgLSAoYmFzZUZvbnRTaXplICogMykpO1xuXG4gICAgICBpZiAobWFrZVN0aWNreSkge1xuICAgICAgICBuYXYuY2xhc3NMaXN0LmFkZCgnbmF2LS1pcy1zdGlja3knKTtcbiAgICAgICAgbmF2LnN0eWxlLm1heFdpZHRoID0gbmF2V2lkdGggKyAncHgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmF2LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi0taXMtc3RpY2t5Jyk7XG4gICAgICB9XG5cblxuICAgIH0pO1xuXG4gIH1cblxufSkoKTsgIiwiKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBiYXNlRm9udFNpemUgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykpLmdldFByb3BlcnR5VmFsdWUoJ2ZvbnQtc2l6ZScpKTtcbiAgdmFyIHN0aWNreUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGlja3ktLWNvbnRhaW5lcicpO1xuICB2YXIgc3RpY2t5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGlja3ktLWVsZW1lbnQnKTtcblxuICAvLyBJZiBlbGVtZW50cyBhcmUgbm90IG9uIHBhZ2Ugb3Igc21hbGxlciBzY3JlZW4sIGV4aXQgZnVuY3Rpb25cbiAgaWYgKCFzdGlja3lDb250YWluZXIgfHwgIXN0aWNreUVsZW1lbnQgfHwgKHdpbmRvdy5pbm5lcldpZHRoIDwgOTYwKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vICBHRVQgU0lCTElORyBXSURUSFxuICB2YXIgc3RpY2t5U2libGluZyA9IHN0aWNreUNvbnRhaW5lci5wYXJlbnRFbGVtZW50LmNoaWxkcmVuO1xuICBBcnJheS5mcm9tKHN0aWNreVNpYmxpbmcpLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdGlja3ktLWNvbnRhaW5lcicpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0aWNreVNpYmxpbmcgPSBjaGlsZDtcbiAgfSlcbiAgdmFyIHN0aWNreVNpYmxpbmdXaWR0aCA9IHN0aWNreVNpYmxpbmcub2Zmc2V0V2lkdGg7XG5cblxuICAvLyBnZXQgc2l6ZXMgb2YgZWxlbWVudHNcbiAgdmFyIHN0aWNreUNvbnRhaW5lckhlaWdodCA9IHN0aWNreUNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG4gIHZhciBzdGlja3lDb250YWluZXJUb3AgPSBzdGlja3lDb250YWluZXIub2Zmc2V0VG9wO1xuICB2YXIgc3RpY2t5RWxlbWVudFdpZHRoID0gc3RpY2t5RWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgdmFyIHN0aWNreUVsZW1lbnRIZWlnaHQgPSBzdGlja3lFbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICBcblxuICB2YXIgc2Nyb2xsWSA9IHdpbmRvdy5zY3JvbGxZO1xuXG4gIC8vIGZ1biBvbiBwYWdlIGxvYWRcbiAgc2V0VGltZW91dCh3YXRjaEZvclN0aWNreSwgMjAwKTtcbiAgXG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICBzY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG4gICAgd2F0Y2hGb3JTdGlja3koKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gd2F0Y2hGb3JTdGlja3koKSB7XG4gICAgaWYgKHNjcm9sbFkgPiAoc3RpY2t5Q29udGFpbmVyVG9wIC0gKGJhc2VGb250U2l6ZSAqIDMpKSkge1xuICAgICAgc3RpY2t5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzdGlja3ktLWVsZW1lbnQtLWlzLWZpeGVkJyk7XG4gICAgICBzdGlja3lFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gc3RpY2t5RWxlbWVudFdpZHRoICsgJ3B4JztcbiAgICAgIHN0aWNreUVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoJyArIChiYXNlRm9udFNpemUgKiAzKSArICdweCknO1xuICAgICAgc3RpY2t5U2libGluZy5zdHlsZS5tYXhXaWR0aCA9IHN0aWNreVNpYmxpbmdXaWR0aCArICdweCc7XG5cbiAgICAgIC8vIGlmIChzY3JvbGxZID4gKHN0aWNreUNvbnRhaW5lckhlaWdodCAtIHN0aWNreUNvbnRhaW5lclRvcCkpIHtcbiAgICAgIC8vICAgY29uc29sZS5sb2coJ3Njcm9sbCcpO1xuICAgICAgICAvLyB2YXIgc2Nyb2xsVHJhbnNmb3JtQW1vdW50ID0gc2Nyb2xsWSAtIHN0aWNreUNvbnRhaW5lckhlaWdodCArIHN0aWNreUNvbnRhaW5lclRvcCArIChiYXNlRm9udFNpemUgKiAzKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coc2Nyb2xsVHJhbnNmb3JtQW1vdW50KTtcbiAgICAgICAgLy8gc3RpY2t5RWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtJyArIHNjcm9sbFRyYW5zZm9ybUFtb3VudCArICdweCknO1xuICAgICAgLy8gfVxuXG4gICAgfVxuXG4gICAgaWYgKHNjcm9sbFkgPCAoc3RpY2t5Q29udGFpbmVyVG9wIC0gKGJhc2VGb250U2l6ZSAqIDMpKSkge1xuICAgICAgc3RpY2t5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzdGlja3ktLWVsZW1lbnQtLWlzLWZpeGVkJyk7XG4gICAgICBzdGlja3lFbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgICB9XG5cbiAgfVxuICBcbiAgXG59KSgpOyIsIihmdW5jdGlvbigpIHtcblxuICBpZiAoIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b29jb21tZXJjZS1jYXJ0JykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuXG4gIHZhciBjYXJ0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZnAtY2FydC0tbGlzdCcpO1xuICB2YXIgdXBkYXRlQ2FydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltuYW1lPVwidXBkYXRlX2NhcnRcIl0nKTtcbiAgdmFyIGNhcnRTdWJ0b3RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LXN1YnRvdGFsIHRkJyk7XG4gIHZhciBjYXJ0VG90YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3JkZXItdG90YWwgdGQgc3Ryb25nJyk7XG4gIHZhciBjb3Vwb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcnQtZGlzY291bnQnKTtcblxuXG4gIC8vIFJFTU9WRSBVUERBVEUgQ0FSVCBCVVRUT04gSUYgSlMgRU5BQkxFRFxuICBpZiAodXBkYXRlQ2FydEJ1dHRvbikge1xuICAgIHVwZGF0ZUNhcnRCdXR0b24ucmVtb3ZlKCk7XG4gIH1cblxuICBcbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEhhbmRsZSBEaXNhYmxlIG9mIFwiVXBkYXRlIENhcnRcIiBCdXR0b25cbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovIFxuICBjYXJ0TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgIT09ICdJTlBVVCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdXBkYXRlTGluZUl0ZW1QcmljZShlLnRhcmdldCk7XG4gICAgLy8gdXBkYXRlQ2FydFRvdGFscygpO1xuICB9KTtcblxuICBmdW5jdGlvbiB1cGRhdGVMaW5lSXRlbVByaWNlKGl0ZW0pIHtcbiAgICBjb25zb2xlLmxvZygndXBkYXRlIGxpbmUgaXRlbSBwcmljZScpO1xuICAgIFxuICAgIHZhciBpdGVtRGV0YWlscyA9IGl0ZW0ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgdmFyIHJlZ3VsYXJQcmljZSA9IGl0ZW1EZXRhaWxzLnF1ZXJ5U2VsZWN0b3IoJy5yZWd1bGFyLXByaWNlJyk7XG4gICAgdmFyIHNhbGVQcmljZSA9IGl0ZW1EZXRhaWxzLnF1ZXJ5U2VsZWN0b3IoJy5zYWxlLXByaWNlJyk7XG4gICAgXG4gICAgcmVndWxhclByaWNlLnRleHRDb250ZW50ID0gKHJlZ3VsYXJQcmljZS5kYXRhc2V0LnByaWNlICogaXRlbS52YWx1ZSkudG9GaXhlZCgyKTtcbiAgICBcbiAgICBpZiAoc2FsZVByaWNlKSB7XG4gICAgICBzYWxlUHJpY2UudGV4dENvbnRlbnQgPSAnJCcgKyAoc2FsZVByaWNlLmRhdGFzZXQuc2FsZVByaWNlICogaXRlbS52YWx1ZSkudG9GaXhlZCgyKTtcbiAgICB9XG5cbiAgICBjYXJ0U3VidG90YWwudGV4dENvbnRlbnQgPSAnVXBkYXRpbmcuLi4nO1xuICAgIGNhcnRUb3RhbC50ZXh0Q29udGVudCA9ICdVcGRhdGluZy4uLic7XG4gICAgY291cG9ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvdXBvbikge1xuICAgICAgdmFyIGNvdXBvblR5cGUgPSBjb3Vwb24uZGF0YXNldC5kaXNjb3VudFR5cGU7XG4gICAgICBpZiAoY291cG9uVHlwZSA9PT0gJ2NvdXBvbi1wZXJjZW50Jykge1xuICAgICAgICBjb3Vwb24ucXVlcnlTZWxlY3RvcigndGRbZGF0YS10aXRsZV0nKS50ZXh0Q29udGVudCA9ICdVcGRhdGluZy4uLic7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhdG9taWMod2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvd3AtYWRtaW4vYWRtaW4tYWpheC5waHAnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYWN0aW9uOiAnaW5jcmVtZW50X2l0ZW1faW5fY2FydCcsXG4gICAgICAgIHByb2R1Y3RfaWQ6IGl0ZW1EZXRhaWxzLmRhdGFzZXQucHJvZHVjdGlkLFxuICAgICAgICBxdHk6IGl0ZW0udmFsdWVcbiAgICAgIH1cbiAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgdXBkYXRlQ2FydFRvdGFscygpO1xuICAgIH0pO1xuXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVDYXJ0VG90YWxzKCkge1xuICAgIGNvbnNvbGUubG9nKCd1cGRhdGUgY2FydCB0b3RhbHMnKTtcbiAgICBhdG9taWMod2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvd3AtYWRtaW4vYWRtaW4tYWpheC5waHAnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYWN0aW9uOiAnZ2V0X2NhcnQnLFxuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHZhciBjYXJ0ID0gT2JqZWN0LnZhbHVlcyhKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEuc2xpY2UoMCwtMSkpKTtcbiAgICAgIHZhciBjYXJ0U3VidG90YWxBbW91bnQgPSAwO1xuICAgICAgdmFyIGNhcnRUb3RhbEFtb3VudCA9IDA7XG4gICAgICBcbiAgICAgIGNhcnQuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIGNhcnRTdWJ0b3RhbEFtb3VudCA9IGNhcnRTdWJ0b3RhbEFtb3VudCArIGl0ZW0ubGluZV9zdWJ0b3RhbDtcbiAgICAgICAgY2FydFRvdGFsQW1vdW50ID0gY2FydFRvdGFsQW1vdW50ICsgaXRlbS5saW5lX3RvdGFsO1xuICAgICAgfSk7XG5cbiAgICAgIGNvdXBvbnMuZm9yRWFjaChmdW5jdGlvbihjb3Vwb24pIHtcbiAgICAgICAgdmFyIGNvdXBvblR5cGUgPSBjb3Vwb24uZGF0YXNldC5kaXNjb3VudFR5cGU7XG4gICAgICAgIHZhciBjb3Vwb25BbW91bnQgPSBjb3Vwb24uZGF0YXNldC5kaXNjb3VudEFtb3VudDtcbiAgICAgICAgLy8gY29uc29sZS5sb2coY291cG9uQW1vdW50KTtcbiAgICAgICAgaWYgKGNvdXBvblR5cGUgPT09ICdjb3Vwb24tcGVyY2VudCcpIHtcbiAgICAgICAgICB2YXIgZGlzY291bnQgPSBjYXJ0U3VidG90YWxBbW91bnQgKiAoY291cG9uQW1vdW50IC8gMTAwKTtcbiAgICAgICAgICBjb3Vwb24ucXVlcnlTZWxlY3RvcigndGRbZGF0YS10aXRsZV0nKS50ZXh0Q29udGVudCA9ICctJCcgKyBkaXNjb3VudC50b0ZpeGVkKDIpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY2FydFN1YnRvdGFsLnRleHRDb250ZW50ID0gJyQnICsgY2FydFN1YnRvdGFsQW1vdW50LnRvRml4ZWQoMikucmVwbGFjZSgvXFxkKD89KFxcZHszfSkrXFwuKS9nLCAnJCYsJyk7XG4gICAgICBjYXJ0VG90YWwudGV4dENvbnRlbnQgPSAnJCcgKyBjYXJ0VG90YWxBbW91bnQudG9GaXhlZCgyKS5yZXBsYWNlKC9cXGQoPz0oXFxkezN9KStcXC4pL2csICckJiwnKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBSRU1PVkUgQU4gSVRFTSBGUk9NIFRIRSBDQVJUXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgY2FydExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gaHR0cDovL2xvY2FsaG9zdDozMDAwL2NhcnQvP3JlbW92ZV9pdGVtPWU3MjFhNTRhOGNmMThjODU0M2Q0NDc4MmQ5ZWY2ODFmJl93cG5vbmNlPWMxMzk4OTc4Y2NcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lICE9PSAncmVtb3ZlJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2FydFN1YnRvdGFsLnRleHRDb250ZW50ID0gJ1VwZGF0aW5nLi4uJztcbiAgICBjYXJ0VG90YWwudGV4dENvbnRlbnQgPSAnVXBkYXRpbmcuLi4nO1xuICAgIGF0b21pYyh3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YToge1xuICAgICAgICBhY3Rpb246ICdyZW1vdmVfaXRlbV9mcm9tX2NhcnQnLFxuICAgICAgICBwcm9kdWN0X2lkOiBlLnRhcmdldC5kYXRhc2V0LnByb2R1Y3RfaWRcbiAgICAgIH1cbiAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHVwZGF0ZUNhcnRUb3RhbHMoKTtcbiAgICAgIH0pO1xuICB9KTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gIFxuICB2YXIgc2hpcFRvRGlmZmVyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NoaXAtdG8tZGlmZmVyZW50LWFkZHJlc3MtY2hlY2tib3gnKTtcbiAgdmFyIHNoaXBEZXRhaWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNoaXBwaW5nLWRldGFpbHMtLWlzLWhpZGRlbicpO1xuICBcbiAgaWYgKHNoaXBUb0RpZmZlcmVudCkge1xuICAgIHNoaXBUb0RpZmZlcmVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIXNoaXBUb0RpZmZlcmVudC5jaGVja2VkKSB7XG4gICAgICAgIHNoaXBEZXRhaWxzLmNsYXNzTGlzdC5hZGQoJ3NoaXBwaW5nLWRldGFpbHMtLWlzLWhpZGRlbicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzaGlwRGV0YWlscy5jbGFzc0xpc3QucmVtb3ZlKCdzaGlwcGluZy1kZXRhaWxzLS1pcy1oaWRkZW4nKTtcbiAgICB9KTtcbiAgfVxuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcblxuICB2YXIgc2VhcmNoQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdsb2JhbC1zZWFyY2gtYmFyIGZvcm0nKTtcbiAgaWYgKCFzZWFyY2hCYXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc2VhcmNoSW5wdXQgPSBzZWFyY2hCYXIucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInRleHRcIl0nKTtcbiAgdmFyIGRlZmF1bHRUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdsb2JhbC1zZWFyY2gtYmFyIC5kZWZhdWx0Jyk7XG4gIHZhciBzZWFyY2hSZXN1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1yZXN1bHRzJyk7XG5cbiAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBzaG93RGVmYXVsdFJlc3VsdHMpO1xuICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgc2hvd0RlZmF1bHRSZXN1bHRzKTtcblxuICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGhhbmRsZUNoYW5nZSk7XG5cbiAgZnVuY3Rpb24gc2hvd0RlZmF1bHRSZXN1bHRzKCkge1xuICAgIGlmIChzZWFyY2hSZXN1bHRzLmNsYXNzTGlzdC5jb250YWlucygndmlzdWFsbHktaGlkZGVuJykpIHtcbiAgICAgIHNlYXJjaFJlc3VsdHMuY2xhc3NMaXN0LnJlbW92ZSgndmlzdWFsbHktaGlkZGVuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNlYXJjaFJlc3VsdHMuY2xhc3NMaXN0LmFkZCgndmlzdWFsbHktaGlkZGVuJyk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkge1xuICAgIHZhciBzZWFyY2hJbnB1dExlbmd0aCA9IHRoaXMudmFsdWUubGVuZ3RoO1xuXG4gICAgXG4gICAgLy8gY2hlY2sgc2VhcmNoIHN0cmluZyBsZW5ndGhcbiAgICBpZiAoc2VhcmNoSW5wdXRMZW5ndGggPj0gMykge1xuICAgICAgXG4gICAgICAvLyBoaWRlIGRlZmF1bHQgdGV4dFxuICAgICAgZGVmYXVsdFRleHQuY2xhc3NMaXN0LmFkZCgndmlzdWFsbHktaGlkZGVuJyk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdzdGFydCBzZWFyY2hpbmcnKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBcbiAgICAgIC8vIHNldCBjaGFyYWN0ZXIgY291bnRcbiAgICAgIGRlZmF1bHRUZXh0LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtY2hhcmFjdGVycycpLnRleHRDb250ZW50ID0gKDMgLSBzZWFyY2hJbnB1dExlbmd0aCk7XG4gICAgICBcbiAgICAgIC8vIHNob3cgZGVmYXVsdCB0ZXh0XG4gICAgICBkZWZhdWx0VGV4dC5jbGFzc0xpc3QucmVtb3ZlKCd2aXN1YWxseS1oaWRkZW4nKTtcbiAgICAgIFxuICAgIH1cbiAgfVxuXG59KSgpOyJdfQ==
