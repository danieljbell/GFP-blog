!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):window.atomic=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(n){"use strict";var i,a={method:"GET",username:null,password:null,data:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1},o=function(){for(var n={},e=0;e<arguments.length;e++){!function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?n[t]=o(n[t],e[t]):n[t]=e[t])}(arguments[e])}return n},r=function(a){var o=new XMLHttpRequest,e=new Promise(function(e,t){for(var n in o.onreadystatechange=function(){4===o.readyState&&(200<=o.status&&o.status<300?e(function(t){var n;if("text"!==i.responseType&&""!==i.responseType)return{data:t.response,xhr:t};try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}return{data:n,xhr:t}}(o)):t({status:o.status,statusText:o.statusText}))},o.open(i.method,a,!0,i.username,i.password),o.responseType=i.responseType,i.headers)i.headers.hasOwnProperty(n)&&o.setRequestHeader(n,i.headers[n]);i.timeout&&(o.timeout=i.timeout,o.ontimeout=function(e){t({status:408,statusText:"Request timeout"})}),i.withCredentials&&(o.withCredentials=!0),o.send(function(e){if("string"==typeof e||"[object FormData]"===Object.prototype.toString.call(e))return e;if(/application\/json/i.test(i.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(e))return JSON.stringify(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(i.data))});return e.cancel=function(){o.abort()},e};return function(e,t){if(!("XMLHttpRequest"in n&&"JSON"in n&&"Promise"in n))throw"Atomic: This browser does not support the methods used in this plugin.";return i=o(a,t||{}),r(e)}}),window.innerWidth,document.querySelector("button#hamburger").addEventListener("click",function(e){toggleMenu();var t=document.querySelector(".site-header").offsetHeight;document.querySelector(".navigation--level-zero").style.top=t+"px"});for(var headerTopButtons=document.querySelectorAll(".navigation--button"),navLevelOne=document.querySelectorAll(".navigation--level-one"),i=0;i<navLevelOne.length;i++)navLevelOne[i].querySelector("li:first-child a").classList.add("active");for(i=0;i<headerTopButtons.length;i++)headerTopButtons[i].addEventListener("click",function(e){e.preventDefault();var t=e.target,n=t.nextElementSibling.querySelector(".navigation--level-one");n.classList.contains("active")?(n.classList.remove("active"),t.nextElementSibling.classList.remove("active")):(t.parentElement.classList.add("active"),t.nextElementSibling.classList.add("active"),t.nextElementSibling.querySelector(".navigation--level-one").classList.add("active"))});var allLevelOneLinks=document.querySelectorAll(".navigation--level-one > li > a");for(i=0;i<allLevelOneLinks.length;i++)allLevelOneLinks[i].addEventListener("click",function(e){e.preventDefault();for(var t=document.querySelectorAll(".navigation--level-one > li > a"),n=0;n<t.length;n++)t[n].classList.remove("active");e.target.classList.add("active")});function toggleMenu(){document.body.classList.toggle("menu-open"),document.querySelector("#hamburger").classList.toggle("is-active")}!function(){var e=document.querySelector("#modelModifiers");document.querySelector("#main_content");if(e&&e.addEventListener("change",function(e){var t=e.target.value;window.location.href=t}),document.body.classList.contains("single-post"))for(var t=document.querySelectorAll("table tr"),n=0;n<t.length;n++)t[n].addEventListener("mouseenter",function(e){if(!(window.innerWidth<1080||"false"===e.target.querySelector("td:first-child").dataset.productSold)){var t=e.target.querySelector("td:first-child .product-image-container");if(t)t.classList.remove("product-image--is-hidden");else{var n=e.target.querySelector("td:first-child").dataset.productImage,a=document.createElement("img");a.classList.add("product-image"),a.src=void 0===n?"https://cdn3.volusion.com/yxhfe.dfqew/v/vspfiles/templates/gfp-test/images/nophoto.gif":n;var o=document.createElement("div");o.classList.add("product-image-container"),o.appendChild(a);e.target.querySelector("td:first-child").appendChild(o)}}}),t[n].addEventListener("mouseleave",function(e){e.target.querySelector("td:first-child .product-image-container").classList.add("product-image--is-hidden")});var a=document.querySelector(".maintenance-kit-container");a&&1080<window.innerWidth&&(window.onload=function(){var t=a.offsetTop,n=window.getComputedStyle(document.body,null).fontSize;n=parseInt(n.split("px")[0]),window.addEventListener("scroll",function(e){window.scrollY>t-3*n&&a.classList.add("maintenance-kit-container--is-fixed"),window.scrollY<t-3*n&&a.classList.remove("maintenance-kit-container--is-fixed")})})}(),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0===a)return!1;var o,i,r=0|t,c=Math.max(0<=r?r:a-Math.abs(r),0);for(;c<a;){if((o=n[c])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;c++}return!1}}),function(){var e=document.querySelector("#fitment-text-filter"),a=document.querySelectorAll(".single--part-fitment-list a");e&&e.addEventListener("keyup",function(e){for(var t=e.target.value.toUpperCase(),n=0;n<a.length;n++)a[n].parentElement.classList.add("hidden"),a[n].textContent.includes(t)&&a[n].parentElement.classList.remove("hidden")})}(),function(){var e=document.querySelector(".single-comments"),t=document.querySelector("#respond");document.querySelector("#commentform");if(t){var n=document.createElement("button");n.innerHTML="Add Comment",n.id="addComment",t.style.visibility="hidden",t.style.maxHeight="0px",t.style.padding="0px",t.style.marginTop="0px",e.appendChild(n),document.querySelector("#addComment").addEventListener("click",function(e){e.preventDefault(),e.target.style.opacity="0",t.style.visibility="visible",t.style.maxHeight="1000px",t.style.padding="1rem",t.style.marginTop="3rem"})}}(),function(){var o=document.querySelector("#loadMorePosts");if(o){var a=1,d=document.querySelector(".post-listing--list");o.addEventListener("click",function(e){var t=window.location.origin+"/wp-json/wp/v2/posts?offset="+10*a;if(document.body.classList.contains("category")){var n=document.body.classList;console.log(n)}o.disabled=!0,o.classList.add("disabled"),atomic(t).then(function(e){for(var t=[],n=e.data,a=0;a<n.length;a++)t.push({date:n[a].date,author:n[a].author,category:n[a].categories[0],title:n[a].title.rendered,tags:n[a].tags,link:n[a].link,description:n[a].excerpt.rendered.slice(3,-5)});return o.disabled=!1,o.classList.remove("disabled"),e.data.length<10&&(o.textContent="All Posts Loaded",o.disabled=!0,o.classList.add("disabled")),t}).then(function(e){for(var t=0;t<e.length;t++){var n=e[t].date,a=new Date(n);a=a.toDateString().slice(3);var o=e[t].title,i="Uncategorized",r=e[t].link,c=e[t].description;switch(e[t].category){case 17:i="Maintenance Reminder";break;case 63:i="Service Intervals";break;case 65:i="Troubleshooting";break;case 6:i="Talk With A Tech"}var s=document.createElement("div");s.classList.add("card"),s.innerHTML='<div class="card-content">'+o+"</div>",s.querySelector(".card-content").innerHTML='<p class="card-category"><a href="/?cat='+e[t].category+'">'+i+'</a></p><h4 class="card-title"><a href="'+r+'">'+o+'</a></h4><p class="card-description">'+c+'</p><ul class="single-tags--list"></ul>',d.appendChild(s)}}).catch(function(e){console.log(e)}),a++})}}(),function(){if(!document.body.classList.contains("woocommerce-cart")&&!document.body.classList.contains("woocommerce-checkout")){var t=document.querySelector(".alert--add-to-cart"),n=!1,a=document.querySelector(".alert--cart-list"),o=document.querySelector(".alert--header");a.addEventListener("click",function(e){e.target.matches("a")?console.log("redirect"):e.target.matches("button")&&(e.preventDefault(),function(e){if(e.preventDefault(),i("down"),e.target.matches("button")){var t=e.target.dataset.index,n=a.querySelector('[data-index="'+t+'"]');n.remove(),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"remove_item_from_cart",product_id:n.dataset.productid}})}a.children.length<1&&(a.innerHTML="<li>Your shopping cart is empty.</li>")}(e))}),a.addEventListener("change",function(e){var t,n,a;t=e.target,n=t.parentElement.parentElement.dataset.productid,a=t.value,atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"increment_item_in_cart",product_id:n,qty:a}}).then(function(e){200===e.xhr.status&&console.log("quantity for "+n+" is set to "+a)})}),o.addEventListener("click",function(e){r()}),0<a.querySelectorAll("li").length&&function(){if(!t)return console.error("Cart Markup is not on the page");t.classList.add("alert--is-active"),t.classList.add("alert--is-minimized")}();var e=document.querySelectorAll(".add-to-cart");e&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),i("up"),function(e){if(!e.value)return console.log("i dont have a value"),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"find_product_by_sku",sku:e.dataset.sku}}).then(function(e){console.log(e)});var n=e.value;atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"add_item_to_cart",product_id:n,qty:1}}).then(function(e){var t;200===e.xhr.status&&(console.log("successfully added "+n+" to cart"),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"get_product_details",product_id:t}}).then(function(e){return JSON.parse(e.data.slice(0,-1))}).then(function(e){console.table(e),a.innerHTML=e.map(function(e,t){return e.salePrice?'<li class="alert--cart-item" data-productID="'+e.id+'" data-index="'+t+'"><span class="alert--cart-part"><span class="alert--cart-part-type"><a href="'+e.permalink+'">'+e.name+'</a></span><span class="alert--cart-part-number">'+e.sku+" - <del>$"+e.price+'</del> <span class="sale-price">$'+e.salePrice+'</span></span></span><span><label for="product_quantity">Qty: </label><input type="number" name="product_quantity" min="1" max="50" value="1"><button class="alert--remove-item" data-index="'+t+'">&times;</button></span></li>':'<li class="alert--cart-item" data-productID="'+e.id+'" data-index="'+t+'"><span class="alert--cart-part"><span class="alert--cart-part-type"><a href="'+e.permalink+'">'+e.name+'</a></span><span class="alert--cart-part-number">'+e.sku+" - $"+e.price+'</span></span><span><label for="product_quantity">Qty: </label><input type="number" name="product_quantity" min="1" max="50" value="1"><button class="alert--remove-item" data-index="'+t+'">&times;</button></span></li>'}).join("")}),setTimeout(function(){r()},200))})}(e.target)})})}function i(e){var t=parseInt(o.querySelector(".product-count").innerText);e?("up"===e?++t:--t,o.querySelector("h4").innerHTML=1<t||0===t?'<span class="product-count">'+t+"</span> Products in Cart":'<span class="product-count">'+t+"</span> Product in Cart"):o.querySelector(".product-count").innerText=t}function r(e){t?(n=!n,t.classList.add("alert--is-active"),t.classList.contains("alert--is-minimized")&&t.classList.remove("alert--is-minimized")):console.error("Cart Markup is not on the page")}}(),function(){var e=document.querySelectorAll(".accordian--title");if(e)for(var t=0;t<e.length;t++)e[t].parentElement.classList.add("accordian--is-collapsed"),e[t].addEventListener("click",function(e){e.target.parentElement.classList.contains("accordian--is-collapsed")?e.target.parentElement.classList.remove("accordian--is-collapsed"):e.target.parentElement.classList.add("accordian--is-collapsed")})}(),function(){var e=document.querySelectorAll(".tooltip--toggle");if(e)for(var t=0;t<e.length;t++)e[t].nextElementSibling.classList.add("tooltip--is-hidden"),e[t].addEventListener("click",function(e){console.log(e.target.nextElementSibling.classList.toggle("tooltip--is-hidden"))})}(),function(){var e=document.querySelectorAll(".modal--close"),t=document.querySelectorAll("button[data-modal-launch]");if(e){for(var n=0;n<t.length;n++)t[n].addEventListener("click",function(e){var t=e.target.dataset.modalLaunch;if(document.querySelector(".modal[data-modal="+t+"]").classList.remove("modal--is-hidden"),document.body.classList.add("modal--is-open"),t="sign-up-form")for(var n=document.querySelectorAll('meta[property="article:tag"]'),a=0;a<n.length;a++)if(n[a].content.includes("John Deere")&&"John Deere Lawn Tractor"!==n[a].content){var o=n[a].content.split("John Deere ")[1];document.querySelector("#mce-MODEL").value=o.toUpperCase()}});for(n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.target.parentElement.parentElement.classList.add("modal--is-hidden"),document.body.classList.remove("modal--is-open")});document.addEventListener("keyup",function(e){if(27==e.keyCode){var t=document.querySelectorAll("div[data-modal]");document.body.classList.remove("modal--is-open");for(var n=0;n<t.length;n++)t[n].classList.add("modal--is-hidden")}})}}(),window.jQuery&&document.body.classList.contains("single-post")&&$("#mc-embedded-subscribe-form").on("submit",function(e){e.preventDefault();var t=$(this),n=t.find("#mce-EMAIL").val(),a=t.find("#mce-FNAME").val(),o=t.find("#mce-LNAME").val(),i=t.find("#mce-MODEL").val(),r=t.find("#mce-CURRENT_HR").val(),c=t.find("#mce-MOWING_TIM").val();c=c.split("(")[1].split(")")[0].toLowerCase(),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){},success:function(e){"success"!=e.result?$("#mc_embed_signup_scroll").prepend('<p style="border: 1px solid red; padding: 1rem;">'+e.msg+"</p>"):(t.hide(),$('div[data-modal="sign-up-form"] .modal-heading').text("Great "+a+"!").next().text("You will receive a confirmation email soon and we will keep you up to date on your needed parts.")),$.ajax({type:"POST",url:"https://api.flock.com/hooks/sendMessage/855832cd-bd79-436d-9f1f-dcf0020251dd",data:JSON.stringify({text:a+" "+o+" has a "+i+" with "+r+" hours and takes "+c+" to mow. Contact "+a+" at "+n}),dataType:"json",contentType:"application/json"})}})}),function(){var e=parseInt(window.getComputedStyle(document.querySelector("body")).getPropertyValue("font-size")),t=document.querySelector("#stickyNav");if(t){var n=window.scrollY,a=t.offsetTop,o=t.clientWidth;window.addEventListener("resize",function(){a=t.offsetTop,console.log(a)}),document.addEventListener("scroll",function(){n=window.scrollY,a-3*e<n?(t.classList.add("nav--is-sticky"),t.style.maxWidth=o+"px"):t.classList.remove("nav--is-sticky")})}}(),function(){if(document.body.classList.contains("woocommerce-cart")){var e=document.querySelector(".gfp-cart--list"),t=document.querySelector('button[name="update_cart"]'),i=document.querySelector(".cart-subtotal td"),r=document.querySelector(".order-total td strong"),c=document.querySelectorAll(".cart-discount");e.addEventListener("change",function(e){"INPUT"===e.target.tagName&&(t.disabled=!1,function(e){console.log("update line item price");var t=e.parentElement.parentElement.parentElement,n=t.querySelector(".regular-price"),a=t.querySelector(".sale-price");n.textContent=(n.dataset.price*e.value).toFixed(2),a&&(a.textContent="$"+(a.dataset.salePrice*e.value).toFixed(2));i.textContent="Updating...",r.textContent="Updating...",c.forEach(function(e){var t=e.dataset.discountType;"coupon-percent"===t&&(e.querySelector("td[data-title]").textContent="Updating...")}),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"increment_item_in_cart",product_id:t.dataset.productid,qty:e.value}}).then(function(){o()})}(e.target))}),e.addEventListener("click",function(t){"remove"===t.target.className&&(t.preventDefault(),i.textContent="Updating...",r.textContent="Updating...",atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"remove_item_from_cart",product_id:t.target.dataset.product_id}}).then(function(e){console.log(e.data),t.target.parentElement.remove(),o()}))})}function o(){console.log("update cart totals"),atomic(window.location.origin+"/wp-admin/admin-ajax.php",{method:"POST",data:{action:"get_cart"}}).then(function(e){var t=Object.values(JSON.parse(e.data.slice(0,-1))),o=0,n=0;t.forEach(function(e){o+=e.line_subtotal,n+=e.line_total}),c.forEach(function(e){var t=e.dataset.discountType,n=e.dataset.discountAmount;if("coupon-percent"===t){var a=o*(n/100);e.querySelector("td[data-title]").textContent="-$"+a.toFixed(2)}}),i.textContent="$"+o.toFixed(2),r.textContent="$"+n.toFixed(2)})}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0b21pYy5taW4uanMiLCJzaXRlLWhlYWRlci5qcyIsInNpbmdsZS1wb3N0LmpzIiwic2luZ2xlLXByb2R1Y3QuanMiLCJzaW5nbGUtY29tbWVudHMuanMiLCJwb3N0LWxpc3RpbmcuanMiLCJhamF4LWFkZC10by1jYXJ0LmpzIiwiYWNjb3JkaWFuLmpzIiwidG9vbHRpcC5qcyIsIm1vZGFsLmpzIiwic2lnbi11cC1mb3JtLmpzIiwic3RpY2t5LW5hdmlnYXRpb24uanMiLCJjYXJ0LmpzIl0sIm5hbWVzIjpbInQiLCJlIiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIndpbmRvdyIsImF0b21pYyIsImdsb2JhbCIsInRoaXMiLCJuIiwibWV0aG9kIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRhdGEiLCJoZWFkZXJzIiwiQ29udGVudC10eXBlIiwicmVzcG9uc2VUeXBlIiwidGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsInIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImEiLCJYTUxIdHRwUmVxdWVzdCIsIm8iLCJQcm9taXNlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwieGhyIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicyIsInN0YXR1c1RleHQiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9udGltZW91dCIsInNlbmQiLCJ0ZXN0Iiwic3RyaW5naWZ5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJpIiwiY2FuY2VsIiwiYWJvcnQiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZU1lbnUiLCJoZWFkZXJIZWlnbnQiLCJvZmZzZXRIZWlnaHQiLCJzdHlsZSIsInRvcCIsImhlYWRlclRvcEJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmF2TGV2ZWxPbmUiLCJjbGFzc0xpc3QiLCJhZGQiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGYiLCJ0YXJnZXQiLCJjaGlsZE1lbnUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjb250YWlucyIsInJlbW92ZSIsInBhcmVudEVsZW1lbnQiLCJhbGxMZXZlbE9uZUxpbmtzIiwibGlua3MiLCJqIiwiYm9keSIsInRvZ2dsZSIsIm1vZGVsTW9kaWZlclNlbGVjdCIsImxvYyIsInZhbHVlIiwibG9jYXRpb24iLCJocmVmIiwiYWxsUm93cyIsImRhdGFzZXQiLCJwcm9kdWN0U29sZCIsImltZ0V4aXN0cyIsImltZ1BhdGgiLCJwcm9kdWN0SW1hZ2UiLCJwcm9kSW1nIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsInByb2RJbWdDb250YWluZXIiLCJhcHBlbmRDaGlsZCIsIm1haW50ZW5hbmNlS2l0Q29udGFpbmVyIiwib25sb2FkIiwib2Zmc2V0VG9wIiwiYmFzZUZvbnRTaXplIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImZvbnRTaXplIiwicGFyc2VJbnQiLCJzcGxpdCIsInNjcm9sbFkiLCJTdHJpbmciLCJpbmNsdWRlcyIsInNlYXJjaCIsInN0YXJ0IiwiaW5kZXhPZiIsIkVsZW1lbnQiLCJDaGFyYWN0ZXJEYXRhIiwiRG9jdW1lbnRUeXBlIiwiZm9yRWFjaCIsIml0ZW0iLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIkFycmF5Iiwic2VhcmNoRWxlbWVudCIsImZyb21JbmRleCIsIlR5cGVFcnJvciIsImxlbiIsIngiLCJ5IiwiayIsIk1hdGgiLCJtYXgiLCJhYnMiLCJpc05hTiIsImZpdG1lbnRUZXh0RmlsdGVyIiwicHJvZHVjdEZpdG1lbnRUYWdzIiwidG9VcHBlckNhc2UiLCJ0ZXh0Q29udGVudCIsImNvbW1lbnRzQ29udGFpbmVyIiwiY29tbWVudHNSZXBseSIsImJ1dHRvbiIsImlubmVySFRNTCIsImlkIiwidmlzaWJpbGl0eSIsIm1heEhlaWdodCIsInBhZGRpbmciLCJtYXJnaW5Ub3AiLCJvcGFjaXR5IiwibG9hZFBvc3RzIiwib2Zmc2V0IiwicG9zdExpc3RpbmciLCJ1cmwiLCJvcmlnaW4iLCJjYXQiLCJjb25zb2xlIiwibG9nIiwiZGlzYWJsZWQiLCJ0aGVuIiwicG9zdE9iaiIsImRhdGUiLCJhdXRob3IiLCJjYXRlZ29yeSIsImNhdGVnb3JpZXMiLCJ0aXRsZSIsInJlbmRlcmVkIiwidGFncyIsImxpbmsiLCJkZXNjcmlwdGlvbiIsImV4Y2VycHQiLCJzbGljZSIsInBvc3RUaW1lIiwicG9zdFByZXR0eVRpbWUiLCJEYXRlIiwidG9EYXRlU3RyaW5nIiwicG9zdFRpdGxlIiwicG9zdENhdGVnb3J5IiwicG9zdExpbmsiLCJwb3N0RGVzY3JpcHRpb24iLCJjYXJkIiwiY2F0Y2giLCJlcnJvciIsImNhcnREcmF3ZXIiLCJjYXJ0T3BlbiIsImNhcnRMaXN0IiwiY2FydEhlYWRlciIsIm1hdGNoZXMiLCJ1cGRhdGVDYXJ0SGVhZGVyQ291bnQiLCJpbmRleCIsInBhcmVudCIsImFjdGlvbiIsInByb2R1Y3RfaWQiLCJwcm9kdWN0aWQiLCJjaGlsZHJlbiIsInJlbW92ZWZyb21DYXJ0IiwiZWxlbWVudENoYW5nZWQiLCJwcm9kdWN0SUQiLCJxdHkiLCJkaXNwbGF5Q2FydCIsImRpc3BsYXlNaW5pbWl6ZWRDYXJ0IiwiYWRkVG9DYXJ0QnV0dG9ucyIsImVsZW0iLCJza3UiLCJpdGVtQXJyYXkiLCJ0YWJsZSIsIm1hcCIsInNhbGVQcmljZSIsInBlcm1hbGluayIsIm5hbWUiLCJwcmljZSIsInNldFRpbWVvdXQiLCJhZGRUb0NhcnQiLCJkaXJlY3Rpb24iLCJjdXJyZW50Q291bnQiLCJpbm5lclRleHQiLCJpc01pbmltaXplZCIsImFjY29yZGlhbkJ1dHRvbnMiLCJhbGxUb29sVGlwcyIsImNsb3NlTW9kYWwiLCJsYXVuY2hNb2RhbCIsIm1vZGFsSUQiLCJtb2RhbExhdW5jaCIsInBhZ2VUYWdzIiwiY29udGVudCIsIm1vZGVsIiwia2V5Q29kZSIsImpRdWVyeSIsIiQiLCJvbiIsIiR0aGlzIiwiZW1haWwiLCJmaW5kIiwidmFsIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJtb2RlbE51bWJlciIsImN1cnJlbnRIb3VycyIsIm1vd2luZ1RpbWUiLCJ0b0xvd2VyQ2FzZSIsImFqYXgiLCJ0eXBlIiwiYXR0ciIsInNlcmlhbGl6ZSIsImNhY2hlIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsImVyciIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJwcmVwZW5kIiwibXNnIiwiaGlkZSIsInRleHQiLCJuZXh0IiwiZ2V0UHJvcGVydHlWYWx1ZSIsIm5hdiIsIm5hdk9mZnNldCIsIm5hdldpZHRoIiwiY2xpZW50V2lkdGgiLCJtYXhXaWR0aCIsInVwZGF0ZUNhcnRCdXR0b24iLCJjYXJ0U3VidG90YWwiLCJjYXJ0VG90YWwiLCJjb3Vwb25zIiwidGFnTmFtZSIsIml0ZW1EZXRhaWxzIiwicmVndWxhclByaWNlIiwidG9GaXhlZCIsImNvdXBvbiIsImNvdXBvblR5cGUiLCJkaXNjb3VudFR5cGUiLCJ1cGRhdGVDYXJ0VG90YWxzIiwidXBkYXRlTGluZUl0ZW1QcmljZSIsImNsYXNzTmFtZSIsImNhcnQiLCJ2YWx1ZXMiLCJjYXJ0U3VidG90YWxBbW91bnQiLCJjYXJ0VG90YWxBbW91bnQiLCJsaW5lX3N1YnRvdGFsIiwibGluZV90b3RhbCIsImNvdXBvbkFtb3VudCIsImRpc2NvdW50QW1vdW50IiwiZGlzY291bnQiXSwibWFwcGluZ3MiOiJDQUNBLFNBQUFBLEVBQUFDLEdBQUEsbUJBQUFDLFFBQUFBLE9BQUFDLElBQUFELE9BQUEsR0FBQSxXQUFBLE9BQUFELEVBQUFELEtBQUEsaUJBQUFJLFFBQUFDLE9BQUFELFFBQUFILEVBQUFELEdBQUFNLE9BQUFDLE9BQUFOLEVBQUFELEdBQUEsQ0FBQSxvQkFBQVEsT0FBQUEsT0FBQSxvQkFBQUYsT0FBQUEs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WUFBQSxLQUFBZ0osRUFBQWYsUUFBQSxNQUlBTixFQUFBM0gsWUFBQSxJQUFBMEksRUFBQVQsUUFBQSxHQUNBTCxFQUFBNUgsWUFBQSxJQUFBMkksRUFBQVYsUUFBQSxNQTFGQSIsImZpbGUiOiJnbG9iYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgYXRvbWljIHY0LjIuMSB8IChjKSAyMDE4IENocmlzIEZlcmRpbmFuZGkgfCBNSVQgTGljZW5zZSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9jZmVyZGluYW5kaS9hdG9taWMgKi9cbiEoZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLChmdW5jdGlvbigpe3JldHVybiBlKHQpfSkpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCk6d2luZG93LmF0b21pYz1lKHQpfSkoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcywoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGUsbj17bWV0aG9kOlwiR0VUXCIsdXNlcm5hbWU6bnVsbCxwYXNzd29yZDpudWxsLGRhdGE6e30saGVhZGVyczp7XCJDb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwifSxyZXNwb25zZVR5cGU6XCJ0ZXh0XCIsdGltZW91dDpudWxsLHdpdGhDcmVkZW50aWFsczohMX0sbz1mdW5jdGlvbigpe3JldHVyblwiWE1MSHR0cFJlcXVlc3RcImluIHQmJlwiSlNPTlwiaW4gdCYmXCJQcm9taXNlXCJpbiB0fSxyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXt9LGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07IShmdW5jdGlvbihlKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYoXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlW25dKT90W25dPXIodFtuXSxlW25dKTp0W25dPWVbbl0pfSkobil9cmV0dXJuIHR9LHM9ZnVuY3Rpb24odCl7dmFyIG47aWYoXCJ0ZXh0XCIhPT1lLnJlc3BvbnNlVHlwZSYmXCJcIiE9PWUucmVzcG9uc2VUeXBlKXJldHVybntkYXRhOnQucmVzcG9uc2UseGhyOnR9O3RyeXtuPUpTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoKGUpe249dC5yZXNwb25zZVRleHR9cmV0dXJue2RhdGE6bix4aHI6dH19LGk9ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fFwiW29iamVjdCBGb3JtRGF0YV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSlyZXR1cm4gdDtpZigvYXBwbGljYXRpb25cXC9qc29uL2kudGVzdChlLmhlYWRlcnNbXCJDb250ZW50LXR5cGVcIl0pfHxcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO3ZhciBuPVtdO2Zvcih2YXIgbyBpbiB0KXQuaGFzT3duUHJvcGVydHkobykmJm4ucHVzaChlbmNvZGVVUklDb21wb25lbnQobykrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbb10pKTtyZXR1cm4gbi5qb2luKFwiJlwiKX0sYT1mdW5jdGlvbih0KXt2YXIgbj1uZXcgWE1MSHR0cFJlcXVlc3Qsbz1uZXcgUHJvbWlzZShmdW5jdGlvbihvLHIpe24ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PW4ucmVhZHlTdGF0ZSYmKG4uc3RhdHVzPj0yMDAmJm4uc3RhdHVzPDMwMD9vKHMobikpOnIoe3N0YXR1czpuLnN0YXR1cyxzdGF0dXNUZXh0Om4uc3RhdHVzVGV4dH0pKX0sbi5vcGVuKGUubWV0aG9kLHQsITAsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxuLnJlc3BvbnNlVHlwZT1lLnJlc3BvbnNlVHlwZTtmb3IodmFyIGEgaW4gZS5oZWFkZXJzKWUuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShhKSYmbi5zZXRSZXF1ZXN0SGVhZGVyKGEsZS5oZWFkZXJzW2FdKTtlLnRpbWVvdXQmJihuLnRpbWVvdXQ9ZS50aW1lb3V0LG4ub250aW1lb3V0PWZ1bmN0aW9uKHQpe3Ioe3N0YXR1czo0MDgsc3RhdHVzVGV4dDpcIlJlcXVlc3QgdGltZW91dFwifSl9KSxlLndpdGhDcmVkZW50aWFscyYmKG4ud2l0aENyZWRlbnRpYWxzPSEwKSxuLnNlbmQoaShlLmRhdGEpKX0pO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe24uYWJvcnQoKX0sb307cmV0dXJuIGZ1bmN0aW9uKHQscyl7aWYoIW8oKSl0aHJvd1wiQXRvbWljOiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgbWV0aG9kcyB1c2VkIGluIHRoaXMgcGx1Z2luLlwiO3JldHVybiBlPXIobixzfHx7fSksYSh0KX19KSk7IiwiaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gMTA4MCkge1xuICAgIC8vICQoJy5tZW51LWl0ZW0tLXRvcC1sZXZlbCAuc3ViLW1lbnUtLWxldmVsLW9uZSA+IGxpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ2FjdGl2ZScpLmZpbmQoJy5zdWItbWVudS0tbGV2ZWwtdHdvJykuYWRkQ2xhc3MoJ2FjY29yZGlhbi1vcGVuJyk7XG4gICAgLy8gYWxlcnQoJ3RhZCcpO1xufVxuXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbiNoYW1idXJnZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgdG9nZ2xlTWVudSgpO1xuICB2YXIgaGVhZGVySGVpZ250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpdGUtaGVhZGVyJykub2Zmc2V0SGVpZ2h0O1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi0tbGV2ZWwtemVybycpLnN0eWxlLnRvcCA9IGhlYWRlckhlaWdudCArICdweCc7XG59KTtcblxudmFyIGhlYWRlclRvcEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tYnV0dG9uJyk7XG52YXIgbmF2TGV2ZWxPbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi0tbGV2ZWwtb25lJyk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgbmF2TGV2ZWxPbmUubGVuZ3RoOyBpKyspIHtcbiAgbmF2TGV2ZWxPbmVbaV0ucXVlcnlTZWxlY3RvcignbGk6Zmlyc3QtY2hpbGQgYScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufVxuXG5mb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlclRvcEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgaGVhZGVyVG9wQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgdmFyIGNoaWxkTWVudSA9IHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKTtcbiAgICBpZiAoY2hpbGRNZW51LmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIGNoaWxkTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBzZWxmLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coc2VsZi5wYXJlbnRFbGVtZW50KTtcbiAgICAvLyBzZWxmLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLS1sZXZlbC1vbmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfSk7XG59XG5cbnZhciBhbGxMZXZlbE9uZUxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IGFsbExldmVsT25lTGlua3MubGVuZ3RoOyBpKyspIHtcbiAgYWxsTGV2ZWxPbmVMaW5rc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGlua3MubGVuZ3RoOyBqKyspIHtcbiAgICAgIGxpbmtzW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICAvLyBpZiAoYWxsTGV2ZWxPbmVMaW5rcy5jbGFzc0xpc3QuY29udGFpbnMoJycpKSB7fVxuICAgIC8vIGFsbExldmVsT25lTGlua3MuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tLWxldmVsLW9uZSA+IGxpID4gYScpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdtZW51LW9wZW4nKTtcbiAgICB2YXIgbWVudUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoYW1idXJnZXInKTtcbiAgICBtZW51QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xufSIsIihmdW5jdGlvbigpIHtcblxuICAvLyBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3NpbmdsZS1wb3N0JykpIHtcblxuICAvLyAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtaXRlbScpKSB7XG4gIC8vICAgICB2YXIgYWxlcnRDYXJ0SXRlbVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWl0ZW0nKS5pbm5lckhUTUw7XG4gIC8vICAgfVxuICAvLyAgIHZhciBhZGRlZFByb2R1Y3RzID0gW107XG5cbiAgLy8gICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWxpc3QnKSkge1xuICAvLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWxpc3QnKS5pbm5lckhUTUwgPSAnJztcbiAgLy8gICB9XG5cbiAgLy8gfVxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBNSU5JWkVTIEFMRVJUIE9OIFBBR0UgTE9BRCBJRiBDT09LSUUgUFJFU0VOVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cbiAgLy8gaWYgKGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG4gIC8vICAgcmV0dXJuIGl0ZW0uaW5kZXhPZignY2FydFVSTD0nKSA+PSAwXG4gIC8vIH0pLmxlbmd0aCkge1xuICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tYWRkLXRvLWNhcnQnKS5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gIC8vIH1cblxuICBcbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQ0hBTkdFIFBBR0UgV0hFTiBTRUxFQ1RFRCBNT0RFTCBNT0RJRklFUlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICB2YXIgbW9kZWxNb2RpZmVyU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsTW9kaWZpZXJzJyk7XG4gIHZhciBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW5fY29udGVudCcpO1xuXG4gIGlmIChtb2RlbE1vZGlmZXJTZWxlY3QpIHtcbiAgICBtb2RlbE1vZGlmZXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGxvYyA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsb2M7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgU0hPVyBQUk9EVUNUIElNQUdFIE9OIEhPVkVSXG4gIEBub3RlID0gT25seSBydW5zIG9uIHNjcmVlbiBsYXJnZXIgdGhhbiAxMDgwcHhcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3NpbmdsZS1wb3N0JykpIHtcbiAgICB2YXIgYWxsUm93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlIHRyJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbFJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFsbFJvd3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCh3aW5kb3cuaW5uZXJXaWR0aCA8IDEwODApIHx8IChlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCcpLmRhdGFzZXQucHJvZHVjdFNvbGQgPT09ICdmYWxzZScpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGltZ0V4aXN0cyA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ3RkOmZpcnN0LWNoaWxkIC5wcm9kdWN0LWltYWdlLWNvbnRhaW5lcicpO1xuICAgICAgICBpZiAoaW1nRXhpc3RzKSB7XG4gICAgICAgICAgaW1nRXhpc3RzLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2R1Y3QtaW1hZ2UtLWlzLWhpZGRlbicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbWdQYXRoID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5kYXRhc2V0LnByb2R1Y3RJbWFnZTtcbiAgICAgICAgdmFyIHByb2RJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgcHJvZEltZy5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWltYWdlJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mIGltZ1BhdGggPT09ICd1bmRlZmluZWQnKSB7IFxuICAgICAgICAgIHByb2RJbWcuc3JjID0gJ2h0dHBzOi8vY2RuMy52b2x1c2lvbi5jb20veXhoZmUuZGZxZXcvdi92c3BmaWxlcy90ZW1wbGF0ZXMvZ2ZwLXRlc3QvaW1hZ2VzL25vcGhvdG8uZ2lmJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9kSW1nLnNyYyA9IGltZ1BhdGg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJvZEltZ0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBwcm9kSW1nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW1hZ2UtY29udGFpbmVyJyk7XG4gICAgICAgIHByb2RJbWdDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvZEltZyk7XG4gICAgICAgIFxuICAgICAgICB2YXIgdGFibGVDZWxsID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5hcHBlbmRDaGlsZChwcm9kSW1nQ29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgICB9KTtcblxuICAgICAgYWxsUm93c1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCd0ZDpmaXJzdC1jaGlsZCAucHJvZHVjdC1pbWFnZS1jb250YWluZXInKS5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWltYWdlLS1pcy1oaWRkZW4nKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEFERElORyBQUk9EVUNUIFRPIENBUlRcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgLy8gICB2YXIgc2VsZiA9IGUudGFyZ2V0O1xuICAgIFxuICAvLyAgIGlmIChzZWxmLmNsYXNzTGlzdC5jb250YWlucygnYWRkLXRvLWNhcnQnKSkge1xuXG4gIC8vICAgICB2YXIgYWxlcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWFkZC10by1jYXJ0Jyk7XG4gIC8vICAgICB2YXIgcGFydFR5cGUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcigndGQ6Zmlyc3QtY2hpbGQnKS5pbm5lclRleHQ7XG4gIC8vICAgICB2YXIgcGFydE51bWJlciA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0ZDpudGgtY2hpbGQoMiknKS5pbm5lclRleHQ7XG5cbiAgLy8gICAgIGlmIChhZGRlZFByb2R1Y3RzLmluY2x1ZGVzKHBhcnROdW1iZXIpKSB7XG4gIC8vICAgICAgIHJldHVybjtcbiAgLy8gICAgIH1cblxuICAvLyAgICAgYWRkZWRQcm9kdWN0cy5wdXNoKHBhcnROdW1iZXIpO1xuXG4gIC8vICAgICB2YXIgYWRkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdsaScgKTtcbiAgLy8gICAgIGFkZEl0ZW0uY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWNhcnQtaXRlbScpO1xuICAvLyAgICAgYWRkSXRlbS5kYXRhc2V0LnByb2R1Y3Rjb2RlID0gcGFydE51bWJlcjtcbiAgLy8gICAgIGFkZEl0ZW0uaW5uZXJIVE1MID0gYWxlcnRDYXJ0SXRlbVRlbXBsYXRlO1xuXG4gIC8vICAgICBhZGRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1wYXJ0LW51bWJlcicpLmlubmVyVGV4dCA9IHBhcnROdW1iZXI7XG4gIC8vICAgICBhZGRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1wYXJ0LXR5cGUnKS5pbm5lclRleHQgPSBwYXJ0VHlwZTtcblxuICAvLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWxpc3QnKS5hcHBlbmRDaGlsZChhZGRJdGVtKTtcbiAgICAgIFxuXG4gIC8vICAgICBhbGVydC5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtYWN0aXZlJyk7XG5cbiAgLy8gICAgIGlmIChhbGVydC5jbGFzc0xpc3QuY29udGFpbnMoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKSkge1xuICAvLyAgICAgICBhbGVydC5jbGFzc0xpc3QucmVtb3ZlKCdhbGVydC0taXMtbWluaW1pemVkJylcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vIH0pO1xuXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgVE9HR0xFIENBUlQgQUxFUlRcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICAvLyBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlQWxlcnQnKSkge1xuICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZUFsZXJ0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gIC8vICAgICB2YXIgc2VsZiA9IGUudGFyZ2V0O1xuICAvLyAgICAgdmFyIGNvbnRhaW5lciA9IHNlbGYucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAvLyAgICAgdmFyIGNsYXNzZXMgPSBjb250YWluZXIuY2xhc3NMaXN0LnRvU3RyaW5nKCk7XG5cbiAgLy8gICAgIGlmIChjbGFzc2VzLmluY2x1ZGVzKCdhbGVydC0taXMtbWluaW1pemVkJykgJiYgY2xhc3Nlcy5pbmNsdWRlcygnYWxlcnQtLWlzLWFjdGl2ZScpKSB7XG4gIC8vICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLW1pbmltaXplZCcpO1xuICAvLyAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWlzLWFjdGl2ZScpO1xuICAvLyAgICAgfVxuICAvLyAgIH0pO1xuICAvLyB9XG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFJFTU9WRSBJVEVNIEZST00gQ0FSVFxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICovXG4gIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAvLyAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gIC8vICAgaWYgKHNlbGYuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbGVydC0tcmVtb3ZlLWl0ZW0nKSkge1xuICAvLyAgICAgdmFyIHByb2R1Y3RDb2RlID0gc2VsZi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5wcm9kdWN0Y29kZTtcbiAgLy8gICAgIHZhciBpbmRleCA9IGFkZGVkUHJvZHVjdHMuaW5kZXhPZihwcm9kdWN0Q29kZSk7XG4gIC8vICAgICBhZGRlZFByb2R1Y3RzLnNwbGljZShpbmRleCwgMSk7XG4gIC8vICAgICBzZWxmLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmUoKTsgXG4gIC8vICAgfVxuICAvLyB9KTtcblxuXG5cbiAgLy8gZnVuY3Rpb24gYnVpbGRDYXJ0U3RyaW5nKCkge1xuICAvLyAgIHZhciBpbml0VVJMID0gJ2h0dHBzOi8vd3d3LmdyZWVuZmFybXBhcnRzLmNvbS9zaG9wcGluZ2NhcnQuYXNwPyc7XG4gIC8vICAgdmFyIGFsbEFkZGVkUHJvZHVjdHMgPSBbXTtcbiAgLy8gICB2YXIgYWxsQWRkZWRJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGVydC0tY2FydC1pdGVtJyk7XG5cbiAgLy8gICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbEFkZGVkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgLy8gICAgIHZhciBwcm9kdWN0Q29kZSA9IGFsbEFkZGVkSXRlbXNbaV0uZGF0YXNldC5wcm9kdWN0Y29kZTtcbiAgLy8gICAgIHZhciBwcm9kdWN0UXR5ID0gYWxsQWRkZWRJdGVtc1tpXS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicHJvZHVjdF9xdWFudGl0eVwiXScpLnZhbHVlO1xuICAvLyAgICAgYWxsQWRkZWRQcm9kdWN0cy5wdXNoKHtcbiAgLy8gICAgICAgcHJvZHVjdENvZGU6IHByb2R1Y3RDb2RlLFxuICAvLyAgICAgICBwcm9kdWN0UXR5OiBwcm9kdWN0UXR5XG4gIC8vICAgICB9KTtcbiAgLy8gICB9XG5cbiAgLy8gICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbEFkZGVkUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgLy8gICAgIGlmIChpIDwgMSkge1xuICAvLyAgICAgICBpbml0VVJMID0gaW5pdFVSTCArICdwcm9kdWN0Y29kZT0nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0Q29kZSArICcmUVRZLicgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RDb2RlICsgJz0nICsgYWxsQWRkZWRQcm9kdWN0c1tpXS5wcm9kdWN0UXR5O1xuICAvLyAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgaW5pdFVSTCA9IGluaXRVUkwgKyAnJnByb2R1Y3Rjb2RlPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RDb2RlICsgJyZRVFkuJyArIGFsbEFkZGVkUHJvZHVjdHNbaV0ucHJvZHVjdENvZGUgKyAnPScgKyBhbGxBZGRlZFByb2R1Y3RzW2ldLnByb2R1Y3RRdHk7XG4gIC8vICAgICB9XG4gIC8vICAgfVxuXG4gIC8vICAgcmV0dXJuIGluaXRVUkw7XG4gIC8vIH1cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgQ0hFQ0tPVVQgLSBTZW5kIHByb2R1Y3RzIHRvIFZvbHVzaW9uXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICAvLyBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1Ym1pdENoZWNrb3V0JykgJiYgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3NpbmdsZS1wb3N0JykpIHtcbiAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0Q2hlY2tvdXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgLy8gICAgIC8vIGNhcnQgdXJsIHRlbXBsYXRlOiBodHRwczovL3d3dy5ncmVlbmZhcm1wYXJ0cy5jb20vc2hvcHBpbmdjYXJ0LmFzcD9wcm9kdWN0Y29kZT1qZHpnOTAwJlFUWS5qZHpnOTAwPTVcbiAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYnVpbGRDYXJ0U3RyaW5nKCk7XG4gIC8vICAgfSk7XG4gIC8vIH1cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBTQVZFIEZPUiBMQVRFUiAtIFNlbmQgcHJvZHVjdHMgdG8gVm9sdXNpb24gYW5kIGNvb2tpZVxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICAvLyBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NhdmVGb3JMYXRlcicpKSB7XG4gIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NhdmVGb3JMYXRlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgICAgZG9jdW1lbnQuY29va2llID0gJ2NhcnRVUkw9JyArIGJ1aWxkQ2FydFN0cmluZygpO1xuICAvLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1hZGQtdG8tY2FydCcpLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgLy8gICB9KTtcbiAgLy8gfVxuXG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFNUSUNLWSBNQUlOVEVOQU5DRSBLSVQgQlVZIE5PV1xuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cblxuICB2YXIgbWFpbnRlbmFuY2VLaXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbnRlbmFuY2Uta2l0LWNvbnRhaW5lcicpO1xuICBpZiAobWFpbnRlbmFuY2VLaXRDb250YWluZXIgJiYgd2luZG93LmlubmVyV2lkdGggPiAxMDgwKSB7XG4gICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9mZnNldFRvcCA9IG1haW50ZW5hbmNlS2l0Q29udGFpbmVyLm9mZnNldFRvcDtcbiAgICAgIHZhciBiYXNlRm9udFNpemUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5LCBudWxsKS5mb250U2l6ZTtcbiAgICAgIGJhc2VGb250U2l6ZSA9IHBhcnNlSW50KGJhc2VGb250U2l6ZS5zcGxpdCgncHgnKVswXSk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IChvZmZzZXRUb3AgLSAoYmFzZUZvbnRTaXplICogMykpKSB7XG4gICAgICAgICAgbWFpbnRlbmFuY2VLaXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbWFpbnRlbmFuY2Uta2l0LWNvbnRhaW5lci0taXMtZml4ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPCAob2Zmc2V0VG9wIC0gKGJhc2VGb250U2l6ZSAqIDMpKSkge1xuICAgICAgICAgIG1haW50ZW5hbmNlS2l0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ21haW50ZW5hbmNlLWtpdC1jb250YWluZXItLWlzLWZpeGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG5cblxufSkoKTtcblxuXG4vKlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblBPTFlGSUxMIEZPUiBzdHIuaW5jbHVkZXMoKVxuQExJTksgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL2luY2x1ZGVzXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbmlmICghU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24oc2VhcmNoLCBzdGFydCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBpZiAodHlwZW9mIHN0YXJ0ICE9PSAnbnVtYmVyJykge1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc3RhcnQgKyBzZWFyY2gubGVuZ3RoID4gdGhpcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuaW5kZXhPZihzZWFyY2gsIHN0YXJ0KSAhPT0gLTE7XG4gICAgfVxuICB9O1xufVxuXG5cbi8qXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblBPTFlGSUxMIEZPUiBub2RlLnJlbW92ZSgpXG5ATElOSyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2hpbGROb2RlL3JlbW92ZVxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuKGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAoaXRlbS5oYXNPd25Qcm9wZXJ0eSgncmVtb3ZlJykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0ZW0sICdyZW1vdmUnLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnROb2RlICE9PSBudWxsKVxuICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KShbRWxlbWVudC5wcm90b3R5cGUsIENoYXJhY3RlckRhdGEucHJvdG90eXBlLCBEb2N1bWVudFR5cGUucHJvdG90eXBlXSk7XG5cblxuXG4vKlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5QT0xZRklMTCBGT1IgYXJyYXkuaW5jbHVkZXNcbkBMSU5LIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2luY2x1ZGVzXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiovXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnaW5jbHVkZXMnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uKHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCkge1xuXG4gICAgICBpZiAodGhpcyA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widGhpc1wiIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gMS4gTGV0IE8gYmUgPyBUb09iamVjdCh0aGlzIHZhbHVlKS5cbiAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpO1xuXG4gICAgICAvLyAyLiBMZXQgbGVuIGJlID8gVG9MZW5ndGgoPyBHZXQoTywgXCJsZW5ndGhcIikpLlxuICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwO1xuXG4gICAgICAvLyAzLiBJZiBsZW4gaXMgMCwgcmV0dXJuIGZhbHNlLlxuICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIDQuIExldCBuIGJlID8gVG9JbnRlZ2VyKGZyb21JbmRleCkuXG4gICAgICAvLyAgICAoSWYgZnJvbUluZGV4IGlzIHVuZGVmaW5lZCwgdGhpcyBzdGVwIHByb2R1Y2VzIHRoZSB2YWx1ZSAwLilcbiAgICAgIHZhciBuID0gZnJvbUluZGV4IHwgMDtcblxuICAgICAgLy8gNS4gSWYgbiDiiaUgMCwgdGhlblxuICAgICAgLy8gIGEuIExldCBrIGJlIG4uXG4gICAgICAvLyA2LiBFbHNlIG4gPCAwLFxuICAgICAgLy8gIGEuIExldCBrIGJlIGxlbiArIG4uXG4gICAgICAvLyAgYi4gSWYgayA8IDAsIGxldCBrIGJlIDAuXG4gICAgICB2YXIgayA9IE1hdGgubWF4KG4gPj0gMCA/IG4gOiBsZW4gLSBNYXRoLmFicyhuKSwgMCk7XG5cbiAgICAgIGZ1bmN0aW9uIHNhbWVWYWx1ZVplcm8oeCwgeSkge1xuICAgICAgICByZXR1cm4geCA9PT0geSB8fCAodHlwZW9mIHggPT09ICdudW1iZXInICYmIHR5cGVvZiB5ID09PSAnbnVtYmVyJyAmJiBpc05hTih4KSAmJiBpc05hTih5KSk7XG4gICAgICB9XG5cbiAgICAgIC8vIDcuIFJlcGVhdCwgd2hpbGUgayA8IGxlblxuICAgICAgd2hpbGUgKGsgPCBsZW4pIHtcbiAgICAgICAgLy8gYS4gTGV0IGVsZW1lbnRLIGJlIHRoZSByZXN1bHQgb2YgPyBHZXQoTywgISBUb1N0cmluZyhrKSkuXG4gICAgICAgIC8vIGIuIElmIFNhbWVWYWx1ZVplcm8oc2VhcmNoRWxlbWVudCwgZWxlbWVudEspIGlzIHRydWUsIHJldHVybiB0cnVlLlxuICAgICAgICBpZiAoc2FtZVZhbHVlWmVybyhvW2tdLCBzZWFyY2hFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGMuIEluY3JlYXNlIGsgYnkgMS4gXG4gICAgICAgIGsrKztcbiAgICAgIH1cblxuICAgICAgLy8gOC4gUmV0dXJuIGZhbHNlXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9KTtcbn0iLCIoZnVuY3Rpb24oKSB7XG4gIFxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIEZJVE1FTlQgVEVYVCBGSUxURVJcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuXG4gIC8vIEdldCBWYXJzXG4gIHZhciBmaXRtZW50VGV4dEZpbHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXRtZW50LXRleHQtZmlsdGVyJyksXG4gICAgICBwcm9kdWN0Rml0bWVudFRhZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2luZ2xlLS1wYXJ0LWZpdG1lbnQtbGlzdCBhJyk7XG5cbiAgLy8gQ2hlY2sgdGhhdCBwYWdlIGhhcyB0ZXh0IGZpbHRlclxuICBpZiAoZml0bWVudFRleHRGaWx0ZXIpIHtcbiAgICBmaXRtZW50VGV4dEZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgICAvLyBMb29wIG92ZXIgYWxsIGZpdG1lbnQgYW5kIGFkZC9yZW1vdmUgaGlkZGVuIGNsYXNzXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2R1Y3RGaXRtZW50VGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBwcm9kdWN0Rml0bWVudFRhZ3NbaV0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgaWYgKHByb2R1Y3RGaXRtZW50VGFnc1tpXS50ZXh0Q29udGVudC5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgICBwcm9kdWN0Rml0bWVudFRhZ3NbaV0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICBBREQgUFJPRFVDVCBUTyBDQVJUXG4gID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgKi9cblxuICAvLyBHZXQgVmFyc1xuICAvLyB2YXIgcHJvZHVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2luZ2xlLXByb2R1Y3QtLWFkZC10by1jYXJ0LWZvcm0nKSxcbiAgLy8gICAgIGFkZFByb2R1Y3RUb0NhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2luZ2xlLXByb2R1Y3QtLWFkZC10by1jYXJ0Jyk7XG4gIFxuICAvLyBpZiAoYWRkUHJvZHVjdFRvQ2FydCkge1xuXG4gIC8vICAgYWRkUHJvZHVjdFRvQ2FydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICAgIHZhciBhZGRUb0NhcnREcmF3ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWFkZC10by1jYXJ0Jyk7XG4gICAgICBcbiAgLy8gICAgIGF0b21pYyh3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJz9hZGQtdG8tY2FydD0nICsgZS50YXJnZXQudmFsdWUpXG4gIC8vICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gIC8vICAgICAgICAgYWRkVG9DYXJ0RHJhd2VyLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1hY3RpdmUnKTtcbiAgICAgICAgICBcbiAgLy8gICAgICAgICBhZGRQcm9kdWN0VG9DYXJ0KGUudGFyZ2V0LnZhbHVlKTtcblxuICAvLyAgICAgICAgIGZ1bmN0aW9uIGFkZFByb2R1Y3RUb0NhcnQocHJvZHVjdElEKSB7XG5cbiAgLy8gICAgICAgICAgIC8vIENoZWNrIGZvciBjYXJ0IGl0ZW0gdGVtcGxhdGUgYW5kIGNvcHkgdGhlIHN0cnVjdHVyZVxuICAvLyAgICAgICAgICAgdmFyIGFsZXJ0Q2FydEl0ZW1UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1pdGVtJykuaW5uZXJIVE1MO1xuXG4gIC8vICAgICAgICAgICB2YXIgYWRkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdsaScgKTtcbiAgLy8gICAgICAgICAgIGFkZEl0ZW0uY2xhc3NMaXN0LmFkZCgnYWxlcnQtLWNhcnQtaXRlbScpO1xuICAvLyAgICAgICAgICAgYWRkSXRlbS5kYXRhc2V0LnByb2R1Y3RJRCA9IHByb2R1Y3RJRDtcbiAgLy8gICAgICAgICAgIGFkZEl0ZW0uaW5uZXJIVE1MID0gYWxlcnRDYXJ0SXRlbVRlbXBsYXRlO1xuXG4gIC8vICAgICAgICAgICB2YXIgcHJvZHVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW50cnktdGl0bGUnKS5pbm5lclRleHQ7XG4gIC8vICAgICAgICAgICB2YXIgcHJvZHVjdFNLVSA9IHByb2R1Y3ROYW1lLnNwbGl0KCcgJykuc3BsaWNlKC0xLCAxKTtcbiAgLy8gICAgICAgICAgIHZhciBjb25zb2xpZGF0ZWRQcm9kdWN0TmFtZSA9IHByb2R1Y3ROYW1lLnJlcGxhY2UoJ0pvaG4gRGVlcmUgJywgJycpLnJlcGxhY2UocHJvZHVjdFNLVSwgJycpO1xuXG4gIC8vICAgICAgICAgICBhZGRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1wYXJ0LW51bWJlcicpLmlubmVyVGV4dCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpWzJdLnRvVXBwZXJDYXNlKCk7XG4gIC8vICAgICAgICAgICBhZGRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0tY2FydC1wYXJ0LXR5cGUnKS5pbm5lclRleHQgPSBjb25zb2xpZGF0ZWRQcm9kdWN0TmFtZTtcblxuICAvLyAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0LS1jYXJ0LWxpc3QnKS5hcHBlbmRDaGlsZChhZGRJdGVtKTtcbiAgLy8gICAgICAgICB9XG4gIC8vICAgICAgIH0pXG5cbiAgLy8gICB9KVxuICAvLyB9XG5cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGNvbW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpbmdsZS1jb21tZW50cycpO1xuICB2YXIgY29tbWVudHNSZXBseSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZXNwb25kJyk7XG4gIHZhciBjb21tZW50Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb21tZW50Zm9ybScpO1xuXG5cbiAgaWYgKGNvbW1lbnRzUmVwbHkpIHtcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBidXR0b24uaW5uZXJIVE1MID0gJ0FkZCBDb21tZW50JztcbiAgICBidXR0b24uaWQgPSAnYWRkQ29tbWVudCc7XG5cbiAgICBjb21tZW50c1JlcGx5LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBjb21tZW50c1JlcGx5LnN0eWxlLm1heEhlaWdodCA9ICcwcHgnO1xuICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUucGFkZGluZyA9ICcwcHgnO1xuICAgIGNvbW1lbnRzUmVwbHkuc3R5bGUubWFyZ2luVG9wID0gJzBweCc7XG5cbiAgICBjb21tZW50c0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZENvbW1lbnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBzZWxmID0gZS50YXJnZXQ7XG4gICAgICBzZWxmLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICBjb21tZW50c1JlcGx5LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICBjb21tZW50c1JlcGx5LnN0eWxlLm1heEhlaWdodCA9ICcxMDAwcHgnO1xuICAgICAgY29tbWVudHNSZXBseS5zdHlsZS5wYWRkaW5nID0gJzFyZW0nO1xuICAgICAgY29tbWVudHNSZXBseS5zdHlsZS5tYXJnaW5Ub3AgPSAnM3JlbSc7XG4gICAgfSlcblxuICB9XG5cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGxvYWRQb3N0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2FkTW9yZVBvc3RzJyk7XG5cbiAgaWYgKGxvYWRQb3N0cykge1xuICAgICAgdmFyIG9mZnNldCA9IDE7XG4gICAgICB2YXIgcG9zdENvdW50ID0gMTA7XG4gICAgICB2YXIgcG9zdExpc3RpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdC1saXN0aW5nLS1saXN0Jyk7XG5cbiAgICAgIGxvYWRQb3N0cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvd3AtanNvbi93cC92Mi9wb3N0cz9vZmZzZXQ9JyArIChvZmZzZXQgKiBwb3N0Q291bnQpO1xuICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnY2F0ZWdvcnknKSkge1xuICAgICAgICAgICAgdmFyIGNhdCA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0O1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2F0KTtcbiAgICAgICAgICAgIC8vIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWpzb24vd3AvdjIvcG9zdHM/b2Zmc2V0PScgKyAob2Zmc2V0ICogcG9zdENvdW50KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsb2FkUG9zdHMuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgIGxvYWRQb3N0cy5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIFxuICAgICAgICAgIGF0b21pYyh1cmwpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgdmFyIHBvc3RPYmogPSBbXTtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBvc3RPYmoucHVzaCh7XG4gICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhW2ldLmRhdGUsXG4gICAgICAgICAgICAgICAgICBhdXRob3I6IGRhdGFbaV0uYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGFbaV0uY2F0ZWdvcmllc1swXSxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiBkYXRhW2ldLnRpdGxlLnJlbmRlcmVkLFxuICAgICAgICAgICAgICAgICAgdGFnczogZGF0YVtpXS50YWdzLFxuICAgICAgICAgICAgICAgICAgbGluazogZGF0YVtpXS5saW5rLFxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGFbaV0uZXhjZXJwdC5yZW5kZXJlZC5zbGljZSgzLCAtNSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBsb2FkUG9zdHMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgbG9hZFBvc3RzLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5sZW5ndGggPCAxMCkge1xuICAgICAgICAgICAgICAgIGxvYWRQb3N0cy50ZXh0Q29udGVudCA9ICdBbGwgUG9zdHMgTG9hZGVkJztcbiAgICAgICAgICAgICAgICBsb2FkUG9zdHMuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxvYWRQb3N0cy5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHBvc3RPYmo7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihwb3N0T2JqKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdE9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBhbGwgZGF0YVxuICAgICAgICAgICAgICAgIHZhciBwb3N0VGltZSA9IHBvc3RPYmpbaV0uZGF0ZTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdFByZXR0eVRpbWUgPSBuZXcgRGF0ZShwb3N0VGltZSk7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RQcmV0dHlUaW1lID0gcG9zdFByZXR0eVRpbWUudG9EYXRlU3RyaW5nKCkuc2xpY2UoMyk7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RUaXRsZSA9IHBvc3RPYmpbaV0udGl0bGU7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RDYXRlZ29yeSA9ICdVbmNhdGVnb3JpemVkJztcbiAgICAgICAgICAgICAgICB2YXIgcG9zdExpbmsgPSBwb3N0T2JqW2ldLmxpbms7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3REZXNjcmlwdGlvbiA9IHBvc3RPYmpbaV0uZGVzY3JpcHRpb247XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2gocG9zdE9ialtpXS5jYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICAgICAgICAgICAgcG9zdENhdGVnb3J5ID0gJ01haW50ZW5hbmNlIFJlbWluZGVyJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDYzOlxuICAgICAgICAgICAgICAgICAgICBwb3N0Q2F0ZWdvcnkgPSAnU2VydmljZSBJbnRlcnZhbHMnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgNjU6XG4gICAgICAgICAgICAgICAgICAgIHBvc3RDYXRlZ29yeSA9ICdUcm91Ymxlc2hvb3RpbmcnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgcG9zdENhdGVnb3J5ID0gJ1RhbGsgV2l0aCBBIFRlY2gnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBjYXJkXG4gICAgICAgICAgICAgICAgdmFyIGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2NhcmQnKTtcbiAgICAgICAgICAgICAgICBjYXJkLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwiY2FyZC1jb250ZW50XCI+JyArIHBvc3RUaXRsZSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpLmlubmVySFRNTCA9ICc8cCBjbGFzcz1cImNhcmQtY2F0ZWdvcnlcIj48YSBocmVmPVwiLz9jYXQ9JyArIHBvc3RPYmpbaV0uY2F0ZWdvcnkgKyAnXCI+JyArIHBvc3RDYXRlZ29yeSArICc8L2E+PC9wPjxoNCBjbGFzcz1cImNhcmQtdGl0bGVcIj48YSBocmVmPVwiJyArIHBvc3RMaW5rICsgJ1wiPicgKyBwb3N0VGl0bGUgKyAnPC9hPjwvaDQ+PHAgY2xhc3M9XCJjYXJkLWRlc2NyaXB0aW9uXCI+JyArIHBvc3REZXNjcmlwdGlvbiArICc8L3A+PHVsIGNsYXNzPVwic2luZ2xlLXRhZ3MtLWxpc3RcIj48L3VsPic7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGNhcmQgdG8gcmVzdWx0c1xuICAgICAgICAgICAgICAgIHBvc3RMaXN0aW5nLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIG9mZnNldCsrO1xuICAgICAgfSk7XG4gIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG5cbiAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b29jb21tZXJjZS1jYXJ0JykgfHwgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3dvb2NvbW1lcmNlLWNoZWNrb3V0JykpIHtcbiAgICAvLyBiYWlsXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNhcnREcmF3ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWFkZC10by1jYXJ0Jyk7XG4gIHZhciBjYXJ0T3BlbiA9IGZhbHNlO1xuICB2YXIgY2FydExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtLWNhcnQtbGlzdCcpO1xuICB2YXIgY2FydEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC0taGVhZGVyJyk7XG4gIHZhciBjYXJ0TGluZUl0ZW1zID0gW107XG4gIFxuICBjYXJ0TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcygnYScpKSB7XG4gICAgICBjb25zb2xlLmxvZygncmVkaXJlY3QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoJ2J1dHRvbicpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZW1vdmVmcm9tQ2FydChlKTsgXG4gICAgfVxuICB9KTtcblxuICBjYXJ0TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgaW5jcmVtZW50SXRlbShlKTtcbiAgfSk7XG5cbiAgY2FydEhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBkaXNwbGF5Q2FydCgpO1xuICB9KTtcblxuICBpZiAoY2FydExpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKS5sZW5ndGggPiAwKSB7XG4gICAgZGlzcGxheU1pbmltaXplZENhcnQoKTtcbiAgfVxuXG4gIHZhciBhZGRUb0NhcnRCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFkZC10by1jYXJ0Jyk7XG4gIGlmIChhZGRUb0NhcnRCdXR0b25zKSB7XG4gICAgYWRkVG9DYXJ0QnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uKGJ1dHRvbikge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHVwZGF0ZUNhcnRIZWFkZXJDb3VudCgndXAnKTtcbiAgICAgICAgYWRkVG9DYXJ0KGUudGFyZ2V0KTtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRUb0NhcnQoZWxlbSkge1xuICAgIGlmICghZWxlbS52YWx1ZSkge1xuICAgICAgLy8gZ2V0IGlkIHNvbWUgb3RoZXIgd2F5XG4gICAgICBjb25zb2xlLmxvZygnaSBkb250IGhhdmUgYSB2YWx1ZScpO1xuICAgICAgYXRvbWljKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWFkbWluL2FkbWluLWFqYXgucGhwJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFjdGlvbjogJ2ZpbmRfcHJvZHVjdF9ieV9za3UnLFxuICAgICAgICAgIHNrdTogZWxlbS5kYXRhc2V0LnNrdVxuICAgICAgICB9XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwcm9kdWN0SUQgPSBlbGVtLnZhbHVlO1xuICAgIGF0b21pYyh3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YToge1xuICAgICAgICBhY3Rpb246ICdhZGRfaXRlbV90b19jYXJ0JyxcbiAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdElELFxuICAgICAgICBxdHk6IDFcbiAgICAgIH1cbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBpZiAocmVzcG9uc2UueGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzZnVsbHkgYWRkZWQgJyArIHByb2R1Y3RJRCArICcgdG8gY2FydCcpO1xuICAgICAgICBwb3B1bGF0ZUNhcnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBwb3B1bGF0ZUNhcnQoKSB7XG4gICAgdmFyIGxpbmVJdGVtcyA9IGdldFByb2R1Y3REZXRhaWxzKCk7XG5cbiAgICBsaW5lSXRlbXMudGhlbihmdW5jdGlvbihpdGVtQXJyYXkpIHtcbiAgICAgIGNvbnNvbGUudGFibGUoaXRlbUFycmF5KTtcbiAgICAgIGNhcnRMaXN0LmlubmVySFRNTCA9IGl0ZW1BcnJheS5tYXAoZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGl0ZW0uc2FsZVByaWNlKSB7XG4gICAgICAgICAgcmV0dXJuICc8bGkgY2xhc3M9XCJhbGVydC0tY2FydC1pdGVtXCIgZGF0YS1wcm9kdWN0SUQ9XCInICsgaXRlbS5pZCArICdcIiBkYXRhLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiPjxzcGFuIGNsYXNzPVwiYWxlcnQtLWNhcnQtcGFydFwiPjxzcGFuIGNsYXNzPVwiYWxlcnQtLWNhcnQtcGFydC10eXBlXCI+PGEgaHJlZj1cIicgKyBpdGVtLnBlcm1hbGluayArICdcIj4nICsgaXRlbS5uYW1lICsgJzwvYT48L3NwYW4+PHNwYW4gY2xhc3M9XCJhbGVydC0tY2FydC1wYXJ0LW51bWJlclwiPicgKyBpdGVtLnNrdSArICcgLSA8ZGVsPiQnICsgaXRlbS5wcmljZSArICc8L2RlbD4gPHNwYW4gY2xhc3M9XCJzYWxlLXByaWNlXCI+JCcgKyBpdGVtLnNhbGVQcmljZSArICc8L3NwYW4+PC9zcGFuPjwvc3Bhbj48c3Bhbj48bGFiZWwgZm9yPVwicHJvZHVjdF9xdWFudGl0eVwiPlF0eTogPC9sYWJlbD48aW5wdXQgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJwcm9kdWN0X3F1YW50aXR5XCIgbWluPVwiMVwiIG1heD1cIjUwXCIgdmFsdWU9XCIxXCI+PGJ1dHRvbiBjbGFzcz1cImFsZXJ0LS1yZW1vdmUtaXRlbVwiIGRhdGEtaW5kZXg9XCInICsgaW5kZXggKyAnXCI+JnRpbWVzOzwvYnV0dG9uPjwvc3Bhbj48L2xpPic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuICc8bGkgY2xhc3M9XCJhbGVydC0tY2FydC1pdGVtXCIgZGF0YS1wcm9kdWN0SUQ9XCInICsgaXRlbS5pZCArICdcIiBkYXRhLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiPjxzcGFuIGNsYXNzPVwiYWxlcnQtLWNhcnQtcGFydFwiPjxzcGFuIGNsYXNzPVwiYWxlcnQtLWNhcnQtcGFydC10eXBlXCI+PGEgaHJlZj1cIicgKyBpdGVtLnBlcm1hbGluayArICdcIj4nICsgaXRlbS5uYW1lICsgJzwvYT48L3NwYW4+PHNwYW4gY2xhc3M9XCJhbGVydC0tY2FydC1wYXJ0LW51bWJlclwiPicgKyBpdGVtLnNrdSArICcgLSAkJyArIGl0ZW0ucHJpY2UgKyAnPC9zcGFuPjwvc3Bhbj48c3Bhbj48bGFiZWwgZm9yPVwicHJvZHVjdF9xdWFudGl0eVwiPlF0eTogPC9sYWJlbD48aW5wdXQgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJwcm9kdWN0X3F1YW50aXR5XCIgbWluPVwiMVwiIG1heD1cIjUwXCIgdmFsdWU9XCIxXCI+PGJ1dHRvbiBjbGFzcz1cImFsZXJ0LS1yZW1vdmUtaXRlbVwiIGRhdGEtaW5kZXg9XCInICsgaW5kZXggKyAnXCI+JnRpbWVzOzwvYnV0dG9uPjwvc3Bhbj48L2xpPic7XG4gICAgICAgIH1cbiAgICAgIH0pLmpvaW4oJycpO1xuICAgIH0pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBkaXNwbGF5Q2FydCgpO1xuICAgIH0sIDIwMClcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFByb2R1Y3REZXRhaWxzKGlkKSB7XG4gICAgcmV0dXJuIGF0b21pYyh3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YToge1xuICAgICAgICBhY3Rpb246ICdnZXRfcHJvZHVjdF9kZXRhaWxzJyxcbiAgICAgICAgcHJvZHVjdF9pZDogaWRcbiAgICAgIH1cbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLnNsaWNlKDAsLTEpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVmcm9tQ2FydChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdXBkYXRlQ2FydEhlYWRlckNvdW50KCdkb3duJyk7XG4gICAgXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoJ2J1dHRvbicpKSB7XG4gICAgICB2YXIgaW5kZXggPSBlLnRhcmdldC5kYXRhc2V0LmluZGV4O1xuICAgICAgdmFyIHBhcmVudCA9IGNhcnRMaXN0LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpO1xuICAgICAgcGFyZW50LnJlbW92ZSgpO1xuICAgICAgYXRvbWljKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWFkbWluL2FkbWluLWFqYXgucGhwJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFjdGlvbjogJ3JlbW92ZV9pdGVtX2Zyb21fY2FydCcsXG4gICAgICAgICAgcHJvZHVjdF9pZDogcGFyZW50LmRhdGFzZXQucHJvZHVjdGlkXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGNhcnRMaXN0LmNoaWxkcmVuLmxlbmd0aCA8IDEpIHtcbiAgICAgIGNhcnRMaXN0LmlubmVySFRNTCA9ICc8bGk+WW91ciBzaG9wcGluZyBjYXJ0IGlzIGVtcHR5LjwvbGk+JztcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUNhcnRIZWFkZXJDb3VudChkaXJlY3Rpb24pIHtcbiAgICB2YXIgY3VycmVudENvdW50ID0gcGFyc2VJbnQoY2FydEhlYWRlci5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC1jb3VudCcpLmlubmVyVGV4dCk7XG4gICAgaWYgKCFkaXJlY3Rpb24pIHtcbiAgICAgIGNhcnRIZWFkZXIucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtY291bnQnKS5pbm5lclRleHQgPSBjdXJyZW50Q291bnQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3VwJykge1xuICAgICAgKytjdXJyZW50Q291bnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC0tY3VycmVudENvdW50O1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50Q291bnQgPiAxIHx8IGN1cnJlbnRDb3VudCA9PT0gMCkge1xuICAgICAgY2FydEhlYWRlci5xdWVyeVNlbGVjdG9yKCdoNCcpLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInByb2R1Y3QtY291bnRcIj4nICsgY3VycmVudENvdW50ICsgJzwvc3Bhbj4gUHJvZHVjdHMgaW4gQ2FydCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhcnRIZWFkZXIucXVlcnlTZWxlY3RvcignaDQnKS5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJwcm9kdWN0LWNvdW50XCI+JyArIGN1cnJlbnRDb3VudCArICc8L3NwYW4+IFByb2R1Y3QgaW4gQ2FydCc7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGxheUNhcnQoaXNNaW5pbWl6ZWQpIHtcbiAgICBpZiAoIWNhcnREcmF3ZXIpIHsgXG4gICAgICBjb25zb2xlLmVycm9yKCdDYXJ0IE1hcmt1cCBpcyBub3Qgb24gdGhlIHBhZ2UnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYXJ0T3BlbiA9ICFjYXJ0T3BlbjtcbiAgICBjYXJ0RHJhd2VyLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LS1pcy1hY3RpdmUnKTtcblxuICAgIGlmIChjYXJ0RHJhd2VyLmNsYXNzTGlzdC5jb250YWlucygnYWxlcnQtLWlzLW1pbmltaXplZCcpKSB7XG4gICAgICBjYXJ0RHJhd2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2FsZXJ0LS1pcy1taW5pbWl6ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gIH1cblxuICBmdW5jdGlvbiBkaXNwbGF5TWluaW1pemVkQ2FydCgpIHtcbiAgICBpZiAoIWNhcnREcmF3ZXIpIHsgXG4gICAgICBjb25zb2xlLmVycm9yKCdDYXJ0IE1hcmt1cCBpcyBub3Qgb24gdGhlIHBhZ2UnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FydERyYXdlci5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtYWN0aXZlJyk7XG4gICAgY2FydERyYXdlci5jbGFzc0xpc3QuYWRkKCdhbGVydC0taXMtbWluaW1pemVkJyk7XG4gIH1cblxuICBmdW5jdGlvbiBpbmNyZW1lbnRJdGVtKGUpIHtcbiAgICB2YXIgZWxlbWVudENoYW5nZWQgPSBlLnRhcmdldDtcbiAgICB2YXIgcHJvZHVjdElEID0gZWxlbWVudENoYW5nZWQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucHJvZHVjdGlkO1xuICAgIHZhciBxdHkgPSBlbGVtZW50Q2hhbmdlZC52YWx1ZTtcbiAgICBhdG9taWMod2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvd3AtYWRtaW4vYWRtaW4tYWpheC5waHAnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYWN0aW9uOiAnaW5jcmVtZW50X2l0ZW1faW5fY2FydCcsXG4gICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3RJRCxcbiAgICAgICAgcXR5OiBxdHlcbiAgICAgIH1cbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBpZiAocmVzcG9uc2UueGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIC8vIHZhciByZXNwb25zZU9iaiA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YS5zbGljZSgwLC0xKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdxdWFudGl0eSBmb3IgJyArIHByb2R1Y3RJRCArICcgaXMgc2V0IHRvICcgKyBxdHkpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBhY2NvcmRpYW5CdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFjY29yZGlhbi0tdGl0bGUnKTtcbiAgaWYgKGFjY29yZGlhbkJ1dHRvbnMpIHtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWNjb3JkaWFuQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgYWNjb3JkaWFuQnV0dG9uc1tpXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlhbi0taXMtY29sbGFwc2VkJyk7XG4gICAgICBhY2NvcmRpYW5CdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgY29udGFpbmluZ0VsZW1lbnQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpZiAoY29udGFpbmluZ0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpYW4tLWlzLWNvbGxhcHNlZCcpKSB7XG4gICAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRpYW4tLWlzLWNvbGxhcHNlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWNjb3JkaWFuLS1pcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgYWxsVG9vbFRpcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9vbHRpcC0tdG9nZ2xlJyk7XG4gIGlmIChhbGxUb29sVGlwcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsVG9vbFRpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFsbFRvb2xUaXBzW2ldLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCd0b29sdGlwLS1pcy1oaWRkZW4nKTtcblxuICAgICAgYWxsVG9vbFRpcHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QudG9nZ2xlKCd0b29sdGlwLS1pcy1oaWRkZW4nKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBjbG9zZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLS1jbG9zZScpO1xuICB2YXIgbGF1bmNoTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bZGF0YS1tb2RhbC1sYXVuY2hdJyk7XG5cbiAgaWYgKGNsb3NlTW9kYWwpIHtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF1bmNoTW9kYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxhdW5jaE1vZGFsW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgbW9kYWxJRCA9IGUudGFyZ2V0LmRhdGFzZXQubW9kYWxMYXVuY2g7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbFtkYXRhLW1vZGFsPScgKyBtb2RhbElEICsgJ10nKS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0taXMtaGlkZGVuJyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLWlzLW9wZW4nKTtcblxuICAgICAgICAvLyBQb3B1bGF0ZSBNb2RlbCBGaWVsZCB3aXRoIEN1cnJlbnQgTW9kZWwgUGFnZVxuICAgICAgICBpZiAobW9kYWxJRCA9ICdzaWduLXVwLWZvcm0nKSB7XG4gICAgICAgICAgdmFyIHBhZ2VUYWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbWV0YVtwcm9wZXJ0eT1cImFydGljbGU6dGFnXCJdJyk7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlVGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKChwYWdlVGFnc1tpXS5jb250ZW50LmluY2x1ZGVzKCdKb2huIERlZXJlJykpICYmIChwYWdlVGFnc1tpXS5jb250ZW50ICE9PSAnSm9obiBEZWVyZSBMYXduIFRyYWN0b3InKSkge1xuICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBwYWdlVGFnc1tpXS5jb250ZW50LnNwbGl0KCdKb2huIERlZXJlICcpWzFdO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWNlLU1PREVMJykudmFsdWUgPSBtb2RlbC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsb3NlTW9kYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNsb3NlTW9kYWxbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2RhbC0taXMtaGlkZGVuJyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLWlzLW9wZW4nKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUua2V5Q29kZSAhPSAyNykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgbGF1bmNoTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbZGF0YS1tb2RhbF0nKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLWlzLW9wZW4nKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGF1bmNoTW9kYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGF1bmNoTW9kYWxbaV0uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLWlzLWhpZGRlbicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH1cblxufSkoKTsiLCJpZiAod2luZG93LmpRdWVyeSAmJiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2luZ2xlLXBvc3QnKSkge1xuXG4gIChmdW5jdGlvbigpIHtcblxuXG4gICAgJCgnI21jLWVtYmVkZGVkLXN1YnNjcmliZS1mb3JtJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIFxuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgXG4gICAgICB2YXIgZW1haWwgPSAkdGhpcy5maW5kKCcjbWNlLUVNQUlMJykudmFsKCk7XG4gICAgICB2YXIgZmlyc3ROYW1lID0gJHRoaXMuZmluZCgnI21jZS1GTkFNRScpLnZhbCgpO1xuICAgICAgdmFyIGxhc3ROYW1lID0gJHRoaXMuZmluZCgnI21jZS1MTkFNRScpLnZhbCgpO1xuICAgICAgdmFyIG1vZGVsTnVtYmVyID0gJHRoaXMuZmluZCgnI21jZS1NT0RFTCcpLnZhbCgpO1xuICAgICAgdmFyIGN1cnJlbnRIb3VycyA9ICR0aGlzLmZpbmQoJyNtY2UtQ1VSUkVOVF9IUicpLnZhbCgpO1xuICAgICAgdmFyIG1vd2luZ1RpbWUgPSAkdGhpcy5maW5kKCcjbWNlLU1PV0lOR19USU0nKS52YWwoKTtcbiAgICAgIG1vd2luZ1RpbWUgPSBtb3dpbmdUaW1lLnNwbGl0KCcoJylbMV0uc3BsaXQoJyknKVswXS50b0xvd2VyQ2FzZSgpO1xuICBcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHR5cGU6ICR0aGlzLmF0dHIoJ21ldGhvZCcpLFxuICAgICAgICB1cmw6ICR0aGlzLmF0dHIoJ2FjdGlvbicpLFxuICAgICAgICBkYXRhOiAkdGhpcy5zZXJpYWxpemUoKSxcbiAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgXG4gICAgICAgIH0sXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQgIT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAkKCcjbWNfZW1iZWRfc2lnbnVwX3Njcm9sbCcpLnByZXBlbmQoJzxwIHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgcmVkOyBwYWRkaW5nOiAxcmVtO1wiPicgKyBkYXRhLm1zZyArICc8L3A+Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICR0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICQoJ2RpdltkYXRhLW1vZGFsPVwic2lnbi11cC1mb3JtXCJdIC5tb2RhbC1oZWFkaW5nJykudGV4dCgnR3JlYXQgJyArIGZpcnN0TmFtZSArICchJykubmV4dCgpLnRleHQoJ1lvdSB3aWxsIHJlY2VpdmUgYSBjb25maXJtYXRpb24gZW1haWwgc29vbiBhbmQgd2Ugd2lsbCBrZWVwIHlvdSB1cCB0byBkYXRlIG9uIHlvdXIgbmVlZGVkIHBhcnRzLicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkuZmxvY2suY29tL2hvb2tzL3NlbmRNZXNzYWdlLzg1NTgzMmNkLWJkNzktNDM2ZC05ZjFmLWRjZjAwMjAyNTFkZCcsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIFwidGV4dFwiOiBmaXJzdE5hbWUgKyBcIiBcIiArIGxhc3ROYW1lICsgXCIgaGFzIGEgXCIgKyBtb2RlbE51bWJlciArIFwiIHdpdGggXCIgKyBjdXJyZW50SG91cnMgKyBcIiBob3VycyBhbmQgdGFrZXMgXCIgKyBtb3dpbmdUaW1lICsgXCIgdG8gbW93LiBDb250YWN0IFwiICsgZmlyc3ROYW1lICsgXCIgYXQgXCIgKyBlbWFpbFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIFxuICAgIH0pO1xuICBcbiAgfSkoKTtcblxufSIsIihmdW5jdGlvbigpIHtcblxuICB2YXIgYmFzZUZvbnRTaXplID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpKS5nZXRQcm9wZXJ0eVZhbHVlKCdmb250LXNpemUnKSk7XG5cbiAgdmFyIG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdGlja3lOYXYnKTtcblxuICBpZiAobmF2KSB7XG5cbiAgICB2YXIgc2Nyb2xsWSA9IHdpbmRvdy5zY3JvbGxZO1xuICAgIHZhciBuYXZPZmZzZXQgPSBuYXYub2Zmc2V0VG9wO1xuICAgIHZhciBuYXZXaWR0aCA9IG5hdi5jbGllbnRXaWR0aDtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcbiAgICAgIG5hdk9mZnNldCA9IG5hdi5vZmZzZXRUb3A7XG4gICAgICBjb25zb2xlLmxvZyhuYXZPZmZzZXQpO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICBzY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG4gICAgICB2YXIgbWFrZVN0aWNreSA9IHNjcm9sbFkgPiAobmF2T2Zmc2V0IC0gKGJhc2VGb250U2l6ZSAqIDMpKTtcblxuICAgICAgaWYgKG1ha2VTdGlja3kpIHtcbiAgICAgICAgbmF2LmNsYXNzTGlzdC5hZGQoJ25hdi0taXMtc3RpY2t5Jyk7XG4gICAgICAgIG5hdi5zdHlsZS5tYXhXaWR0aCA9IG5hdldpZHRoICsgJ3B4JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hdi5jbGFzc0xpc3QucmVtb3ZlKCduYXYtLWlzLXN0aWNreScpO1xuICAgICAgfVxuXG5cbiAgICB9KTtcblxuICB9XG5cbn0pKCk7ICIsIihmdW5jdGlvbigpIHtcblxuICBpZiAoIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b29jb21tZXJjZS1jYXJ0JykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2FydExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2ZwLWNhcnQtLWxpc3QnKTtcbiAgdmFyIHVwZGF0ZUNhcnRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bbmFtZT1cInVwZGF0ZV9jYXJ0XCJdJyk7XG4gIHZhciBjYXJ0U3VidG90YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FydC1zdWJ0b3RhbCB0ZCcpO1xuICB2YXIgY2FydFRvdGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9yZGVyLXRvdGFsIHRkIHN0cm9uZycpO1xuICB2YXIgY291cG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0LWRpc2NvdW50Jyk7XG5cbiAgXG4gIC8qXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBIYW5kbGUgRGlzYWJsZSBvZiBcIlVwZGF0ZSBDYXJ0XCIgQnV0dG9uXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqLyBcbiAgY2FydExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnRhcmdldC50YWdOYW1lICE9PSAnSU5QVVQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHVwZGF0ZUNhcnRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB1cGRhdGVMaW5lSXRlbVByaWNlKGUudGFyZ2V0KTtcbiAgICAvLyB1cGRhdGVDYXJ0VG90YWxzKCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVJdGVtUHJpY2UoaXRlbSkge1xuICAgIGNvbnNvbGUubG9nKCd1cGRhdGUgbGluZSBpdGVtIHByaWNlJyk7XG4gICAgXG4gICAgdmFyIGl0ZW1EZXRhaWxzID0gaXRlbS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICB2YXIgcmVndWxhclByaWNlID0gaXRlbURldGFpbHMucXVlcnlTZWxlY3RvcignLnJlZ3VsYXItcHJpY2UnKTtcbiAgICB2YXIgc2FsZVByaWNlID0gaXRlbURldGFpbHMucXVlcnlTZWxlY3RvcignLnNhbGUtcHJpY2UnKTtcbiAgICBcbiAgICByZWd1bGFyUHJpY2UudGV4dENvbnRlbnQgPSAocmVndWxhclByaWNlLmRhdGFzZXQucHJpY2UgKiBpdGVtLnZhbHVlKS50b0ZpeGVkKDIpO1xuICAgIFxuICAgIGlmIChzYWxlUHJpY2UpIHtcbiAgICAgIHNhbGVQcmljZS50ZXh0Q29udGVudCA9ICckJyArIChzYWxlUHJpY2UuZGF0YXNldC5zYWxlUHJpY2UgKiBpdGVtLnZhbHVlKS50b0ZpeGVkKDIpO1xuICAgIH1cblxuICAgIGNhcnRTdWJ0b3RhbC50ZXh0Q29udGVudCA9ICdVcGRhdGluZy4uLic7XG4gICAgY2FydFRvdGFsLnRleHRDb250ZW50ID0gJ1VwZGF0aW5nLi4uJztcbiAgICBjb3Vwb25zLmZvckVhY2goZnVuY3Rpb24oY291cG9uKSB7XG4gICAgICB2YXIgY291cG9uVHlwZSA9IGNvdXBvbi5kYXRhc2V0LmRpc2NvdW50VHlwZTtcbiAgICAgIGlmIChjb3Vwb25UeXBlID09PSAnY291cG9uLXBlcmNlbnQnKSB7XG4gICAgICAgIGNvdXBvbi5xdWVyeVNlbGVjdG9yKCd0ZFtkYXRhLXRpdGxlXScpLnRleHRDb250ZW50ID0gJ1VwZGF0aW5nLi4uJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGF0b21pYyh3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YToge1xuICAgICAgICBhY3Rpb246ICdpbmNyZW1lbnRfaXRlbV9pbl9jYXJ0JyxcbiAgICAgICAgcHJvZHVjdF9pZDogaXRlbURldGFpbHMuZGF0YXNldC5wcm9kdWN0aWQsXG4gICAgICAgIHF0eTogaXRlbS52YWx1ZVxuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICB1cGRhdGVDYXJ0VG90YWxzKCk7XG4gICAgfSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUNhcnRUb3RhbHMoKSB7XG4gICAgY29uc29sZS5sb2coJ3VwZGF0ZSBjYXJ0IHRvdGFscycpO1xuICAgIGF0b21pYyh3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YToge1xuICAgICAgICBhY3Rpb246ICdnZXRfY2FydCcsXG4gICAgICB9XG4gICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgdmFyIGNhcnQgPSBPYmplY3QudmFsdWVzKEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YS5zbGljZSgwLC0xKSkpO1xuICAgICAgdmFyIGNhcnRTdWJ0b3RhbEFtb3VudCA9IDA7XG4gICAgICB2YXIgY2FydFRvdGFsQW1vdW50ID0gMDtcbiAgICAgIFxuICAgICAgY2FydC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgY2FydFN1YnRvdGFsQW1vdW50ID0gY2FydFN1YnRvdGFsQW1vdW50ICsgaXRlbS5saW5lX3N1YnRvdGFsO1xuICAgICAgICBjYXJ0VG90YWxBbW91bnQgPSBjYXJ0VG90YWxBbW91bnQgKyBpdGVtLmxpbmVfdG90YWw7XG4gICAgICB9KTtcblxuICAgICAgY291cG9ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvdXBvbikge1xuICAgICAgICB2YXIgY291cG9uVHlwZSA9IGNvdXBvbi5kYXRhc2V0LmRpc2NvdW50VHlwZTtcbiAgICAgICAgdmFyIGNvdXBvbkFtb3VudCA9IGNvdXBvbi5kYXRhc2V0LmRpc2NvdW50QW1vdW50O1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhjb3Vwb25BbW91bnQpO1xuICAgICAgICBpZiAoY291cG9uVHlwZSA9PT0gJ2NvdXBvbi1wZXJjZW50Jykge1xuICAgICAgICAgIHZhciBkaXNjb3VudCA9IGNhcnRTdWJ0b3RhbEFtb3VudCAqIChjb3Vwb25BbW91bnQgLyAxMDApO1xuICAgICAgICAgIGNvdXBvbi5xdWVyeVNlbGVjdG9yKCd0ZFtkYXRhLXRpdGxlXScpLnRleHRDb250ZW50ID0gJy0kJyArIGRpc2NvdW50LnRvRml4ZWQoMik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjYXJ0U3VidG90YWwudGV4dENvbnRlbnQgPSAnJCcgKyBjYXJ0U3VidG90YWxBbW91bnQudG9GaXhlZCgyKTtcbiAgICAgIGNhcnRUb3RhbC50ZXh0Q29udGVudCA9ICckJyArIGNhcnRUb3RhbEFtb3VudC50b0ZpeGVkKDIpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKlxuICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFJFTU9WRSBBTiBJVEVNIEZST00gVEhFIENBUlRcbiAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqL1xuICBjYXJ0TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyBodHRwOi8vbG9jYWxob3N0OjMwMDAvY2FydC8/cmVtb3ZlX2l0ZW09ZTcyMWE1NGE4Y2YxOGM4NTQzZDQ0NzgyZDllZjY4MWYmX3dwbm9uY2U9YzEzOTg5NzhjY1xuICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUgIT09ICdyZW1vdmUnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjYXJ0U3VidG90YWwudGV4dENvbnRlbnQgPSAnVXBkYXRpbmcuLi4nO1xuICAgIGNhcnRUb3RhbC50ZXh0Q29udGVudCA9ICdVcGRhdGluZy4uLic7XG4gICAgYXRvbWljKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3dwLWFkbWluL2FkbWluLWFqYXgucGhwJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGFjdGlvbjogJ3JlbW92ZV9pdGVtX2Zyb21fY2FydCcsXG4gICAgICAgIHByb2R1Y3RfaWQ6IGUudGFyZ2V0LmRhdGFzZXQucHJvZHVjdF9pZFxuICAgICAgfVxuICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgdXBkYXRlQ2FydFRvdGFscygpO1xuICAgICAgfSk7XG4gIH0pO1xuXG59KSgpOyJdfQ==
